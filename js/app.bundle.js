!function(e){function t(t){for(var n,o,i=t[0],l=t[1],h=t[2],d=0,u=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&u.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(c&&c(t);u.length;)u.shift()();return s.push.apply(s,h||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,i=1;i<a.length;i++){var l=a[i];0!==r[l]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={0:0},s=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var h=0;h<i.length;h++)t(i[h]);var c=l;s.push([762,1]),a()}({12:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={WIDTH:960,HEIGHT:540,TILE_SIZE:32,FONTS:{UI:'"Electrolize"',TEXT:'"M PLUS 1p"'},COLORS:{theme:11193378,white:16777215,gray:11184810,ghost:5592405,dark:1381653,black:0,soy:16772795}}},120:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(77)),r=s(a(12));function s(e){return e&&e.__esModule?e:{default:e}}class o extends Phaser.GameObjects.Container{constructor(e,t,a,s,o=120,i=80,{align:l="center",fontSize:h=16}={}){super(e,t,a);const c="left"===l,d=s.match(/^[a-zA-Z0-9\s]+$/g)?r.default.FONTS.UI:r.default.FONTS.TEXT;this.text=e.add.text(0,0,s,{align:l,fontSize:h,fontFamily:d}).setOrigin(c?0:.5,.5).setPadding(0,2,0,0),o=Math.max(this.text.width+40,o),this.text.setPosition(c?20-o.half:0,-1),this.setSize(o,i).setInteractive(),this.setSeKey("click"),this.bgLight=new n.default(e,-4,4,o,i,{color:r.default.COLORS.theme,alpha:1}).setOrigin(.5,.5),this.bgLight.visible=!1;const u=new n.default(e,0,0,o,i,{color:r.default.COLORS.black,lineColor:r.default.COLORS.white}).setOrigin(.5,.5);this.add([this.bgLight,u,this.text]),this.on("pointerover",()=>{this.bgLight.visible=!0}),this.on("pointerout",()=>{this.bgLight.visible=!1}),this.on("pointerup",t=>{Math.abs(t.downX-t.upX)>3||Math.abs(t.downY-t.upY)>3||(e.audio.se(this.seKey),this.emit("click"))})}setSeKey(e){return this.seKey=e,this}toInactive(){this.bgLight.visible=!1}setText(e){return this.text.setText(e),this}}t.default=o},145:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(12),s=(n=r)&&n.__esModule?n:{default:n};class o extends Phaser.GameObjects.Container{constructor(e,t,a,{value:n=null,valueMax:r=100,color:o=s.default.COLORS.theme,blood:i=!1}={}){super(e),this.scene=e,e.add.existing(this),this.setSize(t,a),this.bg=e.add.rectangle(0,0,t,a,s.default.COLORS.dark).setOrigin(0,.5).setPosition(t/-2,0),this.add(this.bg),i&&(this.blood=e.add.rectangle(0,0,t-2,a-2,13369344).setOrigin(0,.5).setPosition(t/-2+1,0).setScale(0,1),this.add(this.blood)),this.bar=e.add.rectangle(0,0,t-2,a-2,o).setOrigin(0,.5).setPosition(t/-2+1,0),this.add(this.bar),this.valueMax=r,this.value=null===n?r:n}get value(){return this._value}set value(e){this._value=Math.min(Math.max(e,0),this.valueMax),this.bar.setScale(this.barScale,1),this.blood&&this.scene.add.tween({targets:this.blood,duration:700,ease:"Power2",scaleX:this.barScale})}get barScale(){return this.value/this.valueMax}}t.default=o},146:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(147)),r=o(a(1726)),s=o(a(193));function o(e){return e&&e.__esModule?e:{default:e}}const i={down:{frame:1,r:Math.PI/2},left:{frame:4,r:Math.PI},right:{frame:7,r:0},up:{frame:10,r:Math.PI/-2}};class l extends n.default{constructor(e,t,a,n,s){super(e,t,a,n,s),this.setTarget(null),this.setSpeed(40),this.setR("down"),this.setFaceKey(this.key),this.setTalking(!1),this.tweetBubble=new r.default(e).setDepth(21e4)}preUpdate(){super.preUpdate(),this._walkToTargetPosition(),this._calcRotation(),this._updateAnimation(),this._randomWalk(),this._collideWall(),this.tweetBubble.setPosition(this.x,this.y-60)}setDisplayName(e){return this.displayName=e,this}setFaceKey(e){return this.faceKey=e,this}setTarget(e=null,t=!1){return this.unsetFollowing(),this.target=e,this.leaveFromTarget=t,this}setTargetPosition(e=null,t=null){return this.unsetFollowing(),this._targetPositionX=e,this._targetPositionY=t,this._targetPositionResolve&&this._targetPositionResolve(),new Promise(e=>{this._targetPositionResolve=e})}unsetFollowing(){this._targetPositionX=null,this._targetPositionY=null}stopWalk(){return this.unsetFollowing(),this.body.setVelocity(0,0),this}setSpeed(e=120){return this.speed=e,this}setVelocity(e,t){this.unsetFollowing(),this.body.setVelocity(e,t),this.body.velocity.normalize().scale(this.speed)}getBalloon(){return super.getBalloon("bubble_talk")}tweet(e){return new Promise(t=>{this.tweetBubble.setText(e,t)})}get hasTarget(){return null!==this.target}get hasTargetPosition(){return null!==this._targetPositionX&&null!==this._targetPositionY}get followingTarget(){return this.hasTargetPosition||this.hasTarget}get followingX(){return this.hasTargetPosition?this._targetPositionX:this.hasTarget?this.target.x:null}get followingY(){return this.hasTargetPosition?this._targetPositionY:this.hasTarget?this.target.y:null}get diffToFollowingX(){return this.followingTarget?this.followingX-this.x:0}get diffToFollowingY(){return this.followingTarget?this.followingY-this.y:0}get diffToFollowingDistance(){return Math.hypot(this.diffToFollowingX,this.diffToFollowingY)}get walking(){return Math.hypot(this.body.velocity.x,this.body.velocity.y)>1}get movingHorizontal(){return Math.abs(this.body.velocity.x)>Math.abs(this.body.velocity.y)}_calcRotation(){this.walking&&(this.r=Math.atan2(this.body.velocity.y,this.body.velocity.x))}_walkToTargetPosition(){if(!this.followingTarget)return;if(this.hasTarget&&!this.leaveFromTarget&&(this.diffToFollowingDistance<50||this.diffToFollowingDistance>400))return;if(this.hasTarget&&this.leaveFromTarget&&this.diffToFollowingDistance>200)return;const e=this.hasTarget&&this.leaveFromTarget?-this.diffToFollowingX:this.diffToFollowingX,t=this.hasTarget&&this.leaveFromTarget?-this.diffToFollowingY:this.diffToFollowingY,a=this.body.blocked.left||this.body.blocked.right?.1*e:e,n=this.body.blocked.top||this.body.blocked.down?.1*t:t;this.body.setVelocity(a,n);const r=Math.min(this.speed,10*this.diffToFollowingDistance);this.body.velocity.normalize().scale(r),this.diffToFollowingDistance<5&&(this._targetPositionResolve&&(this._targetPositionResolve(),this._targetPositionResolve=null),this.stopWalk())}_updateAnimation(){this.walking?(this.image.anims.play(this._animName,!0),6===this.frameLength&&this.image.setScale(this.body.velocity.x<0?1:-1,1)):(3===this.frameLength&&this.image.anims.play(this._waitAnimName,!0),12===this.frameLength&&this.image.setFrame(this.angleFrame))}get frameLength(){return s.default.spritesheet.find(e=>e[0]===this.spriteKey)[2].endFrame+1}get _waitAnimName(){return this.key+"_waiting"}get _animName(){return 12===this.frameLength?`${this.key}_walk_${this.angleKey}`:this._waitAnimName}get angleKey(){const e=Math.cos(this.r),t=Math.sin(this.r);return Math.abs(e)>Math.abs(t)?e<0?"left":"right":t<0?"up":"down"}get angleFrame(){return i[this.angleKey].frame}setR(e){return this.r="string"==typeof e?i[e].r:e,this._updateAnimation(),this}setRandomWalk(e,{speed:t,range:a=50}={}){return this.randomWalk=e,this.randomWalkRange=Math.round(a/2),t&&this.setSpeed(t),this.setNextRandomWalkDelay(),this}setNextRandomWalkDelay(){this.randomWalkDelay=Math.randomInt(100,200)}setTalking(e){return this.talking=e,e&&this.stopWalk(),this}_randomWalk(){if(this.randomWalk&&!this.talking&&(this.walking&&this.body.blocked.none||this.randomWalkDelay--,this.randomWalkDelay<=0)){const e=this._tryToGetRandomPosition();e&&this.setTargetPosition(e.x,e.y),this.setNextRandomWalkDelay()}}_tryToGetRandomPosition(e=10){if(!e)return null;const t=this.x+Math.randomInt(-this.randomWalkRange,this.randomWalkRange),a=this.y+Math.randomInt(-this.randomWalkRange,this.randomWalkRange);return this.scene.map.isCollides(t.toTile,a.toTile)?this._tryToGetRandomPosition(e-1):{x:t,y:a}}_collideWall(){if(this.walking){const e=Phaser.Math.Distance.Between(this.x,this.y,this.lastX,this.lastY);e>0&&e<.15&&this.stopWalk()}this.lastX=this.x,this.lastY=this.y}die(){return new Promise(e=>{this.image.setTint(16711680),this.scene.add.tween({targets:this,duration:500,ease:"Power2",scaleX:1.3,scaleY:1.3,alpha:.2,onComplete:()=>{this.destroy(),e()}})})}}t.default=l},147:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(12),s=(n=r)&&n.__esModule?n:{default:n};class o extends Phaser.GameObjects.Container{constructor(e,t,a,n=null,{width:r,height:s}={}){super(e,t,a),this.scene=e,this.initImage(n,r,s),e.add.existing(this),e.substances.add(this),e.physics.world.enable(this),this.body.setDrag(300),this.setId(null),this.setCheckableDistance(150)}preUpdate(){this.setDepth(this.y),this.balloon&&(this.balloon.setVisible(this.checkable&&(!this.scene.touchMode||this===this.scene.nearestCheckable)),this.balloon.setPosition(this.x,this.y-this.image.height.half-32))}initImage(e,t,a){this.key=e,this.image&&this.image.destroy(),this.image=e?this.scene.add.sprite(0,0,this.spriteKey):this.scene.add.rectangle(0,0,s.default.TILE_SIZE,s.default.TILE_SIZE),this.image.setPosition(0,-this.image.height.half);const n=t||this.image.width,r=a||this.image.height;return this.setSize(n,r),e&&(this.shadow&&this.shadow.destroy(),this.shadow=this.scene.add.circle(0,r/-18,(n+r)/8,s.default.COLORS.black,.3).setScale(1,.5),this.add(this.shadow)),this.add(this.image),this}setId(e){return this.id=e,this}getBalloon(e="bubble_action"){const t=this.scene.add.container(0,0).setDepth(2e5);t.key=e;const a=this.scene.add.sprite(0,0,e);return this.scene.add.tween({targets:a,duration:400,loop:-1,yoyo:!0,y:-4}),t.add(a),t}setCheckableDistance(e){return this.checkableDistance=e,this}setTapEvent(e){return this.removeTapEvent(),this.tapEvent=e,this.tapArea=this.scene.add.rectangle(0,-this.image.height.half-15,this.image.width+20,this.image.height+50).setAlpha(.5).setInteractive(),this.add(this.tapArea),this.balloon=this.getBalloon(),this.tapArea.on("pointerdown",e=>{this.tapEvent&&(e.isDown=!1)}),this.tapArea.on("pointerup",(e,t,a,n)=>{this.distanceToPlayer>=this.checkableDistance||(n.stopPropagation(),this.execTapEvent())}),this}removeTapEvent(){this.tapArea&&this.tapArea.destroy(),this.balloon&&this.balloon.destroy(),this.tapArea=null,this.balloon=null,this.tapEvent=null}execTapEvent(){if(!this.tapEvent)return;const e=this.scene.ui;e.setEventMode(!0),this.tapEvent(this).then(()=>e.setEventMode(!1))}distanceTo(e){return Phaser.Math.Distance.Between(this.x,this.y,e.x,e.y)}angleTo(e){return Math.atan2(e.y-this.y,e.x-this.x)}get distanceToPlayer(){return this.distanceTo(this.scene.player)}get spriteKey(){return"chara_sprite/"+this.key}get checkable(){return this.balloon&&this.visible&&!this.scene.ui.eventMode&&this.distanceToPlayer<this.checkableDistance}destroy(){this.balloon&&this.balloon.destroy(),super.destroy()}}t.default=o},148:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});t.dogEventHunter=(t,a)=>{const n=t.storage.state.event.m1_1;if(n.completed&&1!==t.storage.state.chapter)return a.destroy();a.setDisplayName(e("chara.hunter")).setTapEvent(async a=>{if(n.completed)await t.talk([{chara:a,text:e("dog.solved.0")}]);else if(n.started){const r=["d1","d2","d3","d4","d5"],s=r.reduce((e,t)=>1===n[t]?(n[t]=2,!0):e,!1),o=r.filter(e=>0===n[e]).length;if(0===o)await t.talk([{chara:a,text:e("dog.solve.0")},{chara:a,text:e("dog.solve.1")},{chara:a,text:e("dog.solve.2")},{chara:"ann",text:e("dog.solve.3")},{chara:a,text:e("dog.solve.4")}]),t.ui.increaseWeapon(6),await t.talk([{chara:"ann",text:e("dog.solve.5")},{chara:a,text:e("dog.solve.6")},{chara:a,text:e("dog.solve.7")},{chara:a,text:e("dog.solve.8")},{chara:"ann",text:e("dog.solve.9")},{chara:a,text:e("dog.solve.10")},{chara:a,text:e("dog.solve.11")},{chara:a,text:e("dog.solve.12")}]),t.ui.missionUpdate("m1_1",!0);else if(s)await t.talk([{chara:a,text:e("dog.started.0")},{chara:a,text:`${e("dog.started.1",{count:o})}${e("dog.started.2")}`}]);else{const n=o<5?e("dog.started.1",{count:o}):"";await t.talk([{chara:a,text:`${n}${e("dog.started.2")}`}])}}else{const r=await t.talk(n.talked?[{chara:a,text:e("dog.start.21")},null]:[{chara:a,text:e("dog.start.0")},{chara:"ann",text:e("dog.start.1")},{chara:a,text:e("dog.start.2")},{chara:"ann",text:e("dog.start.3")},{chara:a,text:e("dog.start.4")},{chara:a,text:e("dog.start.5")},{chara:a,text:e("dog.start.6")},{chara:"ann",text:e("dog.start.7")},{chara:a,text:e("dog.start.8")},{chara:"ann",text:e("dog.start.9")},{chara:"francisca",text:e("dog.start.10")},{chara:a,text:e("dog.start.11")},{chara:a,text:e("dog.start.12")},{chara:a,text:e("dog.start.13")},{chara:a,text:e("dog.start.14")},{chara:"ann",text:e("dog.start.15")},{chara:"ann",text:e("dog.start.16")},{chara:a,text:e("dog.start.17")},{chara:a,text:e("dog.start.18")},{chara:"ann",text:e("dog.start.19")},{chara:a,text:e("dog.start.20")},{chara:a,text:e("dog.start.21")},null]),s=await t.select([e("dog.start.22.0"),e("dog.start.22.1")]);n.talked=!0,r.destroy(),await t.talk([{chara:a,text:e(0===s?"dog.start.23.0":"dog.start.23.1")}]),0===s&&t.ui.missionUpdate("m1_1")}})},t.dogEventFound=(t,a,n)=>{const r=t.storage.state.event.m1_1;if(r[n]>=1)a.destroy();else{const s={d1:{leave:!1,speed:80},d2:{leave:!0,speed:90},d3:{leave:!1,speed:90},d4:{leave:!0,speed:110},d5:{leave:!0,speed:130}};a.setTarget(t.player,s[n].leave).setSpeed(s[n].speed).setTapEvent(async()=>{if(a.setTarget(null),r.started){const s={d1:{chara:"ann",text:e("dog.dog.d1")},d2:{chara:"jaquelyn",text:e("dog.dog.d2")},d3:{chara:"francisca",text:e("dog.dog.d3")},d4:{chara:"ann",text:e("dog.dog.d4")},d5:{chara:"jaquelyn",text:e("dog.dog.d5")}};await t.talk([s[n]]),r[n]=1,a.destroy();const o=Object.keys(s).count(e=>0===r[e]);o?Math.chance(50)?t.jaquelyn.tweet(e("dog.dog.jaquelyn",o)):t.francisca.tweet(e("dog.dog.francisca",o)):t.jaquelyn.tweet(e("dog.dog.foundAll"))}else await t.talk([{chara:"ann",text:e("dog.dog.notStarted")}])})}}}).call(this,a(3).default)},149:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.rexBear=t.drystan=t.MANDRAKE_COUNT=void 0;var n,r=a(52),s=(n=r)&&n.__esModule?n:{default:n};const o=t.MANDRAKE_COUNT=5;t.drystan=(t,a,n)=>{const r=t.storage.state.event.m1_3,s=t.storage.state.event.m1_4;return t.storage.state.event.m1_2.completed?(a.destroy(),s.completed?n.destroy():void n.setDisplayName(e("chara.drystan")).setTapEvent(async a=>{const i=r.count>=o;r.started?r.completed||i?!r.completed&&i?(await t.talk([{chara:"ann",text:e("drystan.solve.0")},{chara:a,text:e("drystan.solve.1")},{chara:a,text:e("drystan.solve.2")}]),t.ui.missionUpdate("m1_3",!0),await t.talk([{chara:"ann",text:e("bear.start.0")},{chara:a,text:e("bear.start.1")},{chara:a,text:e("bear.start.2")},{chara:a,text:e("bear.start.3")},{chara:"ann",text:e("bear.start.4")},{chara:a,text:e("bear.start.5")},{chara:a,text:e("bear.start.6")},{chara:a,text:e("bear.start.7")},{chara:"ann",text:e("bear.start.8")},{chara:"ann",text:e("bear.start.9")}]),t.ui.missionUpdate("m1_4")):s.solved?(await t.talk([{chara:"ann",text:e("bear.solve.0")},{chara:a,text:e("bear.solve.1")}]),await t.ui.sleep(1e3),await t.talk([{chara:a,text:e("bear.solve.2")},{chara:a,text:e("bear.solve.3")},{chara:"ann",text:e("bear.solve.4")},{chara:a,text:e("bear.solve.5")},{chara:a,text:e("bear.solve.6")},{chara:"ann",text:e("bear.solve.7")},{chara:a,text:e("bear.solve.8")},{chara:a,text:e("bear.solve.9")},{chara:"ann",text:e("bear.solve.10")},{chara:a,text:e("bear.solve.11")},{chara:a,text:e("bear.solve.12")},{chara:a,text:e("bear.solve.13")},{chara:a,text:e("bear.solve.14")},{chara:"ann",text:e("bear.solve.15")},{chara:"ann",text:e("bear.solve.16")},{chara:a,text:e("bear.solve.17")},{chara:a,text:e("bear.solve.18")},{chara:"ann",text:e("bear.solve.19")},{chara:a,text:e("bear.solve.20")},{chara:a,text:e("bear.solve.21")},{chara:"ann",text:e("bear.solve.22")},{chara:a,text:e("bear.solve.23")},{chara:a,text:e("bear.solve.24")},{chara:a,text:e("bear.solve.25")},{chara:"ann",text:e("bear.solve.26")},{chara:a,text:e("bear.solve.27")},{chara:"ann",text:e("bear.solve.28")},{chara:a,text:e("bear.solve.29")},{chara:"ann",text:e("bear.solve.30")},{chara:a,text:e("bear.solve.31")},{chara:a,text:e("bear.solve.32")},{chara:a,text:e("bear.solve.33")},{chara:a,text:e("bear.solve.34")}]),await t.ui.transition("slow"),n.destroy(),t.player.setR("down"),await t.ui.sleep(1e3),t.ui.missionUpdate("m1_4",!0),await t.talk([{chara:"ann",text:e("bear.end.0")},{chara:"jaquelyn",text:e("bear.end.1")},{chara:"francisca",text:e("bear.end.2")},{chara:"francisca",text:e("bear.end.3")}]),await t.ui.sleep(1e3),t.storage.state.chapter=2,await t.mapChange("room1",19..toPixelCenter,11..toPixel,{speed:"slow"})):await t.talk([{chara:a,text:e("bear.progress")}]):await t.talk([{chara:a,text:e("drystan.progress.0",{MANDRAKE_COUNT:o})},{chara:a,text:e("drystan.progress.1")}]):(await t.talk([{chara:"ann",text:e("drystan.start.0")},{chara:a,text:e("drystan.start.1")},{chara:"ann",text:e("drystan.start.2")},{chara:a,text:e("drystan.start.3")},{chara:"ann",text:e("drystan.start.4")},{chara:a,text:e("drystan.start.5")},{chara:a,text:e("drystan.start.6")},{chara:a,text:e("drystan.start.7")},{chara:"ann",text:e("drystan.start.8")},{chara:a,text:e("drystan.start.9")},{chara:a,text:e("drystan.start.10")},{chara:a,text:e("drystan.start.11",{MANDRAKE_COUNT:o})},{chara:"ann",text:e("drystan.start.12")},{chara:a,text:e("drystan.start.13")},{chara:a,text:e("drystan.start.14")}]),t.ui.missionUpdate("m1_3"))})):(n.destroy(),void a.setTapEvent(async()=>{await t.talk([{chara:"ann",text:e("drystan.door")}])}))},t.rexBear=(t,a,n)=>{const r=t.storage.state.event.m1_4;if(!r.started||r.solved)return a.destroy(),void n.destroy();r.area||t.ui.autoEvent(async()=>{await t.ui.sleep(1e3),await t.talk([{chara:"ann",text:e("bear.bearArea.0")},{chara:"francisca",text:e("bear.bearArea.1")}]),r.area=!0}),a.setEvent(async()=>{await t.talk([{chara:"ann",text:e("bear.bear.0")}]),t.francisca.setAllowWalkingWhileEvent(!0),t.jaquelyn.setAllowWalkingWhileEvent(!0),await t.player.setTargetPosition(795,490),await t.player.setR("up"),await t.ui.sleep(500),a.setEvent(null),t.player.stopWalk(),await t.ui.sleep(500),await t.talk([{chara:"ann",text:e("bear.bear.1")}]),await t.ui.sleep(500);await t.ui.battle([(0,s.default)("bear",11,{hp:600})],{boss:!0,bgm:"battle3"})&&(window.archiveManager.activate("rex_bear"),a.destroy(),await n.die(),await t.ui.sleep(500),await t.talk([{chara:"francisca",text:e("bear.bear.2")}]),await t.ui.sleep(500),await t.ui.transition("slow"),await t.ui.sleep(500),await t.talk([{chara:"ann",text:e("bear.bear.3")}]),r.solved=!0)})}}).call(this,a(3).default)},150:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.doorEvent=t.princess=t.MAGIC_STONES=void 0;var n,r=a(747),s=(n=r)&&n.__esModule?n:{default:n};const o=t.MAGIC_STONES=5;t.princess=(t,a,n)=>{const r=t.storage.state.event.m2_2;if(t.storage.state.event.m2_4.started)return a.destroy(),void n.destroy();const s=async()=>{if(r.completed)await t.talk([{chara:a,text:e("princess.solved.0")},{chara:n,text:e("princess.solved.1")}]);else if(r.count>=o)await t.talk([{chara:a,text:e("princess.solve.0")},{chara:n,text:e("princess.solve.1")},{chara:a,text:e("princess.solve.2")},{chara:"ann",text:e("princess.solve.3")},{chara:"ann",text:e("princess.solve.4")},{chara:"ann",text:e("princess.solve.5")},{chara:a,text:e("princess.solve.6")},{chara:a,text:e("princess.solve.7")}]),r.completed=!0,t.ui.missionUpdate("m2_2",!0).then(()=>{t.ui.increaseWeapon(8)});else if(r.started)await t.talk([{chara:a,text:e("princess.progress.0",{MAGIC_STONES:o})},{chara:n,text:e("princess.progress.1")}]);else{await t.talk([{chara:n,text:e("princess.talk1.0")},{chara:a,text:e("princess.talk1.1")},{chara:n,text:e("princess.talk1.2")},{chara:"ann",text:e("princess.talk1.3")},{chara:"ann",text:e("princess.talk1.4")},{chara:"ann",text:e("princess.talk1.5")},{chara:n,text:e("princess.talk1.6")},{chara:n,text:e("princess.talk1.7")},{chara:"ann",text:e("princess.talk1.8")},{chara:n,text:e("princess.talk1.9")},{chara:n,text:e("princess.talk1.10")},{chara:"ann",text:e("princess.talk1.11")},{chara:a,text:e("princess.talk1.12")},{chara:a,text:e("princess.talk1.13")},{chara:"ann",text:e("princess.talk1.14")},{chara:"ann",text:e("princess.talk1.15")},{chara:n,text:e("princess.talk1.16")},{chara:n,text:e("princess.talk1.17")},{chara:n,text:e("princess.talk1.18")},{chara:a,text:e("princess.talk1.19")},{chara:a,text:e("princess.talk1.20")},{chara:a,text:e("princess.talk1.21")},{chara:n,text:e("princess.talk1.22")},{chara:a,text:e("princess.talk1.23")},{chara:"ann",text:e("princess.talk1.24")},{chara:"ann",text:e("princess.talk1.25")},{chara:"ann",text:e("princess.talk1.26")},{chara:a,text:e("princess.talk1.27")},{chara:n,text:e("princess.talk1.28")},{chara:n,text:e("princess.talk1.29")},{chara:"ann",text:e("princess.talk1.30")},{chara:a,text:e("princess.talk1.31")},{chara:"ann",text:e("princess.talk1.32")},{chara:a,text:e("princess.talk1.33")},{chara:a,text:e("princess.talk1.34")},{chara:"ann",text:e("princess.talk1.35")},{chara:a,text:e("princess.talk1.36")},{chara:"ann",text:e("princess.talk1.37")},{chara:a,text:e("princess.talk1.38")},{chara:"ann",text:e("princess.talk1.39")},{chara:"ann",text:e("princess.talk1.40")},{chara:a,text:e("princess.talk1.41")},{chara:"ann",text:e("princess.talk1.42")},{chara:a,text:e("princess.talk1.43")},{chara:n,text:e("princess.talk1.44")},{chara:a,text:e("princess.talk1.45")},{chara:n,text:e("princess.talk1.46")},{chara:n,text:e("princess.talk1.47")},{chara:"ann",text:e("princess.talk1.48")},{chara:"ann",text:e("princess.talk1.49")},{chara:a,text:e("princess.talk1.50")},{chara:a,text:e("princess.talk1.51")},{chara:a,text:e("princess.talk1.52")},{chara:a,text:e("princess.talk1.53")},{chara:a,text:e("princess.talk1.54")},{chara:a,text:e("princess.talk1.55")},{chara:a,text:e("princess.talk1.56")},{chara:a,text:e("princess.talk1.57")},{chara:a,text:e("princess.talk1.58")},{chara:a,text:e("princess.talk1.59")},{chara:a,text:e("princess.talk1.60")},{chara:"ann",text:e("princess.talk1.61")},{chara:a,text:e("princess.talk1.62")},{chara:a,text:e("princess.talk1.63")},{chara:a,text:e("princess.talk1.64")},{chara:a,text:e("princess.talk1.65")},{chara:a,text:e("princess.talk1.66")},{chara:"ann",text:e("princess.talk1.67")},{chara:n,text:e("princess.talk1.68")},{chara:"ann",text:e("princess.talk1.69")},{chara:a,text:e("princess.talk1.70")},{chara:"ann",text:e("princess.talk1.71")},{chara:n,text:e("princess.talk1.72")},{chara:a,text:e("princess.talk1.73")},{chara:a,text:e("princess.talk1.74")},{chara:n,text:e("princess.talk1.75")},{chara:a,text:e("princess.talk1.76")},{chara:"ann",text:e("princess.talk1.77")},{chara:a,text:e("princess.talk1.78",{MAGIC_STONES:o})},{chara:n,text:e("princess.talk1.79")},{chara:n,text:e("princess.talk1.80")}]);const s=await t.select([e("princess.talk1.81.0"),e("princess.talk1.81.1")]);await t.talk([...0===s?[{chara:a,text:e("princess.talk1.82")}]:[{chara:n,text:e("princess.talk1.83")}],{chara:n,text:e("princess.talk1.84")}]),r.started=!0,t.ui.missionUpdate("m2_2")}};a.setDisplayName(e("chara.mary")).setTapEvent(s),n.setDisplayName(e("chara.loretta")).setTapEvent(s)},t.doorEvent=(t,a)=>{const n=t.storage.state.event,r=new s.default("loretta",e("chara.loretta"),a);a.setTapEvent(async()=>{n.m2_2.started&&n.m2_2.count<o?await t.talk([{chara:r,text:e("princess.door.0")},{chara:r,text:e("princess.door.1")}]):n.m2_2.completed&&!n.m2_4.started?await t.talk([{chara:r,text:e("princess.door.2")},{chara:r,text:e("princess.door.3")}]):t.mapChange("underpass4",16..toPixel,16..toPixelCenter,{r:"up"})})}}).call(this,a(3).default)},1678:function(e,t,a){"use strict";var n,r=a(12),s=(n=r)&&n.__esModule?n:{default:n};Object.defineProperty(Number.prototype,"half",{get(){return this/2}}),Object.defineProperty(Number.prototype,"toTile",{get(){return Math.floor(this/s.default.TILE_SIZE)}}),Object.defineProperty(Number.prototype,"toPixel",{get(){return this*s.default.TILE_SIZE}}),Object.defineProperty(Number.prototype,"toPixelCenter",{get(){return this*s.default.TILE_SIZE+s.default.TILE_SIZE.half}}),Object.defineProperty(Number.prototype,"toArray",{value(){return[...Array(this).keys()]}}),Object.defineProperty(Number.prototype,"toColorString",{get(){return"#"+this.toString(16)}}),Object.defineProperty(Number.prototype,"byRight",{get(){return s.default.WIDTH-this}}),Object.defineProperty(Number.prototype,"byBottom",{get(){return s.default.HEIGHT-this}}),Object.defineProperty(String.prototype,"width",{get(){return[...Array(this.valueOf().length).keys()].map(e=>{const t=this.charCodeAt(e);return t>=0&&t<129||63728===t||t>=65377&&t<65440||t>=63729&&t<63732?1:2}).reduce((e,t)=>e+t,0)}}),Object.defineProperty(String.prototype,"toColorInt",{get(){return parseInt(this.slice(1),16)}}),Object.defineProperty(String.prototype,"upperCase",{get(){return this.replace(/^[a-z]/g,e=>e.toUpperCase())}}),Object.defineProperty(Array.prototype,"random",{value(){return this[Math.randomInt(0,this.length-1)]}}),Object.defineProperty(Array.prototype,"count",{value(e){return this.filter(e).length}}),Math.sum=(...e)=>e.reduce((e,t)=>e+t),Math.average=(...e)=>Math.sum(...e)/e.length,Math.fix=(e,t,a)=>Math.min(Math.max(e,t),a),Math.randomInt=(e,t)=>Math.floor(Math.random()*(t+1-e))+e,Math.chance=e=>e/100>Math.random(),Object.isObject=e=>Boolean(e&&e.constructor===Object),Array.range=(e,t)=>(t-e+1).toArray().map(t=>t+e)},1679:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(a(1680)),r=i(a(1682)),s=i(a(1687)),o=i(a(12));function i(e){return e&&e.__esModule?e:{default:e}}class l extends Phaser.Scene{constructor(){super({key:"Boot",active:!0})}create(){Phaser.BlendModes.OVERLAY=this.sys.game.renderer.addBlendMode([WebGLRenderingContext.SRC_ALPHA,WebGLRenderingContext.ONE],WebGLRenderingContext.FUNC_ADD),(0,s.default)(this),(0,r.default)(this),this.scene.start("UI"),this.scene.start("Title")}preload(){const e=this.add.rectangle(o.default.WIDTH.half-100,o.default.HEIGHT.half,200,2,o.default.COLORS.ghost).setOrigin(0),t=this.add.rectangle(o.default.WIDTH.half-100,o.default.HEIGHT.half,200,2,o.default.COLORS.theme).setOrigin(0).setScale(0,1),a=this.add.text(o.default.WIDTH.half,o.default.HEIGHT.half-15,"",{align:"center",fill:o.default.COLORS.gray.toColorString,fontSize:13,fontFamily:o.default.FONTS.UI}).setOrigin(.5);this.load.on("progress",e=>{t.scaleX=Math.max(e,t.scaleX),a.text=`Loading ${Math.round(100*e)}%`}),this.load.on("complete",()=>{e.destroy(),t.destroy(),a.destroy()}),(0,n.default)(this)}}t.default=l},1680:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(193),s=(n=r)&&n.__esModule?n:{default:n};t.default=e=>Object.keys(s.default).forEach(t=>s.default[t].forEach(a=>e.load[t](...a)))},1681:function(e){e.exports=JSON.parse('{"image":[["alert","./img/alert.png"],["ann","./img/ann.png"],["arrow","./img/arrow.png"],["bubble_action","./img/bubble_action.png"],["bubble_talk","./img/bubble_talk.png"],["click","./img/click.png"],["counter_tx","./img/counter_tx.png"],["critical_bg","./img/critical_bg.png"],["critical_tx","./img/critical_tx.png"],["cutin_ann","./img/cutin_ann.png"],["cutin_francisca","./img/cutin_francisca.png"],["cutin_jaquelyn","./img/cutin_jaquelyn.png"],["dark","./img/dark.png"],["dashedline","./img/dashedline.png"],["emblem","./img/emblem.png"],["encounter1","./img/encounter1.png"],["encounter2","./img/encounter2.png"],["fadeout","./img/fadeout.png"],["focus","./img/focus.png"],["frame","./img/frame.png"],["francisca","./img/francisca.png"],["fullscreen","./img/fullscreen.png"],["icon","./img/icon.png"],["jaquelyn","./img/jaquelyn.png"],["lamp","./img/lamp.png"],["light","./img/light.png"],["logo","./img/logo.png"],["logo_laineus","./img/logo_laineus.png"],["logo_mafu","./img/logo_mafu.png"],["magic_lamp","./img/magic_lamp.png"],["marker","./img/marker.png"],["rectangle","./img/rectangle.png"],["sun_light","./img/sun_light.png"],["taptostart","./img/taptostart.png"],["title","./img/title.png"],["title_blur","./img/title_blur.png"],["title_logo","./img/title_logo.png"],["world","./img/world.png"],["world_cursor","./img/world_cursor.png"],["map_image/castle1","./img/map_images/castle1.png"],["map_image/catacomb1","./img/map_images/catacomb1.png"],["map_image/catacomb10","./img/map_images/catacomb10.png"],["map_image/catacomb11","./img/map_images/catacomb11.png"],["map_image/catacomb2","./img/map_images/catacomb2.png"],["map_image/catacomb3","./img/map_images/catacomb3.png"],["map_image/catacomb4","./img/map_images/catacomb4.png"],["map_image/catacomb5","./img/map_images/catacomb5.png"],["map_image/catacomb6","./img/map_images/catacomb6.png"],["map_image/catacomb7","./img/map_images/catacomb7.png"],["map_image/catacomb8","./img/map_images/catacomb8.png"],["map_image/catacomb9","./img/map_images/catacomb9.png"],["map_image/forest1","./img/map_images/forest1.png"],["map_image/forest2","./img/map_images/forest2.png"],["map_image/forest3","./img/map_images/forest3.png"],["map_image/forest4","./img/map_images/forest4.png"],["map_image/forest5","./img/map_images/forest5.png"],["map_image/forest6","./img/map_images/forest6.png"],["map_image/forest7","./img/map_images/forest7.png"],["map_image/forest8","./img/map_images/forest8.png"],["map_image/forest9","./img/map_images/forest9.png"],["map_image/room1","./img/map_images/room1.png"],["map_image/temple1","./img/map_images/temple1.png"],["map_image/temple10","./img/map_images/temple10.png"],["map_image/temple11","./img/map_images/temple11.png"],["map_image/temple12","./img/map_images/temple12.png"],["map_image/temple13","./img/map_images/temple13.png"],["map_image/temple14","./img/map_images/temple14.png"],["map_image/temple15","./img/map_images/temple15.png"],["map_image/temple2","./img/map_images/temple2.png"],["map_image/temple3","./img/map_images/temple3.png"],["map_image/temple4","./img/map_images/temple4.png"],["map_image/temple5","./img/map_images/temple5.png"],["map_image/temple6","./img/map_images/temple6.png"],["map_image/temple7","./img/map_images/temple7.png"],["map_image/temple8","./img/map_images/temple8.png"],["map_image/temple9","./img/map_images/temple9.png"],["map_image/town1","./img/map_images/town1.png"],["map_image/underpass1","./img/map_images/underpass1.png"],["map_image/underpass10","./img/map_images/underpass10.png"],["map_image/underpass2","./img/map_images/underpass2.png"],["map_image/underpass3","./img/map_images/underpass3.png"],["map_image/underpass4","./img/map_images/underpass4.png"],["map_image/underpass5","./img/map_images/underpass5.png"],["map_image/underpass6","./img/map_images/underpass6.png"],["map_image/underpass7","./img/map_images/underpass7.png"],["map_image/underpass8","./img/map_images/underpass8.png"],["map_image/underpass9","./img/map_images/underpass9.png"],["face/amber","./img/faces/amber.png"],["face/ann","./img/faces/ann.png"],["face/annabelle","./img/faces/annabelle.png"],["face/architect","./img/faces/architect.png"],["face/cassandra","./img/faces/cassandra.png"],["face/dario","./img/faces/dario.png"],["face/dionysus","./img/faces/dionysus.png"],["face/dragon","./img/faces/dragon.png"],["face/drystan","./img/faces/drystan.png"],["face/elliott","./img/faces/elliott.png"],["face/ferdinand","./img/faces/ferdinand.png"],["face/francisca","./img/faces/francisca.png"],["face/hector","./img/faces/hector.png"],["face/hunter","./img/faces/hunter.png"],["face/injured_mercenary","./img/faces/injured_mercenary.png"],["face/injured_mercenary2","./img/faces/injured_mercenary2.png"],["face/jack","./img/faces/jack.png"],["face/jack2","./img/faces/jack2.png"],["face/jaquelyn","./img/faces/jaquelyn.png"],["face/king","./img/faces/king.png"],["face/kingbrother","./img/faces/kingbrother.png"],["face/kingbrother2","./img/faces/kingbrother2.png"],["face/kingbrother3","./img/faces/kingbrother3.png"],["face/loretta","./img/faces/loretta.png"],["face/mary","./img/faces/mary.png"],["face/matilda","./img/faces/matilda.png"],["face/max","./img/faces/max.png"],["face/mercenary","./img/faces/mercenary.png"],["face/nikke","./img/faces/nikke.png"],["face/poets","./img/faces/poets.png"],["face/queen","./img/faces/queen.png"],["face/ray","./img/faces/ray.png"],["face/sister","./img/faces/sister.png"],["face/soldier","./img/faces/soldier.png"],["face/zi","./img/faces/zi.png"],["enemy/aragnie","./img/enemies/aragnie.png"],["enemy/bear","./img/enemies/bear.png"],["enemy/bee","./img/enemies/bee.png"],["enemy/bee2","./img/enemies/bee2.png"],["enemy/bird","./img/enemies/bird.png"],["enemy/carbuncle","./img/enemies/carbuncle.png"],["enemy/dragon","./img/enemies/dragon.png"],["enemy/dullahan","./img/enemies/dullahan.png"],["enemy/flower","./img/enemies/flower.png"],["enemy/gargoyle","./img/enemies/gargoyle.png"],["enemy/ghost","./img/enemies/ghost.png"],["enemy/goblin","./img/enemies/goblin.png"],["enemy/goblin2","./img/enemies/goblin2.png"],["enemy/jack","./img/enemies/jack.png"],["enemy/knight","./img/enemies/knight.png"],["enemy/lizard","./img/enemies/lizard.png"],["enemy/mandrake","./img/enemies/mandrake.png"],["enemy/nikke","./img/enemies/nikke.png"],["enemy/orthrus","./img/enemies/orthrus.png"],["enemy/phantom","./img/enemies/phantom.png"],["enemy/queen","./img/enemies/queen.png"],["enemy/skull","./img/enemies/skull.png"],["enemy/slime","./img/enemies/slime.png"],["enemy/spectre","./img/enemies/spectre.png"],["enemy/succubus","./img/enemies/succubus.png"],["enemy/thief","./img/enemies/thief.png"],["enemy/tree","./img/enemies/tree.png"],["enemy/wolf","./img/enemies/wolf.png"],["enemy/wraith","./img/enemies/wraith.png"],["icon/w1","./img/icons/w1.png"],["icon/w10","./img/icons/w10.png"],["icon/w11","./img/icons/w11.png"],["icon/w2","./img/icons/w2.png"],["icon/w3","./img/icons/w3.png"],["icon/w4","./img/icons/w4.png"],["icon/w5","./img/icons/w5.png"],["icon/w6","./img/icons/w6.png"],["icon/w7","./img/icons/w7.png"],["icon/w8","./img/icons/w8.png"],["icon/w9","./img/icons/w9.png"],["tileset/catacomb","./img/tilesets/extruded/catacomb.png"],["tileset/forest","./img/tilesets/extruded/forest.png"],["tileset/room","./img/tilesets/extruded/room.png"],["tileset/temple","./img/tilesets/extruded/temple.png"],["tileset/town","./img/tilesets/extruded/town.png"],["tileset/underpass","./img/tilesets/extruded/underpass.png"],["tileset/aragnie_jail","./img/tilesets/image/aragnie_jail.png"],["tileset/aragnie_yarn","./img/tilesets/image/aragnie_yarn.png"],["tileset/barrel","./img/tilesets/image/barrel.png"],["tileset/catacombe_img","./img/tilesets/image/catacombe_img.png"],["tileset/catacombe_tile","./img/tilesets/image/catacombe_tile.png"],["tileset/sunbeams","./img/tilesets/image/sunbeams.png"],["tileset/temple","./img/tilesets/image/temple.png"],["tileset/temple_cloud1","./img/tilesets/image/temple_cloud1.png"],["tileset/temple_cloud2","./img/tilesets/image/temple_cloud2.png"],["tileset/temple_fog","./img/tilesets/image/temple_fog.png"],["tileset/temple_light","./img/tilesets/image/temple_light.png"],["tileset/temple_megami","./img/tilesets/image/temple_megami.png"],["tileset/temple_megami2","./img/tilesets/image/temple_megami2.png"],["tileset/temple_megami3","./img/tilesets/image/temple_megami3.png"],["tileset/temple_megami_mini","./img/tilesets/image/temple_megami_mini.png"],["tileset/temple_terrace","./img/tilesets/image/temple_terrace.png"],["tileset/temple_terrace_bar","./img/tilesets/image/temple_terrace_bar.png"],["tileset/temple_terrace_bg","./img/tilesets/image/temple_terrace_bg.png"],["tileset/town_pole","./img/tilesets/image/town_pole.png"],["tileset/tree_house","./img/tilesets/image/tree_house.png"],["tileset/tree_house_top","./img/tilesets/image/tree_house_top.png"],["tileset/underpass_door","./img/tilesets/image/underpass_door.png"],["tileset/underpass_img1","./img/tilesets/image/underpass_img1.png"],["tileset/underpass_img2","./img/tilesets/image/underpass_img2.png"]],"audio":[["se/announce","./audio/se/announce.wav"],["se/attack","./audio/se/attack.wav"],["se/cancel","./audio/se/cancel.wav"],["se/click","./audio/se/click.wav"],["se/die","./audio/se/die.wav"],["se/die_boss","./audio/se/die_boss.wav"],["se/heal","./audio/se/heal.wav"],["se/hit","./audio/se/hit.wav"],["se/lvup","./audio/se/lvup.wav"],["se/result","./audio/se/result.wav"],["se/talk","./audio/se/talk.wav"],["se/unbox","./audio/se/unbox.wav"],["bgm/battle1",["./audio/bgm/battle1.m4a","./audio/bgm/battle1.ogg"]],["bgm/battle2",["./audio/bgm/battle2.m4a","./audio/bgm/battle2.ogg"]],["bgm/battle3",["./audio/bgm/battle3.m4a","./audio/bgm/battle3.ogg"]],["bgm/catacomb",["./audio/bgm/catacomb.m4a","./audio/bgm/catacomb.ogg"]],["bgm/forest",["./audio/bgm/forest.m4a","./audio/bgm/forest.ogg"]],["bgm/rain",["./audio/bgm/rain.m4a","./audio/bgm/rain.ogg"]],["bgm/storytelling",["./audio/bgm/storytelling.m4a","./audio/bgm/storytelling.ogg"]],["bgm/temple",["./audio/bgm/temple.m4a","./audio/bgm/temple.ogg"]],["bgm/theme",["./audio/bgm/theme.m4a","./audio/bgm/theme.ogg"]],["bgm/town",["./audio/bgm/town.m4a","./audio/bgm/town.ogg"]],["bgm/underpass",["./audio/bgm/underpass.m4a","./audio/bgm/underpass.ogg"]],["bgm/under_temple",["./audio/bgm/under_temple.m4a","./audio/bgm/under_temple.ogg"]],["bgm/wind",["./audio/bgm/wind.m4a","./audio/bgm/wind.ogg"]]],"json":[["catacomb","./map/catacomb.json"],["forest","./map/forest.json"],["room","./map/room.json"],["temple","./map/temple.json"],["TEST","./map/TEST.json"],["town","./map/town.json"],["underpass","./map/underpass.json"]],"tilemapTiledJSON":[["castle1","./map/castle1.json"],["catacomb1","./map/catacomb1.json"],["catacomb10","./map/catacomb10.json"],["catacomb11","./map/catacomb11.json"],["catacomb2","./map/catacomb2.json"],["catacomb3","./map/catacomb3.json"],["catacomb4","./map/catacomb4.json"],["catacomb5","./map/catacomb5.json"],["catacomb6","./map/catacomb6.json"],["catacomb7","./map/catacomb7.json"],["catacomb8","./map/catacomb8.json"],["catacomb9","./map/catacomb9.json"],["forest1","./map/forest1.json"],["forest2","./map/forest2.json"],["forest3","./map/forest3.json"],["forest4","./map/forest4.json"],["forest5","./map/forest5.json"],["forest6","./map/forest6.json"],["forest7","./map/forest7.json"],["forest8","./map/forest8.json"],["forest9","./map/forest9.json"],["room1","./map/room1.json"],["temple1","./map/temple1.json"],["temple10","./map/temple10.json"],["temple11","./map/temple11.json"],["temple12","./map/temple12.json"],["temple13","./map/temple13.json"],["temple14","./map/temple14.json"],["temple15","./map/temple15.json"],["temple2","./map/temple2.json"],["temple3","./map/temple3.json"],["temple4","./map/temple4.json"],["temple5","./map/temple5.json"],["temple6","./map/temple6.json"],["temple7","./map/temple7.json"],["temple8","./map/temple8.json"],["temple9","./map/temple9.json"],["town1","./map/town1.json"],["underpass1","./map/underpass1.json"],["underpass10","./map/underpass10.json"],["underpass2","./map/underpass2.json"],["underpass3","./map/underpass3.json"],["underpass4","./map/underpass4.json"],["underpass5","./map/underpass5.json"],["underpass6","./map/underpass6.json"],["underpass7","./map/underpass7.json"],["underpass8","./map/underpass8.json"],["underpass9","./map/underpass9.json"]],"spritesheet":[["battle_effects","./img/battle_effects.png",{"frameWidth":320,"frameHeight":320,"startFrame":0,"endFrame":5}],["check","./img/check.png",{"frameWidth":14,"frameHeight":13,"startFrame":0,"endFrame":1}],["menu_icons","./img/menu_icons.png",{"frameWidth":72,"frameHeight":72,"startFrame":0,"endFrame":3}],["virtual_button","./img/virtual_button.png",{"frameWidth":100,"frameHeight":100,"startFrame":0,"endFrame":1}],["weapon_abilities","./img/weapon_abilities.png",{"frameWidth":18,"frameHeight":18,"startFrame":0,"endFrame":2}],["world_pin","./img/world_pin.png",{"frameWidth":32,"frameHeight":32,"startFrame":0,"endFrame":1}],["chara_sprite/amber","./img/chara_sprites/amber.png",{"frameWidth":28,"frameHeight":39,"startFrame":0,"endFrame":11}],["chara_sprite/annabelle","./img/chara_sprites/annabelle.png",{"frameWidth":28,"frameHeight":41,"startFrame":0,"endFrame":11}],["chara_sprite/apple","./img/chara_sprites/apple.png",{"frameWidth":32,"frameHeight":32,"startFrame":0,"endFrame":1}],["chara_sprite/aragnie","./img/chara_sprites/aragnie.png",{"frameWidth":240,"frameHeight":192,"startFrame":0,"endFrame":2}],["chara_sprite/architect","./img/chara_sprites/architect.png",{"frameWidth":26,"frameHeight":39,"startFrame":0,"endFrame":11}],["chara_sprite/bear","./img/chara_sprites/bear.png",{"frameWidth":56,"frameHeight":84,"startFrame":0,"endFrame":2}],["chara_sprite/cassandra","./img/chara_sprites/cassandra.png",{"frameWidth":28,"frameHeight":40,"startFrame":0,"endFrame":0}],["chara_sprite/crystal","./img/chara_sprites/crystal.png",{"frameWidth":52,"frameHeight":68,"startFrame":0,"endFrame":2}],["chara_sprite/dario","./img/chara_sprites/dario.png",{"frameWidth":26,"frameHeight":39,"startFrame":0,"endFrame":11}],["chara_sprite/dionysus","./img/chara_sprites/dionysus.png",{"frameWidth":28,"frameHeight":40,"startFrame":0,"endFrame":11}],["chara_sprite/dog","./img/chara_sprites/dog.png",{"frameWidth":26,"frameHeight":26,"startFrame":0,"endFrame":11}],["chara_sprite/dragon","./img/chara_sprites/dragon.png",{"frameWidth":325,"frameHeight":257,"startFrame":0,"endFrame":0}],["chara_sprite/drystan","./img/chara_sprites/drystan.png",{"frameWidth":28,"frameHeight":44,"startFrame":0,"endFrame":1}],["chara_sprite/elliott","./img/chara_sprites/elliott.png",{"frameWidth":26,"frameHeight":39,"startFrame":0,"endFrame":11}],["chara_sprite/ferdinand","./img/chara_sprites/ferdinand.png",{"frameWidth":28,"frameHeight":39,"startFrame":0,"endFrame":11}],["chara_sprite/ferdinand_dragged","./img/chara_sprites/ferdinand_dragged.png",{"frameWidth":48,"frameHeight":32,"startFrame":0,"endFrame":2}],["chara_sprite/flower","./img/chara_sprites/flower.png",{"frameWidth":43,"frameHeight":49,"startFrame":0,"endFrame":0}],["chara_sprite/francisca","./img/chara_sprites/francisca.png",{"frameWidth":28,"frameHeight":39,"startFrame":0,"endFrame":11}],["chara_sprite/hector","./img/chara_sprites/hector.png",{"frameWidth":28,"frameHeight":39,"startFrame":0,"endFrame":11}],["chara_sprite/hector_injured","./img/chara_sprites/hector_injured.png",{"frameWidth":39,"frameHeight":27,"startFrame":0,"endFrame":0}],["chara_sprite/hunter","./img/chara_sprites/hunter.png",{"frameWidth":28,"frameHeight":39,"startFrame":0,"endFrame":11}],["chara_sprite/injured_mercenary","./img/chara_sprites/injured_mercenary.png",{"frameWidth":27,"frameHeight":37,"startFrame":0,"endFrame":0}],["chara_sprite/injured_mercenary2","./img/chara_sprites/injured_mercenary2.png",{"frameWidth":27,"frameHeight":32,"startFrame":0,"endFrame":0}],["chara_sprite/injured_soldier1","./img/chara_sprites/injured_soldier1.png",{"frameWidth":28,"frameHeight":39,"startFrame":0,"endFrame":0}],["chara_sprite/injured_soldier2","./img/chara_sprites/injured_soldier2.png",{"frameWidth":28,"frameHeight":39,"startFrame":0,"endFrame":0}],["chara_sprite/injured_soldier3","./img/chara_sprites/injured_soldier3.png",{"frameWidth":28,"frameHeight":39,"startFrame":0,"endFrame":0}],["chara_sprite/injured_soldier4","./img/chara_sprites/injured_soldier4.png",{"frameWidth":28,"frameHeight":39,"startFrame":0,"endFrame":0}],["chara_sprite/injured_soldier5","./img/chara_sprites/injured_soldier5.png",{"frameWidth":28,"frameHeight":39,"startFrame":0,"endFrame":0}],["chara_sprite/injured_soldier6","./img/chara_sprites/injured_soldier6.png",{"frameWidth":28,"frameHeight":39,"startFrame":0,"endFrame":0}],["chara_sprite/jack","./img/chara_sprites/jack.png",{"frameWidth":26,"frameHeight":39,"startFrame":0,"endFrame":11}],["chara_sprite/jack2","./img/chara_sprites/jack2.png",{"frameWidth":27,"frameHeight":40,"startFrame":0,"endFrame":0}],["chara_sprite/jaquelyn","./img/chara_sprites/jaquelyn.png",{"frameWidth":26,"frameHeight":40,"startFrame":0,"endFrame":11}],["chara_sprite/king","./img/chara_sprites/king.png",{"frameWidth":27,"frameHeight":40,"startFrame":0,"endFrame":11}],["chara_sprite/king2","./img/chara_sprites/king2.png",{"frameWidth":27,"frameHeight":40,"startFrame":0,"endFrame":0}],["chara_sprite/kingbrother","./img/chara_sprites/kingbrother.png",{"frameWidth":27,"frameHeight":40,"startFrame":0,"endFrame":11}],["chara_sprite/kingbrother2","./img/chara_sprites/kingbrother2.png",{"frameWidth":27,"frameHeight":40,"startFrame":0,"endFrame":0}],["chara_sprite/loretta","./img/chara_sprites/loretta.png",{"frameWidth":34,"frameHeight":41,"startFrame":0,"endFrame":11}],["chara_sprite/mary","./img/chara_sprites/mary.png",{"frameWidth":38,"frameHeight":39,"startFrame":0,"endFrame":11}],["chara_sprite/matilda","./img/chara_sprites/matilda.png",{"frameWidth":28,"frameHeight":42,"startFrame":0,"endFrame":11}],["chara_sprite/max","./img/chara_sprites/max.png",{"frameWidth":26,"frameHeight":42,"startFrame":0,"endFrame":11}],["chara_sprite/mercenary","./img/chara_sprites/mercenary.png",{"frameWidth":28,"frameHeight":39,"startFrame":0,"endFrame":11}],["chara_sprite/nikke","./img/chara_sprites/nikke.png",{"frameWidth":38,"frameHeight":56,"startFrame":0,"endFrame":2}],["chara_sprite/orthrus","./img/chara_sprites/orthrus.png",{"frameWidth":130,"frameHeight":170,"startFrame":0,"endFrame":2}],["chara_sprite/player","./img/chara_sprites/player.png",{"frameWidth":26,"frameHeight":41,"startFrame":0,"endFrame":11}],["chara_sprite/poets","./img/chara_sprites/poets.png",{"frameWidth":32,"frameHeight":45,"startFrame":0,"endFrame":5}],["chara_sprite/queen","./img/chara_sprites/queen.png",{"frameWidth":96,"frameHeight":96,"startFrame":0,"endFrame":2}],["chara_sprite/queen_back","./img/chara_sprites/queen_back.png",{"frameWidth":96,"frameHeight":96,"startFrame":0,"endFrame":2}],["chara_sprite/ray","./img/chara_sprites/ray.png",{"frameWidth":26,"frameHeight":42,"startFrame":0,"endFrame":11}],["chara_sprite/sister","./img/chara_sprites/sister.png",{"frameWidth":30,"frameHeight":39,"startFrame":0,"endFrame":0}],["chara_sprite/soldier","./img/chara_sprites/soldier.png",{"frameWidth":28,"frameHeight":44,"startFrame":0,"endFrame":11}],["chara_sprite/spectre","./img/chara_sprites/spectre.png",{"frameWidth":28,"frameHeight":45,"startFrame":0,"endFrame":2}],["chara_sprite/treasure_chest","./img/chara_sprites/treasure_chest.png",{"frameWidth":45,"frameHeight":39,"startFrame":0,"endFrame":6}],["chara_sprite/zi","./img/chara_sprites/zi.png",{"frameWidth":28,"frameHeight":39,"startFrame":0,"endFrame":11}],["tileset/door_gimmick","./img/tilesets/image/door_gimmick.png",{"frameWidth":48,"frameHeight":66,"startFrame":0,"endFrame":1}],["tileset/door_gimmick_light","./img/tilesets/image/door_gimmick_light.png",{"frameWidth":48,"frameHeight":33,"startFrame":0,"endFrame":3}]]}')},1682:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(a(1683)),r=l(a(12)),s=l(a(1684)),o=l(a(1685)),i=l(a(1686));function l(e){return e&&e.__esModule?e:{default:e}}t.default=e=>{e.game.renderer.addPipeline("light",new n.default(e.game,s.default));const t=e.game.renderer.addPipeline("blur",new n.default(e.game,o.default));t.setFloat1("resolution",r.default.WIDTH),t.setFloat1("radius",10);const a=e.game.renderer.addPipeline("spotlight",new n.default(e.game,i.default));a.setFloat2("resolution",1,1),a.setFloat1("tx",480),a.setFloat1("ty",270),a.setFloat1("r",320)}},1683:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Phaser.Renderer.WebGL.Pipelines.TextureTintPipeline{constructor(e,t){super({game:e,renderer:e.renderer,fragShader:t})}}t.default=n},1684:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["precision lowp float;","varying vec2 outTexCoord;","varying vec4 outTint;","uniform sampler2D uMainSampler;","uniform float time;","void main () {","vec4 sum = vec4(0);","vec2 texcoord = outTexCoord;","for (int xx = -4; xx <= 4; xx++) {","for (int yy = -4; yy <= 4; yy++) {","float dist = sqrt(float(xx*xx) + float(yy*yy));","float factor = 0.0;","if (dist == 0.0) {","factor = 2.0;","} else {","factor = 2.0/abs(float(dist));","}","sum += texture2D(uMainSampler, texcoord + vec2(xx, yy) * 0.002) * (abs(sin(time))+0.06);","}","}","gl_FragColor = sum * 0.025 + texture2D(uMainSampler, texcoord);","}"].join("\n")},1685:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["precision mediump float;","varying vec4 outColor;","varying vec2 outTexCoord;","uniform sampler2D u_texture;","uniform float resolution;","uniform float radius;","uniform vec2 dir;","void main() {","vec4 sum = vec4(0.0);","vec2 tc = outTexCoord;","float blur = radius/resolution;","sum += texture2D(u_texture, vec2(tc.x, tc.y)) * 0.08;","sum += texture2D(u_texture, vec2(tc.x + 1.0*blur, tc.y + 0.0*blur)) * 0.045;","sum += texture2D(u_texture, vec2(tc.x - 1.0*blur, tc.y + 0.0*blur)) * 0.045;","sum += texture2D(u_texture, vec2(tc.x + 0.0*blur, tc.y + 1.0*blur)) * 0.045;","sum += texture2D(u_texture, vec2(tc.x + 0.0*blur, tc.y - 1.0*blur)) * 0.045;","sum += texture2D(u_texture, vec2(tc.x + 0.75*blur, tc.y + 0.75*blur)) * 0.045;","sum += texture2D(u_texture, vec2(tc.x + 0.75*blur, tc.y - 0.75*blur)) * 0.045;","sum += texture2D(u_texture, vec2(tc.x - 0.75*blur, tc.y + 0.75*blur)) * 0.045;","sum += texture2D(u_texture, vec2(tc.x - 0.75*blur, tc.y - 0.75*blur)) * 0.045;","sum += texture2D(u_texture, vec2(tc.x + 0.5*blur, tc.y - 1.75*blur)) * 0.03;","sum += texture2D(u_texture, vec2(tc.x + 1.5*blur, tc.y - 1.5*blur)) * 0.03;","sum += texture2D(u_texture, vec2(tc.x + 1.75*blur, tc.y - 0.5*blur)) * 0.03;","sum += texture2D(u_texture, vec2(tc.x + 1.75*blur, tc.y + 0.5*blur)) * 0.03;","sum += texture2D(u_texture, vec2(tc.x + 1.5*blur, tc.y + 1.5*blur)) * 0.03;","sum += texture2D(u_texture, vec2(tc.x + 0.5*blur, tc.y + 1.75*blur)) * 0.03;","sum += texture2D(u_texture, vec2(tc.x - 0.5*blur, tc.y - 1.75*blur)) * 0.03;","sum += texture2D(u_texture, vec2(tc.x - 1.5*blur, tc.y - 1.5*blur)) * 0.03;","sum += texture2D(u_texture, vec2(tc.x - 1.75*blur, tc.y - 0.5*blur)) * 0.03;","sum += texture2D(u_texture, vec2(tc.x - 1.75*blur, tc.y + 0.5*blur)) * 0.03;","sum += texture2D(u_texture, vec2(tc.x - 1.5*blur, tc.y + 1.5*blur)) * 0.03;","sum += texture2D(u_texture, vec2(tc.x - 0.5*blur, tc.y + 1.75*blur)) * 0.03;","sum += texture2D(u_texture, vec2(tc.x + 2.0*blur, tc.y + 0.0*blur)) * 0.025;","sum += texture2D(u_texture, vec2(tc.x - 2.0*blur, tc.y + 0.0*blur)) * 0.025;","sum += texture2D(u_texture, vec2(tc.x + 0.0*blur, tc.y + 2.0*blur)) * 0.025;","sum += texture2D(u_texture, vec2(tc.x + 0.0*blur, tc.y - 2.0*blur)) * 0.025;","sum += texture2D(u_texture, vec2(tc.x + 1.75*blur, tc.y + 1.75*blur)) * 0.025;","sum += texture2D(u_texture, vec2(tc.x + 1.75*blur, tc.y - 1.75*blur)) * 0.025;","sum += texture2D(u_texture, vec2(tc.x - 1.75*blur, tc.y + 1.75*blur)) * 0.025;","sum += texture2D(u_texture, vec2(tc.x - 1.75*blur, tc.y - 1.75*blur)) * 0.025;","gl_FragColor =  vec4(sum.rgb, 1.0);","}"].join("\n")},1686:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="\n  precision mediump float;\n  uniform vec2  resolution;\n  uniform float tx;\n  uniform float ty;\n  uniform float r;\n  uniform sampler2D uMainSampler;\n  varying vec2 outTexCoord;\n  vec3 makeCircle(vec2 st,vec2 center, vec3 col){\n      float d = distance(st,center);\n      float pct = smoothstep(r,r+0.1,d);\n      return vec3(1.0-pct)*col;\n  } \n  void main(void) {\n      vec2 st = vec2(gl_FragCoord.x/resolution.x,gl_FragCoord.y/resolution.y);\n      vec4 color = texture2D(uMainSampler, outTexCoord);\n      gl_FragColor = color*vec4(makeCircle(st,vec2(tx,ty),vec3(1.0)),1.0);\n  }\n"},1687:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(193),s=(n=r)&&n.__esModule?n:{default:n};t.default=e=>{s.default.spritesheet.forEach(t=>{const a=t[0].split("/").slice(-1)[0];11===t[2].endFrame?(e.anims.create({key:a+"_walk_down",frames:e.anims.generateFrameNumbers(t[0],{start:0,end:2}),repeat:-1,frameRate:5,yoyo:!0}),e.anims.create({key:a+"_walk_left",frames:e.anims.generateFrameNumbers(t[0],{start:3,end:5}),repeat:-1,frameRate:5,yoyo:!0}),e.anims.create({key:a+"_walk_right",frames:e.anims.generateFrameNumbers(t[0],{start:6,end:8}),repeat:-1,frameRate:5,yoyo:!0}),e.anims.create({key:a+"_walk_up",frames:e.anims.generateFrameNumbers(t[0],{start:9,end:11}),repeat:-1,frameRate:5,yoyo:!0})):2===t[2].endFrame&&e.anims.create({key:a+"_waiting",frames:e.anims.generateFrameNumbers(t[0],{start:0,end:2}),repeat:-1,frameRate:4,yoyo:!0})}),e.anims.create({key:"poets_lute",frames:e.anims.generateFrameNumbers("chara_sprite/poets",{start:0,end:5}),repeat:-1,frameRate:2}),e.anims.create({key:"treasure",frames:e.anims.generateFrameNumbers("chara_sprite/treasure_chest",{start:0,end:6}),repeat:0,frameRate:20})}},1688:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(a(43)),r=d(a(12)),s=d(a(194)),o=d(a(740)),i=d(a(741)),l=d(a(120)),h=a(47),c=d(a(742));function d(e){return e&&e.__esModule?e:{default:e}}class u extends Phaser.Scene{constructor(){super({key:"Title",active:!1})}create(){this.storage=n.default,this.storage.init();const e=this.add.sprite(0,0,"title").setOrigin(0,0);if(this.add.sprite(r.default.WIDTH.half,270,"title_logo"),this.getStartButton(),this.logo().then(()=>{e.setInteractive().on("pointerup",()=>this.initContents()),this.ui.audio.setBgm("theme")}),location.query.load){const e=n.default.getRow(Number(location.query.load));this.storage.load(e.number).then(()=>{this.continueGame(e.state.map,e.state.x,e.state.y)})}}get ui(){return this.scene.get("UI")}get audio(){return this.ui.audio}get setting(){return this.ui.setting}async logo(){const e=this.add.rectangle(0,0,r.default.WIDTH,r.default.HEIGHT,1118481).setOrigin(0,0);await this.delay(200);const t=this.add.sprite(r.default.WIDTH.half,r.default.HEIGHT.half,"logo_laineus").setOrigin(.5,.5);await(0,h.fadeIn)(this,t),await this.delay(800),await(0,h.fadeOut)(this,t),await this.delay(400);const a=this.add.sprite(r.default.WIDTH.half,r.default.HEIGHT.half,"logo_mafu").setOrigin(.5,.5);await(0,h.fadeIn)(this,a),await this.delay(800),await(0,h.fadeOut)(this,a),await this.delay(400),await(0,h.fadeOut)(this,e)}delay(e){return new Promise(t=>setTimeout(t,e))}getStartButton(){const e=this.add.sprite(r.default.WIDTH.half,70..byBottom,"taptostart");return this.add.tween({targets:e,duration:600,alpha:.5,yoyo:!0,loop:-1}),e}initContents(){const e=this.add.sprite(0,0,"title_blur").setOrigin(0,0).setInteractive();(0,h.fadeIn)(this,e);const t=this.add.rectangle(0,0,r.default.WIDTH,r.default.HEIGHT,r.default.COLORS.black).setOrigin(0,0).setAlpha(.5);this.subLogo=this.add.sprite(25,25,"logo").setOrigin(0,0).setScale(.5,.5),this.version=this.add.text(10..byRight,10..byBottom,"Version: 1.0.7",{fontSize:11,fontFamily:r.default.FONTS.TEXT,fill:r.default.COLORS.gray.toColorString}).setOrigin(1,1);this.list=[{text:"New Game",callback:this.newGame},{text:"Continue",callback:this.loadData},{text:"Settings",callback:this.settings},{text:"Close",callback:()=>{(0,h.fadeOut)(this,e),this.list.forEach(e=>e.destroy()),this.subLogo.destroy(),this.version.destroy(),t.destroy()}}].map((e,t)=>{const a=new l.default(this,r.default.WIDTH.half,400..byBottom+100*t,e.text,420,70,{fontSize:17}).on("click",e.callback.bind(this));return this.add.existing(a),a})}continueGame(e,t,a){this.ui.transition("normal").then(this.runGame.bind(this,e,t,a))}newGame(){this.ui.storyTelling().then(()=>{this.add.rectangle(0,0,r.default.WIDTH,r.default.HEIGHT,1118481).setOrigin(0,0),this.ui.chapterStart(`${s.default[0].name} ${s.default[0].title}`).then(()=>{this.runGame("room1",19..toPixelCenter,11..toPixel)})})}runGame(e,t,a){this.scene.start("Game",{map:e,x:t,y:a}),this.scene.sleep("Title")}subContent(e){this.subLogo.setVisible(!1),this.version.setVisible(!1),this.list.forEach(e=>e.setVisible(!1));const t=this.add.polygon(0,0,[[0,0],[50..byRight,0],[150..byRight,(0).byBottom],[0,(0).byBottom]],r.default.COLORS.black,.7).setOrigin(0,0);this.add.existing(t),this.add.existing(e),(0,h.slideIn)(this,[t,e],{x:-100});const a=new c.default(this,70..byRight,35..byBottom).on("click",()=>{(0,h.slideOut)(this,[a],{x:100}),(0,h.slideOut)(this,[e,t],{x:-100}),this.subLogo.setVisible(!0),this.version.setVisible(!0),this.list.forEach(e=>e.setVisible(!0))});this.add.existing(a),(0,h.slideIn)(this,a,{x:100})}settings(){const e=new i.default(this,!0);this.subContent(e)}loadData(){const e=new o.default(this,!0);e.on("loadData",e=>{this.storage.load(e.number).then(()=>{this.continueGame(e.state.map,e.state.x,e.state.y)})}),this.subContent(e)}}t.default=u},1689:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(2)),r=o(a(1692)),s=a(1721);function o(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(){this.lastNumber=null,this.init()}init(){this.lastSnapshot=null,this.setState((0,r.default)())}loadSetting(){window.appStorage.getItem("data_last_saved_number").then(e=>{e&&(this.lastNumber=Number(e))})}setState(e){this.state=e}async getList(){const e=9..toArray().map(this.getRow.bind(this));return Promise.all(e)}async getRow(e){const t=await this.getSavedState(e);return{number:e,name:0===e?"Auto Save":"Data "+e,state:t,snapshot:await this.getSnapshot(e),exists:Boolean(t)}}async getSavedState(e){const t=await window.appStorage.getItem("data_"+e);if(!t)return null;const a=(0,s.decrypt)(t,-0);try{const e=JSON.parse(a);return this.fixState(e),e}catch(t){return this.delete(e),alert("Save data is broken"),!1}}async getSnapshot(e){return window.appStorage.getItem(`data_${e}_ss`)}async save(e){const t=[];this.state.saved=(0,n.default)().unix();const a=(0,s.encrypt)(JSON.stringify(this.state),0);return t.push(window.appStorage.setItem("data_"+e,a)),this.lastSnapshot?t.push(window.appStorage.setItem(`data_${e}_ss`,this.lastSnapshot)):t.push(window.appStorage.removeItem(`data_${e}_ss`)),e>0&&(this.lastNumber=e),t.push(window.appStorage.setItem("data_last_saved_number",String(e))),Promise.all(t)}async load(e){const t=await this.getSavedState(e);return!!t&&(this.setState(t),this.lastNumber=e,!0)}delete(e){return window.appStorage.removeItem("data_"+e),window.appStorage.removeItem(`data_${e}_ss`),!0}fixState(e){const t=(e,a)=>{const n=Object.keys(e),r=Object.keys(a),s=n.filter(e=>!r.includes(e)),o=r.filter(e=>!n.includes(e)),i=r.filter(e=>n.includes(e)&&a[e]&&Object.isObject(a[e]));s.length&&console.log("add: ",s.join(", ")),o.length&&console.log("delete: ",o.join(", ")),s.forEach(t=>a[t]=JSON.parse(JSON.stringify(e[t]))),o.forEach(e=>delete a[e]),i.forEach(n=>t(e[n],a[n]))};return t((0,r.default)(),e),e}}},1691:function(e,t,a){var n={"./af":603,"./af.js":603,"./ar":604,"./ar-dz":605,"./ar-dz.js":605,"./ar-kw":606,"./ar-kw.js":606,"./ar-ly":607,"./ar-ly.js":607,"./ar-ma":608,"./ar-ma.js":608,"./ar-sa":609,"./ar-sa.js":609,"./ar-tn":610,"./ar-tn.js":610,"./ar.js":604,"./az":611,"./az.js":611,"./be":612,"./be.js":612,"./bg":613,"./bg.js":613,"./bm":614,"./bm.js":614,"./bn":615,"./bn-bd":616,"./bn-bd.js":616,"./bn.js":615,"./bo":617,"./bo.js":617,"./br":618,"./br.js":618,"./bs":619,"./bs.js":619,"./ca":620,"./ca.js":620,"./cs":621,"./cs.js":621,"./cv":622,"./cv.js":622,"./cy":623,"./cy.js":623,"./da":624,"./da.js":624,"./de":625,"./de-at":626,"./de-at.js":626,"./de-ch":627,"./de-ch.js":627,"./de.js":625,"./dv":628,"./dv.js":628,"./el":629,"./el.js":629,"./en-au":630,"./en-au.js":630,"./en-ca":631,"./en-ca.js":631,"./en-gb":632,"./en-gb.js":632,"./en-ie":633,"./en-ie.js":633,"./en-il":634,"./en-il.js":634,"./en-in":635,"./en-in.js":635,"./en-nz":636,"./en-nz.js":636,"./en-sg":637,"./en-sg.js":637,"./eo":638,"./eo.js":638,"./es":639,"./es-do":640,"./es-do.js":640,"./es-mx":641,"./es-mx.js":641,"./es-us":642,"./es-us.js":642,"./es.js":639,"./et":643,"./et.js":643,"./eu":644,"./eu.js":644,"./fa":645,"./fa.js":645,"./fi":646,"./fi.js":646,"./fil":647,"./fil.js":647,"./fo":648,"./fo.js":648,"./fr":649,"./fr-ca":650,"./fr-ca.js":650,"./fr-ch":651,"./fr-ch.js":651,"./fr.js":649,"./fy":652,"./fy.js":652,"./ga":653,"./ga.js":653,"./gd":654,"./gd.js":654,"./gl":655,"./gl.js":655,"./gom-deva":656,"./gom-deva.js":656,"./gom-latn":657,"./gom-latn.js":657,"./gu":658,"./gu.js":658,"./he":659,"./he.js":659,"./hi":660,"./hi.js":660,"./hr":661,"./hr.js":661,"./hu":662,"./hu.js":662,"./hy-am":663,"./hy-am.js":663,"./id":664,"./id.js":664,"./is":665,"./is.js":665,"./it":666,"./it-ch":667,"./it-ch.js":667,"./it.js":666,"./ja":668,"./ja.js":668,"./jv":669,"./jv.js":669,"./ka":670,"./ka.js":670,"./kk":671,"./kk.js":671,"./km":672,"./km.js":672,"./kn":673,"./kn.js":673,"./ko":674,"./ko.js":674,"./ku":675,"./ku.js":675,"./ky":676,"./ky.js":676,"./lb":677,"./lb.js":677,"./lo":678,"./lo.js":678,"./lt":679,"./lt.js":679,"./lv":680,"./lv.js":680,"./me":681,"./me.js":681,"./mi":682,"./mi.js":682,"./mk":683,"./mk.js":683,"./ml":684,"./ml.js":684,"./mn":685,"./mn.js":685,"./mr":686,"./mr.js":686,"./ms":687,"./ms-my":688,"./ms-my.js":688,"./ms.js":687,"./mt":689,"./mt.js":689,"./my":690,"./my.js":690,"./nb":691,"./nb.js":691,"./ne":692,"./ne.js":692,"./nl":693,"./nl-be":694,"./nl-be.js":694,"./nl.js":693,"./nn":695,"./nn.js":695,"./oc-lnc":696,"./oc-lnc.js":696,"./pa-in":697,"./pa-in.js":697,"./pl":698,"./pl.js":698,"./pt":699,"./pt-br":700,"./pt-br.js":700,"./pt.js":699,"./ro":701,"./ro.js":701,"./ru":702,"./ru.js":702,"./sd":703,"./sd.js":703,"./se":704,"./se.js":704,"./si":705,"./si.js":705,"./sk":706,"./sk.js":706,"./sl":707,"./sl.js":707,"./sq":708,"./sq.js":708,"./sr":709,"./sr-cyrl":710,"./sr-cyrl.js":710,"./sr.js":709,"./ss":711,"./ss.js":711,"./sv":712,"./sv.js":712,"./sw":713,"./sw.js":713,"./ta":714,"./ta.js":714,"./te":715,"./te.js":715,"./tet":716,"./tet.js":716,"./tg":717,"./tg.js":717,"./th":718,"./th.js":718,"./tk":719,"./tk.js":719,"./tl-ph":720,"./tl-ph.js":720,"./tlh":721,"./tlh.js":721,"./tr":722,"./tr.js":722,"./tzl":723,"./tzl.js":723,"./tzm":724,"./tzm-latn":725,"./tzm-latn.js":725,"./tzm.js":724,"./ug-cn":726,"./ug-cn.js":726,"./uk":727,"./uk.js":727,"./ur":728,"./ur.js":728,"./uz":729,"./uz-latn":730,"./uz-latn.js":730,"./uz.js":729,"./vi":731,"./vi.js":731,"./x-pseudo":732,"./x-pseudo.js":732,"./yo":733,"./yo.js":733,"./zh-cn":734,"./zh-cn.js":734,"./zh-hk":735,"./zh-hk.js":735,"./zh-mo":736,"./zh-mo.js":736,"./zh-tw":737,"./zh-tw.js":737};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=1691},1692:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(738),s=(n=r)&&n.__esModule?n:{default:n};const o=()=>{const e=JSON.parse(JSON.stringify(s.default.slice(0,3)));return e.forEach(e=>Object.assign(e,{exp:0,max_hp:e.hp,weapon:null})),e};t.default=()=>({map:"room1",x:500,y:600,r:90,chapter:0,allowed_area:0,visited:[],event:{chapter_begin:[!1,!1,!1,!1,!1,!1],m0_1:{started:!0,completed:!1,battled:!1},m1_1:{started:!1,completed:!1,talked:!1,d1:0,d2:0,d3:0,d4:0,d5:0},m1_2:{started:!1,completed:!1,talked:!1,solved:!1},m1_3:{started:!1,completed:!1,count:0},m1_4:{started:!1,completed:!1,solved:!1,area:!1},m2_1:{started:!1,completed:!1,wine:[],talked:!1,key:!1,opened:!1},m2_2:{started:!1,completed:!1,count:0},m2_3:{started:!1,completed:!1,solved:!1,talked:!1},m2_4:{started:!1,completed:!1,solved:!1,jack:!1,talked:!1,search:!1,found:!1,boss:!1},m3_1:{started:!1,completed:!1},m3_2:{started:!1,completed:!1,count:0},m3_3:{started:!1,completed:!1,solved:!1},m3_4:{started:!1,completed:!1,ghosts:[]},m3_5:{started:!1,completed:!1},m4_1:{started:!1,completed:!1},m4_2:{started:!1,completed:!1,count:0},m4_3:{started:!1,completed:!1,talked:!1},m4_4:{started:!1,completed:!1,apples:[]},m4_5:{started:!1,completed:!1,area1:!1,area2:!1},m5_1:{started:!1,completed:!1,soldiers:!1},m0:{talked_matilda:!1,talked_annabelle:!1,talked_amber:!1,area:!1},m1:{talked_amber:!1,talked_annabelle:!1,talked_elliott:!1},m2:{talked_amber1:!1,talked_elliott:!1,talked_annabelle:!1,talked_amber2:!1},m3:{talked_amber:!1,talked_max:!1,talked_matilda:!1},m4:{talked_amber:!1,talked_elliott:!1,talked_max:!1,talked_matilda:!1,talked_annabelle:!1,talked_mary:!1,talked_loretta:!1,talked_dario:!1,talked_drystan:!1,talked_ray:!1},town:{amber:[],annabelle:[],matilda:[],elliott:[],max:[]}},tweets:[],gimmicks:[],treasures:[],battlers:o(),counter_delay:1e3,weapons:[],saved:null,sec:0})},1693:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1694),r=a(1695),s=a(1696),o=a(1697),i=a(1698),l=a(1699),h=a(1700),c=a(1701);t.default={langLabel:"English",chapter:[{name:"Prologue:",title:"Jack the Kingkiller",sub:""},{name:"Chapter 1:",title:"Warkano Forest",sub:""},{name:"Chapter 2:",title:"Troia's Secret Passage",sub:""},{name:"Chapter 3:",title:"Catacombs of St Anterus",sub:""},{name:"Chapter 4:",title:"Temple of Grefalde",sub:""},{name:"Epilogue:",title:"Edgar the Peaceful",sub:""}],area:{town:"Royal Capital",castle:"Royal Gardens",forest:"Warkano Forest",underpass:"Troia's Secret Passage",catacomb:"Catacombs of St Anterus",temple:"Temple of Grefalde"},areaSub:{bellion:"Kingdom of Bellion",room:"Home",forest:{a:"Eastern Section",b:"Hunter's Heights",c:"High Plateau",d:"Clearing",e:"Southern Section",f:"Camping Area",g:"Northwestern Hill",h:"Northwest Section",i:"Hermit's Dwelling"},underpass:{a:"Prison",b:"Duke's Side Passage",c:"Water Way",d:"Small Room",e:"Storage",f:"Watchdog's Room",g:"Royal Passage",h:"Corridor",i:"Castle Entrance"},aragnie:"Aragnier's Lair",catacomb:{a:"Entrance",b:"East Room",c:"Cemetery",d:"South Cemetery",e:"West Block",f:"Noble's Tomb",g:"Royal Family's Tomb"},temple:{a:"Entrance",b:"Plaza",c:"Central Chamber",d:"2nd Floor",e:"Eastern Chamber",f:"Underground",g:"Deepest Section"}},mission:{m0_1:{title:"Jack the Kingkiller",sub:"Jack the Kingkiller"},m1_1:{title:"Matthew and the Hunting Dogs",sub:"Matthew and the Hunting Dogs"},m1_2:{title:"The Isambard Mercenaries",sub:"The Isambard Mercenaries"},m1_3:{title:"Drystan the Hermit",sub:"Drystan the Hermit"},m1_4:{title:"Rex Bear",sub:"Rex Bear"},m2_1:{title:"Imprisoned Cassandra",sub:"Imprisoned Cassandra"},m2_2:{title:"Princess Mary and Lady Loretta",sub:"Princess Mary and Lady Loretta"},m2_3:{title:"Dionysus's Moonshine",sub:"Dionysus's Moonshine"},m2_4:{title:"Aragnier's Lair",sub:"Aragnier's Lair"},m3_1:{title:"Lord Ferdinand's Curse",sub:"Lord Ferdinand's Curse"},m3_2:{title:"To Hear Marianne's Song Again",sub:"To Hear Marianne's Song Again"},m3_3:{title:"Dario's Sorrow",sub:"Dario's Sorrow"},m3_4:{title:"The Sins of the Renfield Family",sub:"The Sins of the Renfield Family"},m3_5:{title:"The Ghost of Queen Evangelina",sub:"The Ghost of Queen Evangelina"},m4_1:{title:"Grefalde's Sacred Statue",sub:"Grefalde's Sacred Statue"},m4_2:{title:"The Words of Dragons",sub:"The Words of Dragons"},m4_3:{title:"Calibrenus",sub:"Calibrenus"},m4_4:{title:"Music for the Goddess",sub:"Music for the Goddess"},m4_5:{title:"The Dragonkiller King",sub:"The Dragonkiller King"},m5_1:{title:"Edgar the Peaceful",sub:"Edgar the Peaceful"}},chara:{ann:"Ann",jaquelyn:"Jaquelyn",francisca:"Francisca",king:"King",jack:"Jack",ethel:"Ethelbald",guard:"Guard",soldier:"Soldier",injuredSoldier:"Injured Soldier",amber:"Amber",elliott:"Elliot",max:"Max",annabelle:"Annabelle",matilda:"Matilda",hunter:"Hunter",zi:"Zi",mary:"Mary",loretta:"Loretta",hector:"Hector",cassandra:"Cassandra",nikke:"Nikke",dario:"Dario",drystan:"Drystan",queen:"Queen Evangelina",sonberk:"Sonberk",fdn:"Lord Ferdinand",klaus:"Klaus",injuredLeader:"Mercenary Captain",injuredMercenary:"Mercenary",dionysus:"Dionysus",ray:"Ray",sister:"Sister",lyla:"Lyla",unknown:"???"},weapon:{1:"Short Sword",2:"Shortbow",3:"Cutlass",4:"Spear",5:"Gladius",6:"Hunting Bow",7:"Halberd",8:"Longsword",9:"Bastard Sword",10:"Battle Ax",11:"Zweihander",12:"Pike",13:"Claymore",14:"Longbow",15:"Falchion",16:"Viking Axe",17:"Flamberge",18:"Katana",19:"Calibrenus"},ability:{1:"Attack All",2:"Recover",3:"Heal Party"},battler:{jack:"Jack the Kingkiller",bee:"Bee",bee2:"Killer Bee",slime:"Slime",mandrake:"Mandrake",wolf:"Wolf",flower:"Flower",bear:"Bear",goblin:"Goblin",goblin2:"Hobgoblin",carbuncle:"Carbuncle",orthrus:"Orthrus",gargoyle:"Gargoyle",succubus:"Succubus",aragnie:"Aragnier",phantom:"Phantom",skull:"Skull",ghost:"Ghost",spectre:"Spectre",wraith:"Wraith",dullahan:"Dullahan",queen:"Queen",bird:"Kellune",lizard:"Lizard",tree:"Tree",knight:"Knight",thief:"Thief",nikke:"Nikke",dragon:"Sonberk"},item:{dragonScale:"Dragonscale"},ui:{sub:{menu:"Menu",close:"Close",quests:"Map & Quests",characters:"Characters",save:"Save",load:"Load",settings:"Settings",battleResult:"Result"},setting:{autoDetection:"Auto Detection",clickToAction:"Click to Act",virtualStick:"Controller"},battle:{attack:"Attack",counter:"Counter"},recommendedLevel:"Recommended Level",undefinedArea:"Undefinied Area",completed:"Completed"},missionStart:'"#{title}" Start',missionComplete:'"#{title}" Complete',unlockArea:'"#{area}" Unlocked',gotItem:'"#{name}" picked up',hpRecovered:"HP recovered",weaponDrop:"#{name} found!",itemDrop:{mandrake:"Found #{num} mandrake roots!",magicStone:"Found #{num} carbuncle stones!",water:"Got #{num} bottles of water.",dagger:"Recovered Dario's dagger!",kelunne:"Found #{num} Kellune feathers!"},roomBook:n.roomBook,roomEv:n.roomEv,townGreeting:r.townGreeting,townGreeting4:r.townGreeting4,townBoard:r.townBoard,townCommon:r.townCommon,townChapter0:r.townChapter0,townChapter1:r.townChapter1,townChapter2:r.townChapter2,townChapter3:r.townChapter3,townChapter4:r.townChapter4,townChapter5:r.townChapter5,jack:s.jack,dog:o.dog,mercenary:o.mercenary,drystan:o.drystan,bear:o.bear,cassandra:i.cassandra,princess:i.princess,moonshine:i.moonshine,aragnie:i.aragnie,ferdinand:l.ferdinand,marianne:l.marianne,dario:l.dario,renfield:l.renfield,evangelina:l.evangelina,lorraine:h.lorraine,allsRight:h.allsRight,nikke:h.nikke,calibur:h.calibur,lute:h.lute,dragonKiller:h.dragonKiller,peaceful:c.peaceful,templeCharacters:h.templeCharacters,storyTelling:["The King is dead.\nThe Glory of the past can no longer be seen beyond the closed Gates of the Castle.\nThe Kingdom came to an end with the Death of the Great King."," The History of Bellion","After a thousand years the kingdom was forgotten to the world, it's name long lost.\nBut the descendants of Bellion never left the land where King Edgar sleeps peacefully.","At some point, magicians who lamented the death of the Great King discovered a way to alter time.","It was unnatural to defy the laws of nature,\nbut for King Edgar the Peaceful they were willing to rewrite history."],missionDescription:{m0_1:{base:"To prevent the assassination of King Edgar, head to the royal gardens, the site of the murder.",first:"Ask around town to find out how to go to the royal gardens.",second:"Let's leave town and head to the royal gardens."},m1_1:{base:"Hunter Matthew's five puppies have escaped.",cnt:"Number of puppies found: #{current}/5."},m1_2:{base:"An injured mercenary is missing.",started:"Let's search nearby.",solved:"Found the injured mercenary.  Let's check in at the camp."},m1_3:{base:"Deliver mandrake roots to Drystan.",cnt:"Collected (#{current}/#{max}mandrake roots."},m1_4:{base:"Defeat the ferocious Rex Bear and deliver its blood to Drystan.",bear:"Let's find and defeat the Rex Bear.",solved:"I have the blood from the Rex Bear.  Let's deliver it to Drystan."},m2_1:{base:"Cassandra wants some wine to ease her imprisonment.",wip:"Find wine in the underground passage.",cnt:"Found#{current}/3barrels of wine."},m2_2:{base:"Princess Mary and the Duke's daughter Loretta are collecting carbuncle stones to craft a gift for Cassandra.\nCollect carbuncle stones.",cnt:"Collected (#{current}/#{max}carbuncle stones"},m2_3:{base:"Moonshine smuggler Dionysus is waiting for the castle's guard dog, Orthrus, to sleep.",wip:"Orthrus is drunk off of Dionysus's wine.  It's time to defeat Orthrus.",solved:"Orthrus is defeated, let's return to Dionysus."},m2_4:{base:"The former knight, Hector, wants revenge on the king for imprisoning Cassandra.\n Let's work with Mary and Loretta to free Cassandra.",search:"Use the carbuncle stone lantern to search for Aragnier.",solved:"Defeated Aragnier. Let's return to Cassandra."},m3_1:{base:"The foreign aristocrat, Ferdinand, has gone insane.",started:"Let's bring something to Ferdinand to lift the curse.",solved:"Use Marianne's amulet to lift the curse.",completed:"He was dragged to the bottom of the cliff by the ghosts who resent him."},m3_2:{base:"The nun is huddled up at Marianne's tomb.",started:"Collect some vials of water from a monster and bring them to the sister.",cnt:"(#{current}/#{max}bottles collected."},m3_3:{base:"Dario the necromancer was threatened by Jack and created the ghost of the Queen.",started:"It seems that Jack is lurking nearby. Let's find him.",solved:"We defeated Jack. Let's deliver the dagger that Jack dropped to Dario."},m3_4:{base:"Ray is vandalizing the grave for revenge on the Renfields.",started:"The ghosts of the Renfield family have appeared!",cnt:"Defeated (#{current}/5ghosts of the Renfield family."},m3_5:{base:"The ghost of the fake Queen Evangelina, created by Dario, holds a grudge against the king.",started:"Let's find and defeat the ghost of the queen."},m4_1:{base:"The architect Klaus taught us about the temple secrets.",started:"Trigger the statue to open the door to the second floor."},m4_2:{base:"The dragon tribe Zi, who live in the temple, told us about the holy sword, Calibrenus. \nThey prepared a message for the protectors of the holy sword: the dragon tribe Nikke.",started:"Kill Kellune and collect their feathers.",cnt:"Collected (#{current}/#{max}Kellune feathers"},m4_3:{base:"The holy sword Calibrenus is protected by the dragon tribe Nikke.",started:"Use the words of the Zi tribe to call upon the Nikke tribe for the holy sword.",talked:"Complete the Nikke's tribe's challenge to prove your strength."},m4_4:{base:"Lyla's lute playing seems to be able to open the door to the basement.",started:"Collect apples for Lyla.",cnt:"Collected (#{current}/#{max}apples."},m4_5:{base:"The king is fighting the dragon alone.",started:"Let's go to the innermost part and defeat Sonberk."},m5_1:{base:'The letter from my brother Ethelbald just said, "Wait in the castle garden."',started:"Let's head to castle's garden."}},afterBattle:{m1_3:"It looks like the mandrake roots have been gathered.",m2_2:"The Carbuncle stones have been gathered.",m3_2:"I think enough drinking water has been collected.",m4_2:"The Kellune feathers have been gathered."},tweet:{ca1:"Let's hide somewhere and wait.",ct1:"Catacombs... a little scary...",fr1:"Is this Warkano Forest?",tm1:"We've arrived at the entrance to the temple.",aplg:"A delicious looking apple.",aplb:"It's a damaged apple.",clbr:"Is that the holy sword?",un1:"We snuck past the Duke's guards, this must be the passage.",lost:{francisca:["Hey, wait!","You disappeared..."],jaquelyn:["Ann, don't leave me!","Ann, where did you go?"]}},mapEvent:{underpass8:{candle:"The fire has died out."},temple6:{statue:"There is a device in the pedestal!",option:["Move the device","Leave it alone"]},room1:{bed:["Let's head out early.","Ann, do you want to sleep?"]},catacomb1:{guard:["Be careful from here onward.","In recent years, the number of infested monsters has increased and are getting out of hand."]},catacomb6:{door:"The key fits perfectly!"}}}},1694:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.roomBook=[["According to the history of the Kingdom of Bellion, the king was killed by an assassin...","Let's hurry to the royal gardens!"],['"The king died of a sudden illness."',"I suppose the king wasn't all that young."],['"Betrayed and killed by one of his own knights."',"Could this knight be Jack the Kingkiller?"],['"The king is said to have been cursed by the ghost of the queen."',"Really?"],['"The king was defeated in battle with a dragon and died."',"A dragon...","I'm sure it's very strong."],['"The king fulfilled his destiny and ruled in peace."',"Nice,","I'm so happy I want to read it over and over again."]],t.roomEv=[[["Thank you again, everyone!","Of course, Ann.","Ann is leading?|  That worries me.","Do you truly understand what purpose we came here for?","Of course!"],["To save the king","Tourism"],["Our goal is to prevent king Edgar's assassination.","Well said, Ann."],["Ha...","That's not right, Ann.","Our purpose is to prevent King Edgar from being assassinated.","I'm joking","As if I could forget"],["The descendants of Bellion have always regretted his death.","It's true.","According to the history of the Kingdom of Bellion,|The king will be assassinated tomorrow evening in the royal gardens.","The identity and purpose of the assassin is unknown.","A mysterious figure only known by the title history gave him: Jack the Kingkiller.","Indeed.","Posing as travelers, we shall stop the assassination.","No problem.","Let's leave as soon as we're ready.","Perfect, let's get ready!","Ann, we must leave behind the revolvers.","Appropriate weapons for everyone have been procured.","A sword from this era!  You plan to fight with this?","We have no choice, guns are prohibited.","Of course.","Also, you are keeping the time crystal safe?","Absolutely!","If something were to happen to it, we can never return to our time.","Perhaps you should give it to Jaquelyn.","Ann wants to hold it.","I know...","If Ann loses it, I'll find her ancestral home and burn it down.","That's awful!","Ann will protect it.","Alright, let's go."]],[["We really took a beating.","But for some reason the king wasn't killed.","It's hard to say we were successful, but it does appear that way.","But where did Jack disappear to?","Hmmm.","Regardless of how things happened, it seems we got the result we wanted."],["Wait a second...","Hey everyone, look at this!","What's wrong?","The history of the Kingdom of Bellion. Did we manage to change history?","If the past changes, the content of the book must change too.","That's right, but this...","Oh no,",'"The king died of a sudden illness."',"A sudden illness...","That's less tragic than assassination, is our heritage still so sad?","I'm afraid so.","The time of his death hardly changed.","The history that follows remains dark.","What should we do...","Don't get depressed, Ann.","Yeah,","Anyway, let's investigate this matter too!","There may be something we can do.","Also the time crystal. We must find Jack the Kingkiller and get it back.","That's right, after all, we can't go home without it.","Jack the Kingkiller...","We still have no clue who he is.","We couldn't beat him, and it's possible that he still managed to kill the king.","No way...!","He... was really strong.","Yeah, but,","We will be stronger the next time we meet!","Well said."]],[["Let's check the history of Bellion again!",'It said "The king died of a sudden illness" before.',"And now?","Here it is.",'"Betrayed and killed by one of his own knights."',"It's always death!","Certainly feels that way.","Maybe it's impossible to change history.","Same as before: the cause of his death has changed, but the history following his death has not.","Well that's a problem!","Hmm...","Maybe there's a reason that the king has to die.","I don't know if it's fate, or something more specific.","If we want to find out we must solve this mystery.","But how?","Investigate the next cause and help the king!","I don't think what we're doing is useless.","I've learned a lot the past few days.","Sure, I want more information too.","We don't really have a choice anyways.","Then it's decided!","Solve the mystery of why the king always dies.","Is there more information regarding the death of the king this time?","Yeah, read it.","The king is murdered by Hector, a former knight who stormed the castle in a midnight raid.",'"Hector is said to have invaded through a secret passage in the basement of the royal castle."',"I wonder why.","Do you think Hector could be Jack the Kingkiller?","That would make sense.","What should we do first?","Let's find the secret passage.","A secret passage.  Maybe it's used in case of a siege.","Is it mentioned in the book?","Um,","Yeah, here it is!","It seems the basement of the castle has a tunnel. |It leads to the territory of a nobleman known as the Duke of Troias.","I'm happy to look for this tunnel,","but we can't exactly just wander around the castle...","Then let's find where it is in the Duke of Troia's territory!","Let's go!"]],[["Come on, what happened to the history of the kingdom?","What made him die next?","Hey! We don't know that he died yet!","I hope he's finally saved.","Um...",'"The king is said to have been cursed by the ghost of the queen."',"What!  That's scary!","So he does die again?","And this time because of a spirit's curse...","I wonder if that's really possible,","If it's just handed down rumors, then we have no good information this time.","Hey, I think Jack is involved in this case too.","He must be.","It's really suspicious that he was in the underground passage too.","Maybe Jack was the mastermind behind all the causes of death.","Every time Jack tried to kill the king, we prevented him.","Then Jack tries to kill the king again in another way.","That's why the king always meets a tragic end.","Yeah, that makes sense.","That's why we should kill Jack.","That's one method...","Is there any other way?","Why don't we meet with Jack and persuade him to stop?","Even if we can't convince him, I'd like to ask why he's trying to kill the king.","That's a good plan.","But how do we locate Jack?","If we chase the king's cause of death, we're bound to run into him.","True.","Okay, then it's decided!","Let's gather information in town."]],[["I'm curious about what the queen was saying.","A dragon.","What happened to Jack?","I hope he didn't actually die.","Really?","If he did, then we'll never recover the crystal.","Right.","Anyway, let's check the history of the kingdom first.","Ok.","Ummm,",'"The king was defeated in battle with the dragon and dies"',"This is...","That's what the queen was saying.","A dragon...","I wonder if we can handle it.","It'll be simple!","We just need to beat him up!","Sure, it's not as roundabout as it used to be.","By the way,","Isn't it noisy outside?","You're right.","The town seems more lively than usual.","Let's go check it out!"]],[["Things have finally calmed down.","That was quite the ride...","I'm glad the king defeated the dragon.","Me too.","How about the history book?","Is the king finally saved this time?","Yeah, I think he was finally saved.","I can feel it.","Let's see.","Um...","Oh! Look!",'"The king fulfilled his destiny and lived out his days in peace."',"And King Edgar doesn't die for another twenty years!","That's...","Yeah.","Yeah.","We finally managed to save him.","Oh I'm so glad!","I wonder what happened to our era.","Wait Ann,","You can't keep reading.","Oh,","I guess we'll find out whenever we make it back to our time.","Okay, let's go home!","I'd really like to.","Huh?","We haven't recovered the time crystal yet.","Oh, that's right.","What can we do?","Our only option is to look for Jack.","He wasn't at the Temple of Grefalde.","I wonder if he died when he fell in the Catacombs of St Anterus...","Considering that there's no more plots to kill the king,","it's very likely that Jack is dead.","That makes sense...","But I feel like he's still alive.","Yeah?","I trust Ann's instincts, let's go find out.","Let's do it!"]]]},1695:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.townGreeting={amber:"Nice weather",elliott:"Yo",max:"How are you?",annabelle:"Hello"},t.townGreeting4={amber:"This is awful...",matilda:"So scary..."},t.townBoard=["Local news is posted here.",'The ferocious monster "Rex Bear" is loose in the forest.  A reward for subduing it is posted.',"There's a post regarding the prohibition law, and the penalities for selling alcohol.","There's a post about the fire in the Renfield family's mansion.","There's a post about the dragon's awakening, and forming a team to subdue it.","There's a post about King Edgar defeating the dragon."],t.townCommon={amber:"It's nice weather today.",annabelle:[["Greetings traveler.","Have you decided on an inn for the evening?","If you haven't, you can stay with us.","Thank you,","but we've already chosen an inn.","I see,","But it's even nicer here than the other inn.","Is that so?","It's a little expensive,","But I can promise we have the best service in town.","This is a luxury inn?","It doesn't look like it...","Oh no, it's not.","You'll see why when you stay here.","I'll do my best to make sure you have a pleasant stay, sister.","?","Please, come on in if you feel like it."],["Ah, hello sister.","Would you like to have some lunch?","Our bread is freshly baked.","Oh wow!","By all means, please come in.","Our fresh bread attracts many customers.","Is that so?","Of course.","For example, do you see the girl hiding in the shadows over there?","For some reason she only comes to buy our bread when I'm not around.","Why?","I wonder why myself.","Her name is Matilda.","Cute."],["Do you know the story of the dragon which attacked ten years ago?","King Edgar fought the dragon and sealed it in the Temple of Grefalde.","Daddy and Mommy always told me this story.","Our inn also has a painting of King Edgar fighting the dragon.","Please take a look if you like.","My dad paid a fortune for the painting, but it's brought us a good reputation.","I'm proud of this story of the Bellion people."],["There's Matilda,","We used to be pretty good friends.","But now she's avoiding me.","Anytime I casually approach her, she runs away in a hurry.","Isn't it cute?"],["It's nice weather today."]],matilda:[["Hello.","Why are you standing in the shadows?","Oh, right.","This must look suspicious.","I'm watching Annabelle at the inn so she doesn't do something wrong.","Is she a bad girl?","No, she isn't. She's a good girl.","We used to play together a lot...","So why are you watching her?","Apparently she began a suspicious job recently.","So... I'm worried...","Then you should stop her.","You two were good friends before?","That's right...","I'm embarrassed to talk with her...","I wonder why...","Is that so?","Well that happens sometimes.","I'm sure you two can get along again.","I hope that's true... thank you.","Annabelle is a very good girl.","I hope we can get along like we used to."],["What's wrong?  Why the sad face?","Ah,","King Edgar once sealed a dragon in the Temple of Grefalde.","I heard rumors that the dragon might have awakened.","I'm so scared...","Really?","Yeah, it seems that no one has seen it in person yet,","but recently, Prince Ethelbald has frequently visited the temple.","That's why everyone is worried that something is happening there...","Since I was little, I was told that it will wake up someday,","It's so scary...","That's horrible."],["...","......","Oh!  I'm sorry!","I didn't notice you... I was daydreaming.","Are you ok?","Were you watching Annabelle again?","Ah yeah...","I'm always watching.","Yeah, yeah you are.","Why don't you talk to her again?","I'm... I'm nervous.","Annabelle..."],["Once upon a time ...","Annabele kissed me playfully","Crazy.","She acted like it was nothing...","But what was it?"],["Annabelle...","Ah..."]],elliott:[["I spoke with that mercenary over there, Max.","He said not everyone is fit to run a mercenary unit.","To start with, you need the correct equipment to fight.","I want good equipment so none of us die.","The weaker mercenaries make less, and can only afford cheap equipment.","Even if you're talented, there's little opportunity to get started.","Is that so?","That's how I came up with this great idea.","First, I find one of those talented individuals who wants to become a mercenary.","And I lend him good, sturdy, equipment.","So he has everything he needs to earn a good wage.","After a few jobs, he can pay me back, and then some.","It's a great idea right?","It's an interesting idea.","But even if I started this business, I don't have enough to buy the equipment to loan out.","So how about you lend me some money first?","I'll give you some of the money I make from this.",["Alright","No"],"Stop it Ann, you idiot.","Dang.","Let me know if you change your mind."],["Do you know about the Temple of Grefalde?","It's a temple that was built a long time ago.","The dragon that attacked our kingdom ten years ago is sleeping there.","It was King Edgar who subdued the dragon.","It is rumored that somewhere in the temple there are dragonscales cut off by the king.","It sounds like just a rumor, but...","If someone really found them, they'd be worth a fortune."],["The Catacombs of St Anterus holds regular citizens and the royal family.","Of course there are differences in how they're handled.","In the upper class areas,","sometimes graverobbers search for gold.","Hey.","...Hey I haven't become that desperate yet.","I didn't say you had.","It seems that the graverobbers are rarely successful due to the guards anyways.","But apparently they're now overworked with handling ghosts.","Handling ghosts?","Oh.","If someone wants to visit a grave, they need to hire an escort.","That's what I'm interested in.","If I could handle a sword like Max, I'd make a fortune escorting people."],["How are you doing?"]],max:[["What kind of person is King Edgar?","King Edgar is a hero to his people.","Everyone respects the king.","I heard he defeated the dragon which attacked the kingdom.","That's right, the whole kingdom knows of his heroic feat.","Almost ten years ago, the king fought the dragon that was terrorizing our kingdom.","King Edgard didn't kill the dragon, he sealed it in the Temple of Grefalde.","How strong he must be.","Indeed.  The kingdom has known peace ever since King Edgar took the throne.","That's why he's known as The Peaceful King.","Correct.","Ever since King Edgard's reign began, the country has known peace."],["Recently there's been rumors that the dragon has awakened in the Temple of Grefalde.","If true, I fear for the kingdom.","That dragon will surely hold a grudge against the king for its imprisonment.","If it's awakened, eventually it will gain enough strength to fly away. ","If true, I fear for our kingdom."],["The king has a younger brother named Ethelbald,","He's apparently good with a sword.","King Edgar is so old now, but,","If danger visits our kingdom, I wonder if the prince can handle it."],["How are you?"]]},t.townChapter0={ann:["By the way, how do we get to the royal gardens?","Let's ask around town.","We must try our best to not be suspicious."],amber:["A pleasure to meet you, traveler.","What brings you into town?","We came to see the royal castle!","Oh, is that so?","Very good.","Do you go there often?","I do.  Fortunately my husband is on good terms with the royal family.","That's amazing!","Have you ever entered the castle through the royal gardens?","No, never... always from the main entrance.","Because I'm always a guest, I have no need to use the rear entrance.","Oh, I see.","Do you wish to go?","Even if you wish to enter from the gardens,|You can't unless you know your way through the forest which surrounds it.","Of course.  Thank you so much for your time."],annabelle:["The royal gardens?","Yes, I've been there.","Really?","Yes, I bring food to the castle every once in awhile.","They prefer I enter through the back for some reason.","Can you tell me the way?","Sure.","Really!?","It's not a problem.","Next time you're in town, come stay at my inn instead.","Thank you!","Really, you'll enjoy your stay here."],matilda:["Hello.","Oh, hi...","We're looking for the royal gardens.  Do you know how to go there?","The gardens?","I don't know, I don't go outside all that often...","Sorry.","I see...","Oh, Annabelle at the inn might know.","Oh really!?","Yep...","The girl right over there.","Thank you.","Oh, but wait...","Why do you want to go to the royal gardens?","You're not planning anything bad are you?","No, don't worry.","It's just a part of our trip to the castle.","We've heard the royal gardens are beautiful, of course we want to see them.","I see...","I haven't heard much about them, actually.  |If they're near the castle, they are probably really pretty though.","Pretty just like Annabelle..."]},t.townChapter1={amber:["King Edgar, I'm so worried...","What happened to the king?","I heard from someone who is close to the royal family,","It seems that King Edgar has suddenly fallen ill.","Oh no...","I sure hope he gets better.","Oh, I shouldn't have shared that.  I'm just so worried, please keep it secret, alright?","Of course, I understand."],annabelle:["Medicine?","Yes, something to help with a bad illness.  Do you have anything?","I'm afraid I don't.","Some of my patrons get horny when they drink...","I don't need that kind of medicine!","I think that's all we have.","I see...","Ah!  Elliot recently started a shady business.","Maybe he's smuggled in some panacea.","Really!?","A panacea can cure anything, right?","I don't want to speak for him, he might not even have it.","I see.","If you change your mind and want to try our medicine, let me know.","I don't need it..."],elliott:[["Excuse me sir, what are you selling?","Yo.","I'm afraid I don't sell anything tourists would be interested in.","I'm sorry."],["I heard you're selling medicine.","Oh!  Are you looking to purchase some?","Well, I have this magical panacea that cures anything.","I'll sell it for 40 gold.","It can cure any illness?","Of course.","Buy","Don't buy","Naive Ann, this is clearly a fake.","But what if it it's real?","Young lady, please stop.","A wise decision, young lady.","This man and his business are suspicious.","Hey, don't distrupt my business, Max!","Stick to using your muscles, not your brain.  This is real.","No, it's not.","Did you begin this business after hearing the rumors?","That someone in the royal family is seriously ill.","What do you know?","Young lady, I've been hearing this story often recently.","If you seek a real panacea, there's a wise hermit living in Warkano Forest.","He is the only one who could make such a panacea.","This wise hermit of the forest is that talented with making medicine?","Yes, if someone truly needs medicine, they go to him.","I'm sure he would be willing to make medicine for our good king.","Sister, please.","It was wrong of me to deceive you.","Allow me to sell you this map of Warkano Forest at a bargain price.","Well alright..."],["Recently people have talked about a ferocious bear in the forest.","If you really do look for that hermit, please be careful."]]},t.townChapter2={amber:{question:["Ask about the secret passage","Ask about the Duke of Troia","Nothing"],answer0:["A secret passage in the royal castle.","It was used by the royal family to escape from the castle during a war.","Do you know where it is?","I don't know.","If an enemy country knew its location, it wouldn't be safe.  It's a closely guarded secret.","Of course."],answer1:["The Duke of Troia's residence is southeast of town.","Do you want to go?","You can go close to it, but he doesn't allow anyone on his premises.","You included, Amber?","Well...","I'm pretty close with the Duke.","We often exchange gifts.","In fact he sent me an orange jam just the other day.","Wow, that's a luxury item.","Is that so?","Yes, quite right.","So now I'm wondering what to give him in return.","If you have any good ideas, please let me know."],solve:["Have you decided on a gift for the Duke?","No, I can't decide.","How about tulips?","Well, that's a popular gift.","But a nice arrangement would be too expensive for me.","If you'd like to give him flowers, then I can arrange them!","Oh, really?","It's fun to watch them bloom in a pretty arrangement.","Please let us design it for you!","Thank you.","I'll give you the bulbs right away.","We have something to do in that area anyways, we can deliver it too.","Oh really?","I'm sorry to be such a bother.","Really, it's nothing.","Truly?  Well ok then.","I'll write the Duke a letter and give you a map of the area.","This should allow you to get past his guards and to the entrance of his mansion.","Please deliver these to the Duke."]},annabelle:["Flowers?","Sure, I grow a lot of flowers.","You want tulips too?","I had a bunch, but I sold most of them.","Oh really?","I'll give you some extra bulbs instead.","If you create a beautiful pattern you can sell the arrangement for a lot.","Wow really!?","Sure.","Thank you!","You're welcome.","Stop by and chat anytime."],elliott:["What would please a noble?","Well tulips are popular at the moment.","Tulips...?","Yep.  The nobles enjoy extravagant tulip arrangements.  |They brag about who has the most elaborate arrangement.","I don't know what's so fun about flowers,","But I'm interested in the design since nobles pay so much for them.","Do you sell flowers?","No,","Annabelle, from the inn, grows flowers.  Why not ask her?","I'd ask her for some to sell myself, but she'd never give anything to me..."],max:["What would make a nobleman happy?","That seems like the type of thing Elliot would know about."]},t.townChapter3={amber:["Why did the queen die?","It sounds like she was sick.","Sorry, I don't know much about the queen either.","The queen didn't have a lot of friends,","It was rare for her to make public appearances,","I only caught a brief glimpse of her.","Supposedly she was estranged from the king,","but who knows?"],matilda:["The queen?","Sorry, I'm not too sure.","The queen died when I was little...","The rumors were that she wasn't on good terms with the king.","I wonder.","I don't know if that was really the case...","They got married, right?","Yeah.","If you care so much about the queen,","Why don't you go ask her?","Ask her?","Yeah,","The Queen is sleeping in the catacombs of St Anterus.","I see!","Thank you!"],max:["Did the king and queen get along?","I don't know.","I heard rumors that they weren't on good terms.","The queen rarely appeared in public.","But I don't know.","I don't really understand the royalty.","And it's easy to make up rumors.","I'll tell you another rumor.","Queen Evangelina,","Was fascinated by the king's appearance when he fought the dragon.","Just another rumor,","But I certainly believe it.","Everyone was moved by that brave image."]},t.townChapter4={amber:["It's just awful,","The dragon that was sealed in the Temple of Grefalde has awakened.","The king, his brother, and their knights are all headed for the temple.","Do you think they can handle a dragon?","I hope they'll be ok...","I'm sure the dragon wants to take revenge on this country for what happened ten years ago."],annabelle:["The rumor that the dragon has awoken turned out to be true.","The king's younger brother was at the temple recently,","He must have seen the dragon.","Ugh,","I really hope things work out."],matilda:["I've never seen a dragon, but it must be gigantic.","I can't imagine humans fighting with just swords can defeat it...","What's going to happen?","I don't know the details of what happened ten years, |But clearly the dragon wants revenge.","I'm scared."],elliott:["The king himself leads the quest to subdue the dragon.","He's not so young anymore,","but I can still remember what happened ten years ago.","At that time, it was miraculous to contain it in the temple, no one could think of defeating it.","If the king fails, then our kingdom is...","I don't want to think about it."],max:["A questing group led by the king and his younger brother have already left to subdue the dragon.","It was true that the dragon began stirring about half a month ago, and has finally woken up.","It's a pity that all I can do is keep silent and wait for their return.","But I believe that King Edgar will succeed.","If...","If he can't stop it, then the dragon will surely wreak havoc upon the kingdom.","If that happens, then I'll be forced to unsheathe my sword for the first time in years."],ann:["Ok,","We know our destination!","Let's go!"]},t.townChapter5={soldier:[["Oh look, the three from the Temple of Grefalde!","Is it really?","Yes, they must be the ones who saved His Highness at the temple.","Huh?","Why did you run off afterwards?","Oh... ummm we're just busy.","His Highness wishes to thank you.","We're to give you this letter.","Perhaps an invitation to the castle.","Please take a look."],["Let's see what he wrote.",'"Wait for me in the royal garden."',"...","That's it.","What, that's it?","Strange.","The garden was the location of the first assassination attempt.","Hmm.","I don't know, but we have to go."]],amber:["I'm sure you already know,","But His Majesty defeated Sonberk!","I'm so glad.","I am too.","And now we'll have peace again.","By the way,","There are rumors that it was not actually the king who defeated the dragon.","His Majesty is no longer young,","Perhaps it was the prince who defeated the dragon.","Or even an unknown knight!","But that doesn't sound as good, so the king was given credit.","The most bizarre rumor is that some traveling girls killed the dragon.","Ahaha.","But I choose to believe it was the king.  |It doesn't really matter anyways, does it?","We have peace again."],annabelle:["","You're in a pleasant mood today.","It's a great day.","I'm glad the kingdom will remain peaceful.","I'm so happy about that too!",'"That too?"',"Well, there's something else...","Really?","Do you know Matilda?","She was always hiding in the shadows, staring at me.","Oh, that girl.","What happened to her?","She said she likes me!","Huh?","I mean I always knew.","I'm just so happy she was finally direct about it.","We have plans to do something together soon.","That's wonderful!","Congratulations.","Thanks."],matilda:["...","What's wrong?","Uh, yeah yeah...","We're finally at peace.","Yeah, we are!","And I'm very happy about something else now too.","Which has been on my mind for so long...","What happened?","Well, I finally talked to Annabelle.","I said something so strange...","Is that so?","What?","Well... it's a secret.","I'm just glad we can get along again.","Oh!","I'm so glad.","Yeah!  Thanks."],elliott:["Can you believe it?","King Edgar defeated the dragon.","I'm really proud to belong to Bellion today.","I no longer want to only think about myself","I mean,","I think it's ok to give back to the people.","It made me think about things.","I'm really proud of belong to Bellion."],max:["It turned out exactly as I predicted.","King Edgar actually did it.","...","Well, to be honest I did have my doubts.","But King Edgar the Peaceful has defended our realm's peace.","Every citizen of Bellion is proud of our king.","Especially me."]}},1696:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.jack=[["The sun has begun to set.","It's almost time then.","That's right.","I wonder who Jack the Kingkiller is.","Here we go,","You'll find out when we catch him.","I wonder why he would kill the king.","There must be many reasons to kill the king of a country.",'Edgar "The Peaceful King"... killing a gentle king who only wishes for peace...'],["Hey, what are you doing out here?","Ah!?","Oh no, is that...","I asked what you're doing here.","Uh,","What the hell...","We came to pick flowers.","Yeah, that's right!  We're picking flowers!","What?","Why did you bring weapons to pick flowers?","That is...","Hey you,","Who are you to demand to know what we're doing?","With your suspicious appearance, sneaking around in the bushes.","Yeah!","That's of no matter to you.","You all should take your flowers and leave.","You're an assassin!","I can't let you leave!","What?","I don't know who you are, don't get in my way.","I don't want to harm anyone if possible.","Ann, I'm sure this is the guy.","Well, let's catch him.","Let's do it.","Prepare yourself!"],["Uh...","So strong...","You won't be needing these anymore.","Equipment removed","We need to chase him...","Are you ok?  Ann?","Ugh, no.","Huh!?  Where is the time crystal?","He must have taken it with our equipment.","Quickly now, we need to chase him."],["Look over there! Is that King Edgar?","Has Ethelbald not returned yet?","His Highness is still at the Temple of Grefalde.","Negotiations with the dragon do not seem to be proceeding smoothly.","It's hard to say, but it does seem that way, Your Grace.","I see...","Oh great, he's still safe.","But where is Jack?","Maybe he gave up the assassination attempt.  Anyways, let's get out of here.","Alright."]]},1697:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.dog={start:["This forest is dangerous, unless you're here on urgent business I suggest you don't go any further.","Why is it so dangerous?","A ferocious bear has appeared.","A bear?","Not just any bear, this is a truly ferocious beast.","Originally it wasn't a threat, until it tasted its first human.","It remembered the taste, and now aggressively hunts anyone who enters the forest.","Whoa!","Royal hunters, and even a mercenary unit, were dispatched to capture the bear, |But no one's heard from them since.","Is there a reward for bringing down the bear?","Surely there must be a reward.","Hmmm.  I hope the stories have been greatly exaggerated.","It's a good story for those who don't need to enter the forest.","Anyways, I have no desire to see such a ferocious beast.","If someone takes him down, we'd all be happy.","So you are hunter.","What do you hunt in here?","Not ferocious bears, that for sure!  Just small game for meat.","But now I'm just looking for my dogs that ran away.","Your dogs ran away?","My hunting dog had five puppies, they're not even a year old yet.","Sorry to bother you, but if you see any puppies could you bring them to me?",["Sure","I'm awfully busy"],["Thank you.  It was nice to meet you.","I see."]],started:["Thank you!","#{count} puppies remain. ","I'm so lucky to have met you."],solve:["Thank you!  All three of you!","Honestly, I didn't expect all five of them to make it back.","How can I possibly repay you?","Please don't worry about it!","Oh I don't know if you can use this, but please take my extra bow and arrows.","Thank you. I know how important bows are to hunters.","That's right.","We capture our prey with traps and poisoned arrows.","It takes time, but it's the safest way to hunt.","Hmmm.","By the way, the other day, there was a suspicious man who asked me to share the venom used for the poison.","I refused because he was so suspicious looking...","But you all be wary of any strange people you see."],solved:["You saved them all, thanks so much."],dog:{notStarted:"What are you doing out here all alone, buddy?",d1:"Hey, come over here little guy.",d2:"Good boy.",d3:"Hey puppy, over here.",d4:"Hey, come here buddy.",d5:"Come on, the hunter must be worried.",jaquelyn:"#{remain} dogs remain",francisca:"#{remain} dogs remain",foundAll:"That's all of them."}},t.mercenary={start:["Are you two ok!?","Yes, we're ok.","It looks like you're injured...","We came to subdue that monster, Rex Bear, but he overwhelmed us.","It really beat us up.  I'm sorry.","Is there a reward for subduing the bear?","Of course.","The king has offered a generous reward.","Everyone wants this threat removed.","He's not just a hassle to those who use the forest.","We believe the bear is related to the royal illness.","How could this bear possibly be involved in that?","It is said that an old hermit named Drystan lives in the depths of this forest, |And can create medicine to cure any illness.","In order to do so, he requires Rex Bear's blood, however.","I've never heard of using monster blood as an ingredient for medicine.","Is this hermit truly a doctor?","I don't know.","We're merely looking to earn the reward.",'We\'ve only been told "the royal family" but I think it must be King Edgar himself who is sick.',"It must be considering how large the reward is.","I see...","By the way,","If you see the other soldier from my unit, can you tell him where I am?","We got split up when the bear attacked and he must be lost.","I can't withdraw from the forest until I've found him.",["Sure.","I'm really busy."],["Thank you so much.","I see."]],started:"I'm sure he hasn't gone far.",flower:["Isn't this an odd flower?  I've never seen one like it before.","Let's check it out.","Leave it alone."],battle:["Whoa... It was a monster.","Look Ann, a person was inside of it!","Ugh...","Whoa!","Are you ok?","You saved me...","You were eaten by the flower monster?","No, I jumped in on my own.","On your own?","You must be Ann's relative.","Hey!","Actually I fled from Rex Bear,","He chased me here.","In front of me was the flower, behind me was that giant bear.","I didn't intend to end up in the flower's stomach.","I see...","I instantly regretted my decision.","If I knew I would be dissolving slowly in the flower's stomach,","I would have just faced the bear and been killed.","Wow...","But thanks to you three, I'm saved!","What an awful situation.","By the way, if you're part of the mercenary unit,","Your leader is looking for you south of here.","Really?  Thank you for everything.","Please come by again later, I'd like to thank you.","You all need to be careful in this forest."],member1:["I can't find him...","He must be...","Thank you so much for helping my friend.","No way, he was really hiding in the stomach of a flower monster!"],member2:["Thanks again for saving me.","Will you accept a gift from my leader?"],leader:["Oh, you're back!","My soldier told me everything.","He was swallowed by a flower monster.","No wonder we couldn't find him.","Thank you for saving him.  Thank you so much.","We are withdrawing, Rex Bear was too strong."]},t.drystan={door:"I'm away.",start:["Are you Drystan?","Yes, what's it to you?","I heard you can make medicine to cure any illness.","Even more of you.","More?","First the royal family came.","Then the merchants wanting to sell the cure to the royal family.","So far, no one has brought back the ingredients I need!","Can you tell me what you need?","I don't mind.","I don't care who brings me what I need.","First of all I need #{MANDRAKE_COUNT} mandrake roots.","Yes, what else?","Bring it first, then I'll tell you.","I'm a busy man."],progress:["#{MANDRAKE_COUNT} mandrake roots.","Bring them quickly."],solve:["I have collected the mandrake roots.","That was fast.","Hmmm.  Yes this will do."]},t.bear={start:["What's the next ingredient?","Demon blood.","Bring me the blood of that demon which has been hunting humans.","Rex Bear has been stomping around the forest, making a ruckus.","You mean Rex Bear's blood?","Yes.","With the blood of a monster which has absorbed the vitality of many living beings, |I can create the cure.","But the amount that you'll have on your sword won't be enough, |I require an entire bottle.","We'll need to defeat Rex Bear.","Alright, I'll bring you that blood."],progress:"It's Rex Bear. Make sure you kill it and bring me a bottle of its blood.",bearArea:["There are no monsters here?","Strange.  Let's proceed cautiously."],bear:["Ah!","Everyone, let's go!","We did it.","Ok, I've gathered the blood.  Let's return to the hermit."],solve:["I brought it.  Here is Rex Bear's blood.","Show me.","Hmm. It looks like you've really defeated Rex Bear.","Ok, here's the medicine.","Well don't you need this blood to make it?","Disgusting, I don't want that.","Have you ever mixed blood with medicine before?","Then why did you want it!?","Because that stupid bear was annoying.","I couldn't even wander around my own forest.","What about the vitality stuff?  Was that a lie?","What if it was?","The royal family is important, but so is my own well being.","Anyways, I made the medicine.  Don't complain.","I don't need any money.","... Is that so?","Thank you for the medicine.","Drink it yourself, sell it to the royal family, do as you wish.","As you know, the king is sick.  It will sell well.","No, give it to the royal messenger when he returns.","...Hmmmmm.","Okay.  I don't know what you're looking for, but I'll do as you say.","By the way, do you have any guesses as to how the king suddenly became ill?","It's not such a rare occurence to be healthy one day and sick the next.","I was brought to the castle to see the king.","I'm wondering if he really is sick.","What do you mean?","Surely you know that I can distingush between illness and poison.","Poison?","The people attending him didn't seem to know.","The king was poisoned?","I don't know.","I don't want to get involved.","That's why I choose to live out here after all.","Anways I'll give the messenger the medicine, go home."],end:["Ok, we've completed our mission!","Yeah, you did a great job Ann.","Now let's go back.","I want to check the history again."]}},1698:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.cassandra={talk1:["...","What are you looking at?","Is this a prison?","...","Yes.","Did you do something wrong?","Yes.","I'm not allowed outside anymore.","Well that's...","This is a keyless prison made of Aragnier's thread.","The thread that he weaves can't be cut unless he's killed.","Aragnier?","Aragnier is a giant spider monster.","It disappeared after building this prison.","Now no one can find it.","I guess it grew bored of here and moved on."],talk2:["You want to speak to me?","Hey can you bring me some wine if you have the time?","I know it's illegal to purchase alcohol, but I know where to find it.","I'll tell you where to get it.",["OK","No thank you"],"So...","There's a wine cellar at the end of this underground passage.","There's wine in the passage?","Yes.","But the door is locked.","Look closely at the candlestick next to the door.","The key should be hidden there.","Who would hide the key there?","My brother often goes in and out of there.","He's searching for Aragnier's hiding place so he can get me out of here.","I see.","So is it a problem if I take the key?","Don't worry, Aragnier can't be found anyways.","My brother seems to have realized that and hasn't come here recently..","But you'll definitely find the wine.  Please bring me some."],util:{door:["Check","Leave it alone"],key:'"Underground passage key" picked up',unlock:"Unlocked the passage",locked:"It's locked.",wine:'"Wine" picked up'},progress:["Did you find the key?","Look closely at the bottom of the candlestick next to the door.","Did you find the wine yet?"],solve:["Was the wine there?","Yes, a lot of it.","Well done!","Thank you, it's so refreshing.","Being trapped here is so awful, this wine really is a nice comfort.  |I can't thank you enough.","It's ok.  Letting me know where the key was is more than enough payment.","But why is there so much wine stored down here?","Moonshine runners use this passage to smuggle liquor.","The people in the castle purchase the liquor.  This prohibition is ridiculous.","Is that so?","Yep.  Just awhile ago I heard a smuggler enter actually.","Thanks for helping me."],solved:"Thank you for the wine.",tweet:["Is this the wine?","Two more.","Need to find one more","It looks like they're all gathered"]},t.princess={talk1:["Hey!","Who?","How did you get in here?","Um, well...","Who are you two?","This is a dangerous place for children.","Excuse me!  We're fine!","This house belongs to me and Mary.","Your house? What do you mean?","Are you foreigners?","You've never heard of the Princess Mary?","Oh?","They can't be from around here.","This is Loretta. The daughter of the Duke of Troia.","Why are you here!?","It's dangerous, there's monsters.","Leave us.","Mary, who are they?","Report them to your father.","No need to do that.","Even though they've found this passage, they'll never get past Orthrus.","And we're meeting here secretly, we're not supposed to be down here either.","True.","So it's a secret that any of us were ever here.","Uh, yeah.  Sure.","Your father is royalty, right?","What are you doing down here anyways?","I can't possibly say.","Yeah, secret research and experiments that I can't tell my father about.","Don't disturb us.","Ok...","You entered through the underground passage, right?","Correct.","Then did you meet Cassandra on your way?","A woman trapped in the prison of Aragnier's thread.","We met her.","How is she?","In what sense?","Was she angry, or sad?","Uh, hmmm...","It didn't look fun being trapped there...","I see...","You know her?","Yes. she's imprisoned because of me.","It's not your fault, Mary!","Yes, it is...","Hey, don't believe that Mary.","It really wasn't your fault.","I think I understand.","Can I ask what happened?","It's fine.","Cassandra used to be my caretaker.","I was so proud of her.","Cassandra was the sister of a knight, and she was also an excellent swordfighter.","I wanted to be like her.","I always urged her to take me hunting with her.","I asked her day after day, and finally one day she took me to the forest with her.","She found a safe area,","But somehow a powerful monster found us.  They're usually never in that area.","She slayed it while protecting me.","But I was injured.","How unfortunate.","Yes, this eye.","My father was furious and locked her up.  |He was so mad I couldn't persuade him to go easy on her.","I don't hold a grudge regarding my injury.","She's still my hero.","So it's all my fault that she's trapped down there.","How awful.","Hey, it wasn't Mary's fault right?","That's right.  You can't blame yourself.","Even if you say so, it doesn't change the fact that she's locked up.","So that's why you're concerned about how she's doing.","Mary is making a gift for Cassandra","Hey, don't tell them that!","And it's not much of a gift anyways.","It's ok, maybe they can help you.","Sure... I do need some help...","We can help!","Can you bring me #{MAGIC_STONES} carbuncle stones?","Please!","Princess Mary orders it!",["I understand","I'm afraid not"],"Thank you.","There's no need.  They don't have the right to refuse.","Well then, go."],door:["We're experimenting right now.","Don't disturb.","Oh, don't go in!","We're busy in here..."],progress:["#{MAGIC_STONES} carbuncle stones.","Bring them quickly."],solve:["That glow!  They brought the stones!","They did it!","Thank you!","You're welcome.","It's great that they're for a gift for Casssandra.","What are you making?","It's a secret.","Well then, thank you."],solved:["Thank you, you saved my gift.  I was afraid I wouldn't be able to complete it.","Your help is no longer needed, you may leave."]},t.moonshine={talk1:["Wow! Who are you?","Why are you down here?","And who are you?","I heard there is a suspicious guy who brings in moonshine, would that be you?","No, of course not.","Then what's in that barrel?","...","Oh right, this is wine.","Mmmm hmmm.","Are you trying to throw me into a dungeon?","Is that what you're hoping for?","That's not the case...","Can you tell me about this place?","I want to know about this passage, and the castle.","Certainly, I know all about it.","As you know, this underground passage leads to the royal castle.","Beyond this hallway is a door leading to the castle's storage room.","And you deliver your moonshine there?","Yes.  One barrel a day.","I bring it to the back of the underground passage.","When 20 barrels have accumulated, it is brought into the castle.","Does that mean,","That the door into the castle only opens from within?","Yes.","Why are you trying to break into the castle?","You can't get past this room to reach the door anyways.","Why not?","Orthrus is protecting the next room.","You can't open the door if you've been eaten.","Orthrus?","Oh right.  Orthrus is the castle's two headed guard dog.","I always wait for him to sleep and then sneak through, |But three of you could never sneak by him.","Now that you know, you should turn back."],talk2:["Orthrus is the castle's two headed guard dog.  You won't get past him.","Now that you know, you should turn back."],talk3:["Are you seriously going in there?","Stop it.","Do you want to die?","It's the only way.","I don't want to see the corpses of three young women.","Then what should we do?","Hmm...","Ok, it's dangerous but I have a plan.","Let's cooperate.","Hmm?","Ok.","I'll make Orthrus easier for you to beat.","How?","Just leave it to me.","But make sure you beat him, I'm putting my neck out there too.","Just wait a minute.","He really went in there.","With the wine barrel, what's he planning?","Ok!  It's done!","It went well.","What were you doing in there?","Letting him have the barrel of wine.","Once he's finished, he'll be easier to defeat.","I'll lose today's score, but it'll be worth it in the long run.","Come on, go in!"],talk4:["Orthrus is drunk.","Come on, now's your chance."],talk5:["You're safe!","Did you beat it?","Is it done?","Now I don't have to be scared of him anymore.","Thanks for giving him your barrel of wine.","Haha!  Even the dragon in the Temple of Grefalde could be defeated if it was drunk enough!","I'm glad we ran into each other.","What a beneficial exchange.","Thank you!","Well then, good luck sneaking into the castle."],solved:["Well then, be careful."],orthrus1:["Wow, that's a big dog!","Yeah, he looks pretty hostile.","Let's go back for now."],orthrus2:["Alright Orthrus.","Everyone, let's go!","We managed to beat it.","Let's tell the smuggler."]},t.aragnie={jack:["Hey, you!","You three, from the garden...","What are you doing here?","You've crossed the line!","What are you doing this time?","I'm not answering you.","I really don't have the time for this.","Yoink.","Hey, wait!","Why is Jack the Kingkiller here?","Is he the knight, Hector, after all?","Hmmm.","I don't know, but let's go find out."],hector1:["Who are you!?","Uh...","And what are you doing with my key?","We just borrowed this.","Are you Cassandra's brother?","I see.  My sister told you where it was hidden.","Yes.  I am Cassandra's brother.","What are you doing here?","Cassandra told us about everything.","You're looking for Aragnier to break Cassandra out of prison, right?","I hunted that spider for years.","But I gave up on it awhile ago.","Then why are you here?","It's...","I...","I have a confession to make.","I have a grievance to settle with the king.","I want my revenge.","Revenge?","It wasn't always like this!","I once swore allegiance to the king, I was his loyal knight.","I began to resent him after he expelled me.","Even then, I only thought of defeating Aragnier and releasing my sister.","But I searched for years, and I've found nothing!","Then after I'd given up, and I was at my lowest point, a man came to me.","Yes, that man in the black robe. You must have seen him on the way in.","Hey!","What did you talk to him about?","He's a snake.","He fed my anger towards the king, made it grow.","He told me about the smuggler.","Explained that the door will open once twenty barrels have accumulated.","He guided me here.","I've already lost my mind.","He... takes advantage of people's vulnerabilities.","Hey, if you could defeat Aragnier and free Cassandra, would you abandon your revenge?","...I don't know.","Perhaps.","Help us find the spider.","I can't. I couldn't find Aragnier.  I spent years searching.","Leave me alone."],hector2:["We can find Aragnier now!","Hector it's been a long time!","Princess Mary!","Lady Loretta!","There's no honor in killing King Edgar.","Hector, please don't resent my father.","Cassandra's imprisonment and your dismissal are all my fault.","I've caused so much grief.","...","Please, just give me a chance.","A chance?","Yes, look at this.","A lantern?","This is a carbuncle stone lantern.","This light illuminates any traces of Aragnier.","That's...","Mary and I studied for years and came up with this.","These three helped us find the carbuncle stones.","You needed them to make the magical light.","Will this save my sister?","Yes!","Abandon your plot for revenge.","Let's go free Cassandra.","You three, come on!","Huh?","You can't refuse the princess!","I'm afraid we don't have the strength to defeat Aragnier after crafting the lantern.","I see, defeat Aragnier, leave it to us!","Wait.","No, don't wait.","...","...Right.","There's no reason to hesitate.","Let's go free my sister."],cassandra1:["Cassandra.","Hector, who did you bring with you?","Cassandra, it's been so long.","Ah!","Why... Why are you here?","I need to apologize to you.","Huh?","I need to get you out of here.","I can't leave.","And you've no need to apologize.","I need to apologize to you.","Listen, Cassandra.","The princess made a magical lantern to find Aragnier.","What?","Is that true?","Yes.  For you.","Just for me?","There is no reason to ignore the princess's feelings.","...","Now let's light the magic stone.","Whoa!","I can see Aragnier's threads!","Now we can hunt it down."],cassandra2:"...",lamp:["Search","Wait"],aragnie_hector:["I never knew there was such a place!","Aragnier must be hiding here!","Let's proceed.","Whoa!!","This is no good...","Seriously?"],boss:["Here it is!  Aragnier!","It looks strong...","Come on, defeat it!","Wait for my heart to slow down.","We beat it...","Well done!","I'm ashamed.","What an amazing fight.","Let's get back to Cassandra!"],last1:["We were really able to cut the thread!","Amazing!","Cassandra, you're free at last.","...","It appears I'm not free after all.","What, why not?","Your eye.","Every time I see that eye it cuts my heart.","You are being punished in your own prison.","How can I look upon your face?","Cassandra, stop.","Yeah, don't be afraid to leave here.","Don't you realize why Mary went through all this?","Mary has that same feeling when she sees you in prison.","Lady Loretta...","Cassandra, come out.","Let's go some place far away and start over.","...I understand.","How can I thank you?","Cassandra, you spent seven years in this prison because of my mistake.","I didn't do this out of pity, it is my atonement.","Come on, don't look back.  Come out!","Ok... Ok, let's go!"],last2:["They're gone.","Yeah...","Cassandra...","My sister...","Cheer up, Mary."],last3:["Hector has abandoned his plot of revenge against the king.","That's right.  We did our best Ann.","Let's go back and check the history book."]}},1699:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ferdinand={talk1:["Are you ok?  You've gone pale.","......","It's dangerous to stand so close to the edge.","......","Hey!","......Huh, what is it?......","Who are you...?","......","Hey, where am I!?","Huh?","Are you ok?","Where are we?","We're in the catacombs.","The catacombs?","The Catacombs of St Anterus.","What...?","That's in Bellion...","What am I doing in Bellion........","Seriously, are you going to be alright?","Did someone bring you here?","No.","I'll be fine.","I must have come here for a reason.","A voice! I heard a voice.","That's why I came all the way here.","Yeah?","Yes, yes.  I was listening to that voice.","Then you began talking to me.","Hey, hey, the voice. Can you hear it?","Where are all of the voices coming from?","You're scaring me.","I can't hear a thing.","Don't be crazy!","Damn!  Damn!","This is getting pretty weird.","Maybe you should go home?","Damn it.","It's all because of the Renfield family.","The spirits of the slaves I bought from them are haunting me.","You're a slaver?","In that case I bet it's a grudge.","A grudge or a curse...","Or maybe it's a hallucination created by the weight of his guilt.","Hey!  Quit talking like that.","Damn, I don't know if it's a curse,","It's all thanks to the Renfield family that I'm in this mess.","Hey, can you do something about it?","Like what?","I don't know!","I'm just asking!"],talk2:["Please help.","Please do something about the curse."],talk3:["Were you able to do something about the curse?","Hmmm...","How about this amulet?","A nun gave it to me.","That won't help!","Why don't you try it at least?","...","Give it here.","Here you go.","Fine. I'll put this stupid thing on."],talk4:["Whoa!","Who!? Don't grab my feet!","What?","Hey! Stop it!","Whaahhhhhh!","Huh...?","What just happened?","It looked like a hand pulled him down.","Is he... dead?","He fell down the cliff, he must be.","I'm scared."]},t.marianne={start:["Sister, are you ok?","She looks pretty sick.","...","Um, mam?","Oh... yes...","What's wrong?","Nothing... nothing's wrong.","Something's wrong!","You look like you could die at any moment!","Have you been eating properly?","No... no need.","I'm fine, I want to die.","Oh no...","Why?","I'm going to see Marianne.","Marianne?","Yes, Marianne.","My beloved Marianne sleeps in this grave ...","You want to follow Marianne, even if it means death?","Yes, ","I can't live in a world that isn't filled with her singing...","So many lingering regrets.","Hmmm... she must have been something special.","Tell me, what was she like?","The most beautiful voice.","Marianne was a special person.  She sang in both the shrine and the castle.","Even His Royal Highness was friends with her, would shower her with lavish presents.","Her song was so, so special.","She sounds like a great person.","Yes, she was.","And I fell in love with her.","Even though I am a nun married to God.","It's unforgivable.","When she died, so did my heart,","And now here I am.","I see...","How long have you been here?","A few days, I think.","My sense of time is vague, I can't be sure.","Oh,","Wait a minute.","Let me find you some water.","No, no, I don't want to bother you.","Don't worry about it."],started:["Wait a minute.","Let me find you some water.","No, no, I don't want to bother you.","Don't worry about it."],solve:["Here you are, sister,","You need to take care of yourself... I brought some water.","...","Thank you...","You're too generous.","It was nothing.","Refreshing...","Good.","Ah,","Thank you for your kindness, please take this amulet.","Thank you.","By the way, you said Marianne was on good terms with the queen.","Can I ask you a little about the queen?","Yes we talked sometimes, so I know about her.","Um,","Did the queen hold a grudge against the king?","Impossible.","The Queen loved His Majesty until the moment she died.","Oh, I see.","I'm sorry to ask such a strange question.","Come on, can you stand up?","I can help you walk back to town.","No...","My feelings are the same.","That...","I must be with Marianne.","If you had heard her song, you would understand.","I will follow her anywhere, even to the afterlife."],solved:["Marianne..."],item:"Holy Amulet"},t.dario={unavailable:["Uh.","...","It looks like he's busy thinking.","Let's come back later."],start:["You all need to leave this graveyard as soon as you're done.","Why?","Is it because of ghosts?","It's hard to believe, but that's the reason.","In the last few years, many evil spirits have settled in this graveyard.","For awhile now, this has been a depressing place.","So full of sorrow.","I can feel it in the air.","Just like you might feel the sun's warmth on your skin,","I can sense the sorrow of the dead.","It's not harmless, either.","Even if you don't notice it, the longer you're here the more overwhelmed by sorrow you'll become.","That's why you should leave as soon as you're done, don't tarry long.","Especially stay away from the royal and noble's graveyards.","But,","we want to visit the queen's grave.","What?","I don't recommend it.","Why not?","Does the ghost of the queen appear?","Yes.","Well yes, but no, not exactly.","That ghost might look like our queen, but she is not.","What do you mean?","The ghost...","The ghost was made by gathering the souls of the evil spirits who call these catacombs home.","I... I made...","Uh, wait a minute.","You gathered the evil spirits in this graveyard,","and formed them into the shape of the queen?","Yes.","Is that possible?","Why would anyone do that?","I can manipulate the dead.","A man forced me to summon the ghost of the queen.","I don't know why, but he intends to use the queen's ghost to kill His Majesty, the King.","If His Majesty were to die, it... it would be my fault.","Does the ghost not listen to you? You made it, right? ","Impossible.","I am powerless now.","That thing has become a vicious being beyond my power.","Be careful,","The ghost's resentment is directed at His Majesty, the King, |But she shall turn her rage on you if you get too close.","Wow, so scary...","Oh,","Was the man who threatened you wearing a black robe?","How did you know!?","A guess, we've come across him before.","Who is he? Why is he trying to kill the king?","We don't know.","Do you know where he is?","Oh,","He's still in the catacombs.","Really!?","Are you going after him?","The ghost of the queen is dangerous, very dangerous.","I'm aware...","But we have to stop him.","...","I see.","He has the dagger I used to summon the ghost of the queen.","If you get the chance,","maybe you can bring it back to me.","I'll remember, find the dagger."],started:["He has the dagger I used to summon the ghost of the queen.","If you can get it back, bring it to me.","I'll remember, find the dagger."],jack1:["Hey Ann, do you have a feeling like someone is watching us?","I don't know... let's proceed with caution."],jack2:["What are you doing here?","!!!","So this is where you've been hiding!","You disrupted my plans in the underground passage.","Yeah!","What's next?","You've made a fake evil spirit of the queen to kill the king.","That necromancer told you?","Why are you trying to kill the king?","I suppose your persistence deserves an answer.","To protect our kingdom.","To protect...?","How could killing the King Edgar the Peaceful possibly protect the kingdom?","If I explain, will you get out of my way?","...","Exactly, there's no point explaining.","We're finished here.","I can't waste any more time.","You force me to make a regrettable decision.","Yes, it had to come to this.","I can't let you leave alive this time.","It won't be like the last time.  Defend yourself."],jack3:["I lost... how?","Yes, you've been defeated.","Return our crystal first.","The one you stole from us in the royal garden.  You haven't lost it, have you?","...Not yet.","What?","This can't end here, not like this..."],jack4:["!!!","He jumped...","This is bad...","What should we do?","Chase?","Down the bottom of a cliff?","It's impossible.","You're right.","I can't even see the bottom.","He must be dead.","Uh...","How would history change if Jack died here and now?","I don't know, but we haven't prevented the king's death yet.","The ghost of the queen still lingers.","Right.","It seems impossible to chase,","Let's resolve the issue with the queen's ghost.","Yeah, let's do it."],solve:["You're looking for a dagger right?","We recovered it.","Truly?","How on earth?","We're stronger than we look.","So just leave the ghost of the queen to us.","I'm sure we can do something about it.","...","You're going to try to stop her spirit?","Is there a way?","With the dagger.","With the dagger in your posession,","you can see and approach her spirit.","It might be possible to defeat it.","Really!?","Oh.","But that ghost is really dangerous.","Are you really going?","We're going.","I see...","Then you'll need the dagger.","Here, take it.","Thank you.","I'm so sorry...","Please come back alive."],solved:["Please don't lose..."]},t.renfield={start1:["Tomb robbing!?","Hey!  What are you doing here?","Don't scare me like that!","You're a grave robber?","What if I am?","Don't worry about it.","I can't leave this alone.","Are you digging up a noble's grave to steal his gold?","A relative.","This is our tomb.","I don't know what to do.",'"Our tomb?"',"What does that mean?","My ancestral tomb.","This is the grave of the Renfield family.","A family of horrible people.","And I am Ray Renfield.","A man with dirty blood and a traitor to the Renfield family.","Why would you do this to your ancestor's tomb?","The Renfield family is a dirty family.","Sold slaves and girls to the Ferdinand family in order to become noblility.","Selling the people of your own land is as low as it gets.","Trash shouldn't be buried here.","I'll dig it up, burn it, and toss it on the road.","Wow..."],start2:["Whoa!","Something came out!","!!!","They're gone...","What are you doing!","They've died twice now.","Take a look.","...","Well, I'll leave it to you then.","What!?","You're scared!","Hey, come on!","I was just offering to let you fight the ghosts.","It was the polite thing to do..."],started:["Hey, I'm not scared!","Then what...?","...","Don't worry about it, stop being nosy!"],solve:["So strong.","...Thank you.","No big deal, but","I'll give you the key I brought.","You can use it somewhere.","Oh, yeah, thank you.","That's nice of you...","But what will you do?","Won't your family get angry when they find out?","Doesn't matter anymore.","I torched the mansion... killed them all.","Uh...","The only survivors of the Renfield family are myself and my brothers who live far away from here.","Luckily...","Otherwise, more people would have been sacrificed...","If that's the way it is...","...","Well then."],item:"Rusted Key"},t.evangelina={unavailable:["This looks like the royal tomb.","Does anyone else have a bad feeling about this?","Don't be scared."],boss1:["...Hey, is that...","Her Majesty the Queen?","No.","?","...I won't forgive...","Edgar...","Never forgive.","Is this her?","...Kill..."],boss2:["Did we defeat her?","I think so.","Then we've saved the king?","I hope the ghost wasn't really the queen.","Huh?","I didn't think about that,","You think the real queen is different?","I don't know,","Maybe it will say in the history of the kingdom now.","Yeah, let's go back."],solve1:["Please wait.","Huh?","All of you,","Thank you.","Ummm...","Are you really Queen Evangelina?","Yes.","Thank you.","For protecting my resting place from the evil beings pretending to be me.","No, no, it's ok.  You're welcome.","Um,","Do you really hold a grudge against King Edgar?","No.","I know why you ask.","Let me answer.","I never held any grudges.","I was sick,","That's why I wouldn't go out in public much.","That's how the rumors started.","I was always so thankful of Edgar.","Great.","I was ill from the start.","Since the first time I met Edgar.","I was already fated to die.","Still Edgar,","He chose me.","So that's why...","I'm so sorry to hear about your misfortune.","Thank you.","Travelers,","I still wish for peace in Edgar's beloved kingdom.","But I'm very worried.","The dragon that Edgar once sealed in the temple,","awakens.","I want to help.","But I can only offer prayers.","If you want peace in the kingdom,","Please help the king."],solve2:["Oh wait!","I wanted to hear more...","I guess there's nothing to be done.","We can't do anything now, let's go home."]}},1700:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.templeCharacters={soldier1:["It's just as His Majesty said.","The princess slipped through the guards at the castle,","And she followed His Majesty here.","But we can't allow you to go inside."],soldier2:["No matter how many times you ask, I can't let you through.","You can't disobey me, I'll tell my father!","My orders come directly from His Highness.","Please forgive me."],mary:["Oh hey, it's the suspicious people I met in the underground passage.","Hehe, nice to see you again.","What are you doing here?","It's dangerous.","My dad and uncle are fighting the dragon.","We can't just wait here!","But these knights won't let us go any further.","Please do something!","Hmmm, I don't think there's anything that can be done."],loretta:["?","You all look familiar.","Seriously, you forgot?","It's me, Ann. We met in the underground passage.","Oh, now I remember.","What are you doing here?","His Majesty is planning to fight the dragon.","Mary and I rushed here.","Well I'm worried...","If something were to happen to His Majesty, then Mary...","I have to lend my support...","I'm sure things will be ok."],dario:{talk1:["Oh!  You're the necromancer from the catacombs.","It's you three.","Excellent.","I needed to thank you.","Thank you for easing the ghost of the queen.","I'm so sorry about the danger I put you in.","It's alright.","What are you doing here though?","I heard that the Sage of the Forest was called in to help subdue the dragon.","I came with because I was worried.","Feel free to tell me if you need to recover.","Thank you!"],talk2:["Do you need to recover?"],option:["Please","Alright"]},drystan:["You are the wise man from Warkano Forest!","Thanks again for making the medicine.","It's the three girls from Warkano Forest.","Have you come to save the royal house again?","What are you doing here?","I don't like to leave my forest,","But I had to help heal the soliders.","I see.","The dragon has grown reckless.","Many soliders have been lost.","Is the dragon that strong?","They have special powers, unknown to humans.","Wisdom, not power, is essential to counteract the dragon's powers.","A long time ago, the humans who built this temple were wise in these ways.","But it is lost to us all.","Wisdom...","I think this time you should not interfere.","This isn't like getting rid of a bear."],ray:["Hey, you're the graverobber!","Huh?","You're the girls from the catacombs?","What are you doing here?","It's a once in a lifetime opportunity.","I came to see the dragon.","You want to see the dragon?","You must know how dangerous it is!","Why's that matter?","So cocky.","Well, stay safe.","Hmmm."]},t.lorraine={start1:["What are you doing?","I'm repairing this sculpture's mechanism.","Mechanism?","Yes there are numerous hidden mechanisms in the temple.","They open and close doors.","Are you this statue's sculptor?","No.","This temple was made and abandoned long ago.","I just maintain the mechanisms.","It was just a coincidence that I found this mechanism.","Really?  By chance?","Ever since my first visit here I became fascinated with the statues.","I could never forget this statue.","I became a sculptor myself eventually.","One day I was studying this statue so intensely that I completely forgot to eat,","That's when you found this mechanism.","Ah yes, what a wonderful day.","I can still remember my excitement at seeing the mechanism hidden in the pedestal.","It was broken, but I fixed it and made it work again.","Wow.","But anyways, what did you wish to know?"],option:["Ask about the statue","Ask about the dragon"],start2:["The wings of the statue seem to be broken, can't you fix it?","I could, but I won't.","As I said, I'm fascinated by this statue, even in its broken form.","Above all, I respect the person who carved this statue.","I could never modify such perfect work.","That's why I only ensure the mechanisms work.","It took me years though.","Oh you've been here a long time.","Oh, I've spent most my life here."],start3:["Do you know about the dragon?","Of course.","The dragon was sleeping in the basement of this temple, but woke up about half a month ago.","Since then, Prince Ethelbald has been visiting the dragon frequently.","What for?","I believe the prince was negotiating with the dragon on behalf of His Majesty, |Trying to calm the dragon's rage.","The dragon's anger was too great though, His Majesty came here today to try to fix things.","That's right.","We also wish to see the dragon,","Can you trigger the mechanism for us?","Unfortunately, I can't.","This is a special one.","Only a woman named Lyla knows how to work this mechanism, she rode in today with the knights.","Oh...","It's no substitute, but,","Here.","What's this?","If you trigger other mechanisms with this, you can reach the rooftop.","You'll have to study the mechanisms, but I'm sure you'll figure it out.","Thank you!"],item:"Simple Key",started:["Think about how to trigger the mechanisms."],solved:["It looks like you have solved the mechanisms.","If you wish to go underground, look for Lyla."],tweet:["Here's a mechanism.","Can Ann solve it?","Good luck!","I did it!"]},t.allsRight={start:["Hmmm?","The door should have been sealed...","Ah!  A dragon?","Is this your first time meeting a dragon?","Uh, yeah.","I was surprised.","I am part of a dragon tribe.","I'm sorry if you were frightened.","Wow there are many dragons in the kingdom.","There are.","A long time ago, dragons and humans coexisted here.","A war broke out between the two races, and the defeated dragons left the land.","It's an old tale.","But some do remain, like myself.","I see.","Why did you stay?","Because I believe in the god of this land.","God makes no distinction between dragons and people,","God watches over all of us equally.","There's not much here, it's very peaceful.","That's true.","Are the other remaining dragons living in seclusion?","Many are.","Many dragons prefer to live in quiet, remote regions.","But some do not like to hide.","For example, the mighty dragon Sonberk, that your king sealed underground.","Did you come to challenge him too?","Ummm, well yes.","You don't have to worry about me.","I might be a dragon, but Sonberk is violent in my eyes as well.","I know you sought this fight reluctantly.","But Sonberk is a mighty dragon.","You have little hope of defeating him.","How did the king manage it before?","Humans are a crafty race.","Powerful weapons and tools narrowed the gap between man and dragon.","For example, the holy sword Calibrenus, which is sealed in this temple.","That sword is undeniably a threat to us.","Holy sword Calibrenus...","If we had the holy sword could we stand against Sonberk?","The sword would give you hope.","I don't know what sword the king wields.","But you should know,","That sword was sealed away by the dragon tribe Nikke.","I can't retrieve it for you.","Oh I see.","What can we do?","Can you ask that Nikke to lend it to me?","I'm sorry.","I said I understand your fight with Sonberk,","But I could not help you slay a fellow dragon.","I see...","We're in trouble...","...","But I can help create an opportunity to speak with the Nikke.","An opportunity?","The Nikke are reclusive.","They will not respond to a human's call.","But you can leave a message from me.","So you will help!","It requires some preparation.","Preparation?","Collect #{KELUNNE_COUNT} feathers of Kelunne","Use those to make a message.","A message?","I can't say I understand, but I'll help find them!"],solve:["I collected them.","Ok.","Wait a minute.","Finished.","Is this...? A bottle?","I filled the bottle with the smoke of words.","Oh... uh ok.","What is the smoke of words?","The words of the dragons can be seen in the smoke.","Wow, really...","Unplug this bottle near the holy sword.","My words should reach the Nikke.","Ok, thank you!"],solved1:["Near the holy sword, unplug the bottle to release the words.","My words should reach the Nikke."],solved2:["All the world is nothing.","My home here is nothing, just a peaceful place."]},t.calibur={start:["Ok, let's release the words of the Zi.","Hello.","You called?","Um, Sir Nikke?","Yes","I heard Zi's message.","Who are you?","I'm Ann.","Ann, do you seek the holy sword?","Yes!  Can you lend it to me?","It is a wonderous sword.","A terrifying thing to us dragons.","It takes courage to hand it over to a human.","I will convince you by any means necessary.","Any means?","Any means.","Why do you seek the holy sword?","Well...","Do you wish to slay a dragon with it?","Uh...","Tell me.","I wish to defeat the dragon, Sonberk.","Slay Sonberk.","Poor Sonberk.","A violent dragon, but still my friend.","Is that so?","He has been sealed away for ten years,","And has finally woken up.","Just to be hunted down.","It's tragic...","Poor Sonberk.","...","I know it can't be helped.","This is human land now.","It's natural that they wish to oppress it.","I don't wish to oppress your kind.","Is it possible to persuade Sonberk not to release his wrath upon our kingdom?","I don't think so.","I see...","Only the holy sword can convince him.","Alright,","I shall let you wield it.","It was forged by humans after all.","It's only fair to give it back to them.","You are free to use it to protect your kingdom.","Really?","Really.","But not anyone can wield this.","Yes...","The one who forged this was a mighty warrior.","Are you up to the task of wielding it?","You must prove yourself.","Prove ourselves?","Fight me.","I see.","Are you up to the task? ","Prepare yourself!"],talked:["Are you ready?"],option:["Yes","No"],cancel:["Then come back when you're ready."],solve:["Wow.","You're very strong.","Alright.  I surrender.","Well done.  I am a less powerful dragon though, do not become overconfident.","Well then... the sword.","Here, take it.","Thank you.","Yes.  It looks good in your hands.","Thank you.","Yeah...","Well...","Since I no longer have to keep an eye on that sword,","I might go on a trip somewhere.","Ah,","By the way,","Are you all cheating?","Huh?","I feel like time is distorted when you are nearby.","...","Well,","Probably another power crafted by you humans."]},t.lute={unavailable:["Ah...","Taking a nap."],start:["Hello, young lady.","What a marvelous sword you have.","You've come to challenge the dragon then?","That's right.","I can't find a way underground though...","Oh, I see.","What you are looking for is this goddess statue.","Really!?","You must be Lyla.","Really.","Did you speak with the sculptor?","Only you can trigger this mechanism.","Correct.","Do you want me to open it?","Of course! ","What will you do for me to open it?","Well,","Anything!","Anything?","Yeah.","I don't really want you to do that much...","Oh,","Then can you open it?","No, you have to do something.","Uh...","Then, hmmm,","Do you enjoy apples?","I like them.","So!","I'll ask you to find me a beautiful one.","Leave it to me!"],started:["Have you found a beautiful apple?","I'm looking forward to it."],solve1:["I've collected the apples!","Very nice."],answer:[["Yes, delicious.","Thank you."],["Hmmm this apple isn't that good.","Well, I guess it can't be helped."]],solve2:["Well I made a promise.","I'll open it now.","What kind of mechanism is it?","I must play my lute.","The door opens in response to the music.","Huh.","Listen."],solve3:["Well, it should be opened now.","Wow!","Why does the sound move the device?","I don't really understand either.","I think the goddess responds to the love of music.","What do you mean?","Even if you play the same tune, it won't open unless you pour your heart into it.","But if you play it with all your heart, it will open.","I'm sure the person who made this mechanism also loved the goddess.","That's nice.","These apples are beautiful.","You must have taken great care in picking them.","I'm sure the sculptor of this statue took similar care when carving the likeness of his goddess.","Hehe.","Well then,","Do be careful.","Thank you!"],option:["Pick up","Don't need"],apple:'"Apple" picked up',tweet:"Five apples have been gathered."},t.dragonKiller={soldier:["The dragon... was much more powerful than we expected...","How did the king manage to beat the dragon ten years ago...","I want to help His Majesty... but I can't move anymore..."],block:["Hey, don't you want to talk to the injured soldiers?"],start:["Are you ok!?","It's you...","Did the dragon hit you?","Yes...","Brother...","You came to aid Edgar?","Yes.","Are you the prince?","Yes","Edgar and the dragon are ahead.","You're badly hurt.","Don't worry about me.","My brother fight's alone now.","Edgar...","Help my brother..."],started:["Have we met somewhere before?","There's no time to gossip."],confirm:["The dragon's lair is beyond."],confirmOption:["Go ahead","Stop"],king1:["Edgar, it's good you finally found the courage to show yourself.","I could never go home while the man who sealed me away for ten years walks free.","Or... do you really think you can best me again, like ten years ago?","Don't be so arrogant.","Sonberk, tell me something.","Will your anger subside if I offer you my head here and now?","You worry about your kingdom?","You seek peace of mind.","You are here now.","Your brother Ethelbald has fulfilled his promise.","You wish to trade your own life for the good of your kingdom.","Yes.","I don't know what my brother agreed to, but that's what I want.","Shower me in flame until you've satisfied your anger."],king2:["Huwa!","!","Hurry up!","...","He's collapsed!"],sonberk:["Sonberk! Prepare yourself!","Who?","You're not the king's knights.","We are merely citizens of the realm.","Just a citizen.","Yet you came here to help the king?","That's right.","And what do little girls think they can do to me?","Kill you.","With this sword.","That sword is...","I know that sword.","Why is it in your possession?","No matter.","It's still in the hands of a little girl.","If you wish to die here next to your king, I shall grant your wish.","Come on!"],solve:["Finished!  Defeated!","We did it Ann.","Somehow.","Okay, we need to help the king and his knights!","Yes.","Once we've helped them, we can disappear.","Ok!"]}},1701:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.peaceful={soldier:["An assassin dressed in a black robe.","According to His Royal Highness, we're to shoot the assassin on sight.","An assassin dressed in a black robe..."],talk1:["You came.","Why are you here?","I was the one who sent you the summons.","Huh...?","That face injury...","...","Let me introduce myself again."],talk2:["I'm the king's younger brother, prince Ethelbald.","!","I'm so sorry.","I lied.  I used my sword against you.","You of all people?","You've tried to kill the king so many times...","Oh no doubt.","I plotted to kill the king.","Please let me explain everything.","You know that the king fought the dragon ten years ago, yes?"],question:["We know","We didn't know"],talk3:["Yes,","Ten years ago, the king fought against Sonberk and sealed it in the Temple of Grefalde.","But about half a month ago,","Custodians at the Temple of Grefalde told me the dragon was awakening.","Sonberk resented the king and wanted revenge.","I went to the Temple of Grefalde many times,","To negotiate with Sonberk on behalf of my older brother.","I persuaded Sonberk to not seek revenge on the kingdom in exchange for whatever it wanted.","I offered everything I could think of, but Sonberk's wishes were consistent:","The king's death in exchange for leaving the kingdom in peace.","Eventually I gave in.  I agreed to Sonberk's demands.","Regretfully, I thought I would save the kingdom at the cost of losing my brother.","Oh, that's awful.","Do you remember the first time we ran across each other here?","That day I was trying to kill my brother.","But you three stopped me.","And I robbed you of this crystal.","The time crystal!","This is clearly a wonderous artifact.","Soon after that day, this crystal took me to another world.","I didn't know what had happened, but soon I realized something,","I was here... but in a different era.","Was it...","The era from when you came?","Yes.","The crystal connects two periods of time.","You went to our time.","What did you see there?","This royal castle...","In ruins, our entire kingdom was destroyed.","Eh!?","That shouldn't be...","I saw it with my own eyes.","It was unquestionably the work of a dragon.","Sonberk burned down our kingdom because I failed to kill my brother that day.","That's...","I don't know what the kingdom's future was like before you came.","But I knew that Sonberk's wrath had to be contained at all costs.","I understood that much.","So, even after returning to this era, I kept looking for another opportunity to kill the king.","...","But in the end you stopped your attempts on the king and faced Sonberk yourself, right?","I changed my mind.","Originally I had never thought of defeating a dragon in the first place.","But after you challenged and defeated me in the catacombs,","I decided to confront the dragon with my brother.","In the end I broke and you helped me.","It was the king who defeated Sonberk to begin with.","That's right.","I decided to try to help him do it again.","Anyways, I no longer had a choice.","I'm sorry to call you here like this.","I thought there might be trouble if I didn't return this crystal."],item:"Time Crystal",talk4:["Thank you.","What a surprise,","I still haven't wrapped my head around it all.","I'm glad to finally learn what you were doing.","You have always been a mystery.","And then,","I'm glad you reconsidered the assassination at the end.","Now that we've finished our purpose here, we wish to go home.","Honestly, I was a little worried we would never make it back...","But,","You can rest assured that this era is one of peace.","...","Yes, you shouldn't have to worry anymore.","Come on... go home.","Yeah.","...","Goodbye."],end1:["My role is over, I won't run from the guards.","The times shine brightly.","Our peaceful kingdom,","Ruled by King Edgar the Peaceful ."],end2:["Hey, over there!","The assassin in a black robe!","Don't let him get away, shoot!","So, do it."],end3:["A King,|And a kingdom,","Sung of through the ages."]}},1702:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1703),r=a(1704),s=a(1705),o=a(1706),i=a(1707),l=a(1708),h=a(1709),c=a(1710);t.default={langLabel:"",chapter:[{name:"",title:"",sub:"Jack the Kingkiller"},{name:"1",title:"",sub:"Warkano Forest"},{name:"2",title:"",sub:"Troia's Secret Passage"},{name:"3",title:"",sub:"Catacombs of St Anterus"},{name:"4",title:"",sub:"Temple of Grefalde"},{name:"",title:"",sub:"Edgar the Peaceful"}],area:{town:"",castle:" - ",forest:"",underpass:"",catacomb:"",temple:""},areaSub:{bellion:"",room:"",forest:{a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:""},underpass:{a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:""},aragnie:"",catacomb:{a:"",b:"",c:"",d:"",e:"",f:"",g:""},temple:{a:"",b:"",c:"",d:"2",e:"",f:"",g:""}},mission:{m0_1:{title:"",sub:"Jack the Kingkiller"},m1_1:{title:"",sub:"Matthew and Hunting dogs"},m1_2:{title:"",sub:"Isambard mercenaries"},m1_3:{title:"",sub:"Philosopher Drystan"},m1_4:{title:"",sub:"The Rex Bear"},m2_1:{title:"",sub:"Incarcerated Cassandra"},m2_2:{title:"",sub:"Princess Mary and Loretta"},m2_3:{title:"",sub:"Dionysus' Moonshine"},m2_4:{title:"",sub:"Aragnie's lair"},m3_1:{title:"",sub:"Lord Ferdinand's Curse"},m3_2:{title:"",sub:"Die after listening Marianne's song."},m3_3:{title:"",sub:"Dario's Sorrow"},m3_4:{title:"",sub:"Sins of the Renfield family"},m3_5:{title:"",sub:"Ghost of Princess Evangelina"},m4_1:{title:"",sub:"Grefalde's Sacred statue"},m4_2:{title:"",sub:"All's right with the world"},m4_3:{title:"",sub:"Caliburnus"},m4_4:{title:"",sub:"Music for goddess"},m4_5:{title:"",sub:"The Dragonkiller King"},m5_1:{title:"",sub:"Edgar the Peaceful"}},chara:{ann:"",jaquelyn:"",francisca:"",king:"",jack:"",ethel:"",guard:"",soldier:"",injuredSoldier:"",amber:"",elliott:"",max:"",annabelle:"",matilda:"",hunter:"",zi:"",mary:"",loretta:"",hector:"",cassandra:"",nikke:"",dario:"",drystan:"",queen:"",sonberk:"",fdn:"",klaus:"",injuredLeader:"",injuredMercenary:"",dionysus:"",ray:"",sister:"",lyla:"",unknown:""},weapon:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:"",11:"",12:"",13:"",14:"",15:"",16:"",17:"",18:"",19:""},ability:{1:"",2:"",3:""},battler:{jack:"",bee:"",bee2:"",slime:"",mandrake:"",wolf:"",flower:"",bear:"",goblin:"",goblin2:"",carbuncle:"",orthrus:"",gargoyle:"",succubus:"",aragnie:"",phantom:"",skull:"",ghost:"",spectre:"",wraith:"",dullahan:"",queen:"",bird:"",lizard:"",tree:"",knight:"",thief:"",nikke:"",dragon:""},item:{dragonScale:""},ui:{sub:{menu:"",close:"",quests:"",characters:"",save:"",load:"",settings:"",battleResult:""},setting:{autoDetection:"",clickToAction:"",virtualStick:""},battle:{attack:"",counter:""},recommendedLevel:"",undefinedArea:"",completed:""},missionStart:"#{title}",missionComplete:"#{title}",unlockArea:"#{area}",gotItem:"#{name}",hpRecovered:"HP",weaponDrop:"#{name} ",itemDrop:{mandrake:"#{num}",magicStone:"#{num}",water:"#{num}",dagger:"",kelunne:"#{num}"},roomBook:n.roomBook,roomEv:n.roomEv,townGreeting:r.townGreeting,townGreeting4:r.townGreeting4,townBoard:r.townBoard,townCommon:r.townCommon,townChapter0:r.townChapter0,townChapter1:r.townChapter1,townChapter2:r.townChapter2,townChapter3:r.townChapter3,townChapter4:r.townChapter4,townChapter5:r.townChapter5,jack:s.jack,dog:o.dog,mercenary:o.mercenary,drystan:o.drystan,bear:o.bear,cassandra:i.cassandra,princess:i.princess,moonshine:i.moonshine,aragnie:i.aragnie,ferdinand:l.ferdinand,marianne:l.marianne,dario:l.dario,renfield:l.renfield,evangelina:l.evangelina,lorraine:h.lorraine,allsRight:h.allsRight,nikke:h.nikke,calibur:h.calibur,lute:h.lute,dragonKiller:h.dragonKiller,peaceful:c.peaceful,templeCharacters:h.templeCharacters,storyTelling:["\n\n"," ","\n","",""],missionDescription:{m0_1:{base:"",first:"",second:""},m1_1:{base:"5",cnt:"#{current}/5"},m1_2:{base:"",started:"",solved:""},m1_3:{base:"",cnt:"#{current}/#{max}"},m1_4:{base:"\n",bear:"",solved:""},m2_1:{base:"",wip:"",cnt:"#{current}/3"},m2_2:{base:"\n",cnt:"#{current}/#{max}"},m2_3:{base:"",wip:"",solved:""},m2_4:{base:"\n",search:"",solved:""},m3_1:{base:"",started:"",solved:"",completed:""},m3_2:{base:"",started:"",cnt:"#{current}/#{max}"},m3_3:{base:"",started:"",solved:""},m3_4:{base:"",started:"",cnt:"#{current}/5"},m3_5:{base:"",started:""},m4_1:{base:"",started:"2"},m4_2:{base:"\n",started:"",cnt:"#{current}/#{max}"},m4_3:{base:"",started:"",talked:""},m4_4:{base:"",started:"",cnt:"#{current}/#{max}"},m4_5:{base:"",started:""},m5_1:{base:"",started:""}},afterBattle:{m1_3:"",m2_2:"",m3_2:"",m4_2:""},tweet:{ca1:"",ct1:"",fr1:"",tm1:"",aplg:"",aplb:"",clbr:"",un1:"",lost:{francisca:["",""],jaquelyn:["",""]}},mapEvent:{underpass8:{candle:""},temple6:{statue:"",option:["",""]},room1:{bed:["",""]},catacomb1:{guard:["",""]},catacomb6:{door:""}}}},1703:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.roomBook=[["",""],["",""],["",""],["",""],["","",""],["","",""]],t.roomEv=[[["","","","",""],["",""],["",""],["","","","",""],["","","","","","","","","","","","","","","","","","","","","","","","",""]],[["","","","","",""],["","","","","","","","","","","","","","","","","","","","","","","","","","","",""]],[["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]],[["","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]],[["","","","","","","","","","","","","","","","","","","","","","",""]],[["","","","","","","","","","","","","20","","","","","","","","","","","","","","","","","","","","","","","","","",""]]]},1704:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.townGreeting={amber:"",elliott:"",max:"",annabelle:""},t.townGreeting4={amber:"",matilda:""},t.townBoard=["","","","","",""],t.townCommon={amber:"",annabelle:[["","","","","","","","","","","","","","","","",""],["","","","","","","","","","","","","",""],["","","","","","",""],["","","","",""],[""]],matilda:[["","","","","","","","","","","","","","","","","","","","","",""],["","","","","","","","","","","",""],["","","","","","","","","","","",""],["","","","",""],["",""]],elliott:[["","","","","","","","","","","","","","","","","",["",""],"","",""],["","","","","","",""],["","","","","","","","","","","","","",""],[""]],max:[["","","","","","","","","","","",""],["","","","",""],["","","",""],[""]]},t.townChapter0={ann:["","",""],amber:["","","","","","","","","","","","","","",""],annabelle:["","","","","","","","","","","",""],matilda:["","","","","","","","","","","","","","","","","","","","",""]},t.townChapter1={amber:["","","","","","","",""],annabelle:["","","","","","","","","","","","","","",""],elliott:[["","","",""],["","","","40","","","","","","","","","","","","","","","","","","","","","","","","",""],["",""]]},t.townChapter2={amber:{question:["","",""],answer0:["","","","","",""],answer1:["","","","","","","","","","","","",""],solve:["","","","","","","","","","","","","","","","","","",""]},annabelle:["","","","","","","","","","","",""],elliott:["","","","","","","","","",""],max:["",""]},t.townChapter3={amber:["","","","","","","",""],matilda:["","","","","","","","","","","","","","",""],max:["","","","","","","","","","","","",""]},t.townChapter4={amber:["","","","","",""],annabelle:["","","","",""],matilda:["","","","",""],elliott:["","","","","",""],max:["","","","","","",""],ann:["","",""]},t.townChapter5={soldier:[["","","","","","","","","",""],["","","","","","","","",""]],amber:["","","","","","","","","","","","","","",""],annabelle:["","","","","","","","","","","","","","","","","","","",""],matilda:["","","","","","","","","","","","","","","","",""],elliott:["","","","","","","",""],max:["","","","","","",""]}},1705:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.jack=[["","","","","","","","",""],["","","","","","","","","","","","","","","","","","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""]]},1706:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.dog={start:["","","","","","","","","","","","","","","","","","","","","51","",["",""],["",""]],started:["","#{count}",""],solve:["","","","","","","","","","","","",""],solved:[""],dog:{notStarted:"",d1:"",d2:"",d3:"",d4:"",d5:"",jaquelyn:"#{remain}",francisca:"#{remain}",foundAll:""}},t.mercenary={start:["","","","","","","","","","","","","","","","","","","","","","","","","",["",""],["",""]],started:"",flower:["","",""],battle:["","","","","","","","","","","","","","","","","","","","","","","","","","",""],member1:["","","",""],member2:["",""],leader:["","","","","",""]},t.drystan={door:"",start:["","","","","","","","","","","","#{MANDRAKE_COUNT}","","",""],progress:["#{MANDRAKE_COUNT}",""],solve:["","",""]},t.bear={start:["","","","","","","","","",""],progress:"",bearArea:["",""],bear:["","","",""],solve:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],end:["","","",""]}},1707:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.cassandra={talk1:["","","","","","","","","","","","","","","",""],talk2:["","","","",["",""],"","","","","","","","","","","","","","",""],util:{door:["",""],key:"",unlock:"",locked:"",wine:""},progress:["","",""],solve:["","","","","","","","","","","",""],solved:"",tweet:["","2","1",""]},t.princess={talk1:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""," ","","","","","","","","","","","","","","","","","","","","","","","","","","","#{MAGIC_STONES}","","",["",""],"","",""],door:["","","",""],progress:["#{MAGIC_STONES}",""],solve:["","","","","","","",""],solved:["",""]},t.moonshine={talk1:["","","","","","","","","","","","","","","","","","","","1","20","","","","","","","","","","","",""],talk2:["",""],talk3:["","","","","","","","","","","","","","","","","","","","","","","1","",""],talk4:["",""],talk5:["","","","","","","","","",""],solved:[""],orthrus1:["","",""],orthrus2:["","","",""]},t.aragnie={jack:["","","","","","","","","","","","",""],hector1:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","20","","","","","","","","",""],hector2:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],cassandra1:["","","","","","","","","","","","","","","","","","","","","","",""],cassandra2:"",lamp:["",""],aragnie_hector:["","","","","",""],boss:["","","","","","","","",""],last1:["","","","","","","","","","","","","","","","","","","","7","","",""],last2:["","","","",""],last3:["","",""]}},1708:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ferdinand={talk1:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],talk2:["",""],talk3:["","","","","","","","","",""],talk4:["","","","","","","","","","",""]},t.marianne={start:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],started:["","","",""],solve:["","","","","","","","","","","","","","","","","","","","","","","","","","","",""],solved:[""],item:""},t.dario={unavailable:["","","",""],start:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],started:["","",""],jack1:["",""],jack2:["","","","","","","","","","","","","","","","","","","","","",""],jack3:["","","","","","",""],jack4:["","","","","","","","","","","","","","","","","",""],solve:["","","","","","","","","","","","","","","","","","","","","","","","",""],solved:[""]},t.renfield={start1:["","","","","","","","","","","","","","","","","","","","","","","","",""],start2:["","","","","","","","","","","","","",""],started:["","","",""],solve:["","","","","","","","","","","","","","","","","",""],item:""},t.evangelina={unavailable:["","",""],boss1:["","","","","","","","",""],boss2:["","","","","","","","","",""],solve1:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],solve2:["","","",""]}},1709:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.templeCharacters={soldier1:["","","",""],soldier2:["","","",""],mary:["","","","","","","","",""],loretta:["","","","","","","","","","","",""],dario:{talk1:["","","","","","","","","","","",""],talk2:[""],option:["",""]},drystan:["","","","","","","","","","","","","","","","","",""],ray:["","","","","","","","","","","",""]},t.lorraine={start1:["","","","","","","","","","","","","","","","","","","","",""],option:["",""],start2:["","","","","","","","",""],start3:["","","","","","","","","","","","","","","","","","","",""],item:"",started:[""],solved:["",""],tweet:["","","",""]},t.allsRight={start:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","#{KELUNNE_COUNT}","","",""],solve:["","","","","","","","","","","","",""],solved1:["",""],solved2:["",""]},t.calibur={start:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],talked:[""],option:["",""],cancel:[""],solve:["","","","","","","","","","","","","","","","","","","","",""]},t.lute={unavailable:["",""],start:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],started:["",""],solve1:["",""],answer:[["",""],["",""]],solve2:["","","","","","",""],solve3:["","","","","","","","","","","","","","","","",""],option:["",""],apple:"",tweet:"5"},t.dragonKiller={soldier:["","",""],block:[""],start:["","","","","","","","","","","","","","",""],started:["",""],confirm:[""],confirmOption:["",""],king1:["","","","","","","","","","","","","",""],king2:["","","","",""],sonberk:["","","","","","","","","","","","","","","","",""],solve:["","","","","","",""]}},1710:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.peaceful={soldier:["","",""],talk1:["","","","","","",""],talk2:["","","","","","","","","",""],question:["",""],talk3:["","","","","","","","","","","","","","","","","","","","","","","","","","2","","","","","","","","","","","","","","","","","","","","","","","","","","",""],item:"",talk4:["","","","","","","","","","","","","","","","",""],end1:["","","",""],end2:["","","",""],end3:["",""]}},1711:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1712),r=a(1713),s=a(1714),o=a(1715),i=a(1716),l=a(1717),h=a(1718),c=a(1719);t.default={langLabel:"",chapter:[{name:"",title:"",sub:""},{name:"1",title:"",sub:""},{name:"2",title:"",sub:""},{name:"3",title:"",sub:""},{name:"4",title:"",sub:""},{name:"",title:"",sub:""}],area:{town:"",castle:"",forest:"",underpass:"",catacomb:"",temple:""},areaSub:{bellion:"",room:"",forest:{a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:""},underpass:{a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:""},aragnie:"",catacomb:{a:"",b:"",c:"",d:"",e:"",f:"",g:""},temple:{a:"",b:"",c:"",d:"2",e:"",f:"",g:""}},mission:{m0_1:{title:"",sub:""},m1_1:{title:"",sub:""},m1_2:{title:"",sub:""},m1_3:{title:"",sub:""},m1_4:{title:"",sub:""},m2_1:{title:"",sub:""},m2_2:{title:"",sub:""},m2_3:{title:"",sub:""},m2_4:{title:"",sub:""},m3_1:{title:"",sub:""},m3_2:{title:"",sub:""},m3_3:{title:"",sub:""},m3_4:{title:"",sub:""},m3_5:{title:"",sub:""},m4_1:{title:"",sub:""},m4_2:{title:"",sub:""},m4_3:{title:"",sub:""},m4_4:{title:"",sub:""},m4_5:{title:"",sub:""},m5_1:{title:"",sub:""}},chara:{ann:"",jaquelyn:"",francisca:"",king:"",jack:"",ethel:"",guard:"",soldier:"",injuredSoldier:"",amber:"",elliott:"",max:"",annabelle:"",matilda:"",hunter:"",zi:"",mary:"",loretta:"",hector:"",cassandra:"",nikke:"",dario:"",drystan:"",queen:"",sonberk:"",fdn:"",klaus:"",injuredLeader:"",injuredMercenary:"",dionysus:"",ray:"",sister:"",lyla:"",unknown:"???"},weapon:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:"",11:"",12:"",13:"",14:"",15:"",16:"",17:"",18:"",19:""},ability:{1:"",2:"",3:""},battler:{jack:"",bee:"",bee2:"",slime:"",mandrake:"",wolf:"",flower:"",bear:"",goblin:"",goblin2:"",carbuncle:"",orthrus:"",gargoyle:"",succubus:"",aragnie:"",phantom:"",skull:"",ghost:"",spectre:"",wraith:"",dullahan:"",queen:"",bird:"",lizard:"",tree:"",knight:"",thief:"",nikke:"",dragon:""},item:{dragonScale:""},ui:{sub:{menu:"",close:"",quests:"",characters:"",save:"",load:"",settings:"",battleResult:""},setting:{autoDetection:"",clickToAction:"",virtualStick:""},battle:{attack:"",counter:""},recommendedLevel:"",undefinedArea:"",completed:""},missionStart:'"#{title}" ',missionComplete:'"#{title}" ',unlockArea:'"#{area}" ',gotItem:'"#{name}',hpRecovered:"HP",weaponDrop:"#{name} ",itemDrop:{mandrake:" #{num} ",magicStone:" #{num} ",water:" #{num} ",dagger:"",kelunne:" #{num} "},roomBook:n.roomBook,roomEv:n.roomEv,townGreeting:r.townGreeting,townGreeting4:r.townGreeting4,townBoard:r.townBoard,townCommon:r.townCommon,townChapter0:r.townChapter0,townChapter1:r.townChapter1,townChapter2:r.townChapter2,townChapter3:r.townChapter3,townChapter4:r.townChapter4,townChapter5:r.townChapter5,jack:s.jack,dog:o.dog,mercenary:o.mercenary,drystan:o.drystan,bear:o.bear,cassandra:i.cassandra,princess:i.princess,moonshine:i.moonshine,aragnie:i.aragnie,ferdinand:l.ferdinand,marianne:l.marianne,dario:l.dario,renfield:l.renfield,evangelina:l.evangelina,lorraine:h.lorraine,allsRight:h.allsRight,nikke:h.nikke,calibur:h.calibur,lute:h.lute,dragonKiller:h.dragonKiller,peaceful:c.peaceful,templeCharacters:h.templeCharacters,storyTelling:["\n\n","","\n","","\n"],missionDescription:{m0_1:{base:"",first:"",second:""},m1_1:{base:"",cnt:"#{current}/5"},m1_2:{base:"",started:"",solved:""},m1_3:{base:"",cnt:"#{current}/#{max}"},m1_4:{base:"",bear:"",solved:""},m2_1:{base:"",wip:"",cnt:"#{current}/3"},m2_2:{base:"\n",cnt:"#{current}/#{max}"},m2_3:{base:"",wip:"",solved:""},m2_4:{base:"\n",search:"",solved:""},m3_1:{base:"",started:"",solved:"",completed:""},m3_2:{base:"",started:"",cnt:"#{current}/#{max}"},m3_3:{base:"",started:"",solved:""},m3_4:{base:"",started:"",cnt:"#{current}/5"},m3_5:{base:"",started:""},m4_1:{base:"",started:""},m4_2:{base:"\n",started:"",cnt:"#{current}/#{max}"},m4_3:{base:"",started:"",talked:""},m4_4:{base:"",started:"",cnt:"#{current}/#{max}"},m4_5:{base:"",started:""},m5_1:{base:'""',started:""}},afterBattle:{m1_3:"",m2_2:"",m3_2:"",m4_2:""},tweet:{ca1:"",ct1:"",fr1:"",tm1:"",aplg:"",aplb:"",clbr:"",un1:"",lost:{francisca:["","..."],jaquelyn:["",""]}},mapEvent:{underpass8:{candle:""},temple6:{statue:"",option:["",""]},room1:{bed:["",""]},catacomb1:{guard:["",""]},catacomb6:{door:""}}}},1712:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.roomBook=[["",""],["",""],["",""],["",""],["","",""],["","",""]],t.roomEv=[[["","","| ","",""],["",""],["",""],["...","","","",""],["","","| ","","","","","","","","",""," ","","","","","","","","...","","","",""]],[["","","","","...",""],["...","","","","","...","","","...","","","","","...","","","","","","","...","","","...","... ","","",""]],[["","","","",'""',"","","","","","...","","","","","","","","","","","","","","","","","","","","","","","",""," |","","...","",""]],[["","","","","...","","","","...","","","","","","","","","","","","...","","","","","","","","",""]],[["","","","","","","","","","...","","...","","...","","","","","","","","",""]],[["","...","","","","","","","","...","",'""',"","...","","","","","","","","","","","","","","","","","","...","","","...","","","",""]]]},1713:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.townGreeting={amber:"Nice weather",elliott:"Yo",max:"How are you?",annabelle:"Hello"},t.townGreeting4={amber:"This is awful...",matilda:"So scary..."},t.townBoard=["Local news is posted here.",'The ferocious monster "Rex Bear" is loose in the forest.  A reward for subduing it is posted.',"There's a post regarding the prohibition law, and the penalities for selling alcohol.","There's a post about the fire in the Renfield family's mansion.","There's a post about the dragon's awakening, and forming a team to subdue it.","There's a post about King Edgar defeating the dragon."],t.townCommon={amber:"It's nice weather today.",annabelle:[["Greetings traveler.","Have you decided on an inn for the evening?","If you haven't, you can stay with us.","Thank you,","but we've already chosen an inn.","I see,","But it's even nicer here than the other inn.","Is that so?","It's a little expensive,","But I can promise we have the best service in town.","This is a luxury inn?","It doesn't look like it...","Oh no, it's not.","You'll see why when you stay here.","I'll do my best to make sure you have a pleasant stay, sister.","?","Please, come on in if you feel like it."],["Ah, hello sister.","Would you like to have some lunch?","Our bread is freshly baked.","Oh wow!","By all means, please come in.","Our fresh bread attracts many customers.","Is that so?","Of course.","For example, do you see the girl hiding in the shadows over there?","For some reason she only comes to buy our bread when I'm not around.","Why?","I wonder why myself.","Her name is Matilda.","Cute."],["Do you know the story of the dragon which attacked ten years ago?","King Edgar fought the dragon and sealed it in the Temple of Grefalde.","Daddy and Mommy always told me this story.","Our inn also has a painting of King Edgar fighting the dragon.","Please take a look if you like.","My dad paid a fortune for the painting, but it's brought us a good reputation.","I'm proud of this story of the Bellion people."],["There's Matilda,","We used to be pretty good friends.","But now she's avoiding me.","Anytime I casually approach her, she runs away in a hurry.","Isn't it cute?"],["It's nice weather today."]],matilda:[["Hello.","Why are you standing in the shadows?","Oh, right.","This must look suspicious.","I'm watching Annabelle at the inn so she doesn't do something wrong.","Is she a bad girl?","No, she isn't. She's a good girl.","We used to play together a lot...","So why are you watching her?","Apparently she began a suspicious job recently.","So... I'm worried...","Then you should stop her.","You two were good friends before?","That's right...","I'm embarrassed to talk with her...","I wonder why...","Is that so?","Well that happens sometimes.","I'm sure you two can get along again.","I hope that's true... thank you.","Annabelle is a very good girl.","I hope we can get along like we used to."],["What's wrong?  Why the sad face?","Ah,","King Edgar once sealed a dragon in the Temple of Grefalde.","I heard rumors that the dragon might have awakened.","I'm so scared...","Really?","Yeah, it seems that no one has seen it in person yet,","but recently, Prince Ethelbald has frequently visited the temple.","That's why everyone is worried that something is happening there...","Since I was little, I was told that it will wake up someday,","It's so scary...","That's horrible."],["...","......","Oh!  I'm sorry!","I didn't notice you... I was daydreaming.","Are you ok?","Were you watching Annabelle again?","Ah yeah...","I'm always watching.","Yeah, yeah you are.","Why don't you talk to her again?","I'm... I'm nervous.","Annabelle..."],["Once upon a time ...","Annabele kissed me playfully","Crazy.","She acted like it was nothing...","But what was it?"],["Annabelle...","Ah..."]],elliott:[["I spoke with that mercenary over there, Max.","He said not everyone is fit to run a mercenary unit.","To start with, you need the correct equipment to fight.","I want good equipment so none of us die.","The weaker mercenaries make less, and can only afford cheap equipment.","Even if you're talented, there's little opportunity to get started.","Is that so?","That's how I came up with this great idea.","First, I find one of those talented individuals who wants to become a mercenary.","And I lend him good, sturdy, equipment.","So he has everything he needs to earn a good wage.","After a few jobs, he can pay me back, and then some.","It's a great idea right?","It's an interesting idea.","But even if I started this business, I don't have enough to buy the equipment to loan out.","So how about you lend me some money first?","I'll give you some of the money I make from this.",["Alright","No"],"Stop it Ann, you idiot.","Dang.","Let me know if you change your mind."],["Do you know about the Temple of Grefalde?","It's a temple that was built a long time ago.","The dragon that attacked our kingdom ten years ago is sleeping there.","It was King Edgar who subdued the dragon.","It is rumored that somewhere in the temple there are dragonscales cut off by the king.","It sounds like just a rumor, but...","If someone really found them, they'd be worth a fortune."],["The Catacombs of St Anterus holds regular citizens and the royal family.","Of course there are differences in how they're handled.","In the upper class areas,","sometimes graverobbers search for gold.","Hey.","...Hey I haven't become that desperate yet.","I didn't say you had.","It seems that the graverobbers are rarely successful due to the guards anyways.","But apparently they're now overworked with handling ghosts.","Handling ghosts?","Oh.","If someone wants to visit a grave, they need to hire an escort.","That's what I'm interested in.","If I could handle a sword like Max, I'd make a fortune escorting people."],["How are you doing?"]],max:[["What kind of person is King Edgar?","King Edgar is a hero to his people.","Everyone respects the king.","I heard he defeated the dragon which attacked the kingdom.","That's right, the whole kingdom knows of his heroic feat.","Almost ten years ago, the king fought the dragon that was terrorizing our kingdom.","King Edgard didn't kill the dragon, he sealed it in the Temple of Grefalde.","How strong he must be.","Indeed.  The kingdom has known peace ever since King Edgar took the throne.","That's why he's known as The Peaceful King.","Correct.","Ever since King Edgard's reign began, the country has known peace."],["Recently there's been rumors that the dragon has awakened in the Temple of Grefalde.","If true, I fear for the kingdom.","That dragon will surely hold a grudge against the king for its imprisonment.","If it's awakened, eventually it will gain enough strength to fly away. ","If true, I fear for our kingdom."],["The king has a younger brother named Ethelbald,","He's apparently good with a sword.","King Edgar is so old now, but,","If danger visits our kingdom, I wonder if the prince can handle it."],["How are you?"]]},t.townChapter0={ann:["By the way, how do we get to the royal gardens?","Let's ask around town.","We must try our best to not be suspicious."],amber:["A pleasure to meet you, traveler.","What brings you into town?","We came to see the royal castle!","Oh, is that so?","Very good.","Do you go there often?","I do.  Fortunately my husband is on good terms with the royal family.","That's amazing!","Have you ever entered the castle through the royal gardens?","No, never... always from the main entrance.","Because I'm always a guest, I have no need to use the rear entrance.","Oh, I see.","Do you wish to go?","Even if you wish to enter from the gardens,|You can't unless you know your way through the forest which surrounds it.","Of course.  Thank you so much for your time."],annabelle:["The royal gardens?","Yes, I've been there.","Really?","Yes, I bring food to the castle every once in awhile.","They prefer I enter through the back for some reason.","Can you tell me the way?","Sure.","Really!?","It's not a problem.","Next time you're in town, come stay at my inn instead.","Thank you!","Really, you'll enjoy your stay here."],matilda:["Hello.","Oh, hi...","We're looking for the royal gardens.  Do you know how to go there?","The gardens?","I don't know, I don't go outside all that often...","Sorry.","I see...","Oh, Annabelle at the inn might know.","Oh really!?","Yep...","The girl right over there.","Thank you.","Oh, but wait...","Why do you want to go to the royal gardens?","You're not planning anything bad are you?","No, don't worry.","It's just a part of our trip to the castle.","We've heard the royal gardens are beautiful, of course we want to see them.","I see...","I haven't heard much about them, actually.  |If they're near the castle, they are probably really pretty though.","Pretty just like Annabelle..."]},t.townChapter1={amber:["King Edgar, I'm so worried...","What happened to the king?","I heard from someone who is close to the royal family,","It seems that King Edgar has suddenly fallen ill.","Oh no...","I sure hope he gets better.","Oh, I shouldn't have shared that.  I'm just so worried, please keep it secret, alright?","Of course, I understand."],annabelle:["Medicine?","Yes, something to help with a bad illness.  Do you have anything?","I'm afraid I don't.","Some of my patrons get horny when they drink...","I don't need that kind of medicine!","I think that's all we have.","I see...","Ah!  Elliot recently started a shady business.","Maybe he's smuggled in some panacea.","Really!?","A panacea can cure anything, right?","I don't want to speak for him, he might not even have it.","I see.","If you change your mind and want to try our medicine, let me know.","I don't need it..."],elliott:[["Excuse me sir, what are you selling?","Yo.","I'm afraid I don't sell anything tourists would be interested in.","I'm sorry."],["I heard you're selling medicine.","Oh!  Are you looking to purchase some?","Well, I have this magical panacea that cures anything.","I'll sell it for 40 gold.","It can cure any illness?","Of course.","Buy","Don't buy","Naive Ann, this is clearly a fake.","But what if it it's real?","Young lady, please stop.","A wise decision, young lady.","This man and his business are suspicious.","Hey, don't distrupt my business, Max!","Stick to using your muscles, not your brain.  This is real.","No, it's not.","Did you begin this business after hearing the rumors?","That someone in the royal family is seriously ill.","What do you know?","Young lady, I've been hearing this story often recently.","If you seek a real panacea, there's a wise hermit living in Warkano Forest.","He is the only one who could make such a panacea.","This wise hermit of the forest is that talented with making medicine?","Yes, if someone truly needs medicine, they go to him.","I'm sure he would be willing to make medicine for our good king.","Sister, please.","It was wrong of me to deceive you.","Allow me to sell you this map of Warkano Forest at a bargain price.","Well alright..."],["Recently people have talked about a ferocious bear in the forest.","If you really do look for that hermit, please be careful."]]},t.townChapter2={amber:{question:["Ask about the secret passage","Ask about the Duke of Troia","Nothing"],answer0:["A secret passage in the royal castle.","It was used by the royal family to escape from the castle during a war.","Do you know where it is?","I don't know.","If an enemy country knew its location, it wouldn't be safe.  It's a closely guarded secret.","Of course."],answer1:["The Duke of Troia's residence is southeast of town.","Do you want to go?","You can go close to it, but he doesn't allow anyone on his premises.","You included, Amber?","Well...","I'm pretty close with the Duke.","We often exchange gifts.","In fact he sent me an orange jam just the other day.","Wow, that's a luxury item.","Is that so?","Yes, quite right.","So now I'm wondering what to give him in return.","If you have any good ideas, please let me know."],solve:["Have you decided on a gift for the Duke?","No, I can't decide.","How about tulips?","Well, that's a popular gift.","But a nice arrangement would be too expensive for me.","If you'd like to give him flowers, then I can arrange them!","Oh, really?","It's fun to watch them bloom in a pretty arrangement.","Please let us design it for you!","Thank you.","I'll give you the bulbs right away.","We have something to do in that area anyways, we can deliver it too.","Oh really?","I'm sorry to be such a bother.","Really, it's nothing.","Truly?  Well ok then.","I'll write the Duke a letter and give you a map of the area.","This should allow you to get past his guards and to the entrance of his mansion.","Please deliver these to the Duke."]},annabelle:["Flowers?","Sure, I grow a lot of flowers.","You want tulips too?","I had a bunch, but I sold most of them.","Oh really?","I'll give you some extra bulbs instead.","If you create a beautiful pattern you can sell the arrangement for a lot.","Wow really!?","Sure.","Thank you!","You're welcome.","Stop by and chat anytime."],elliott:["What would please a noble?","Well tulips are popular at the moment.","Tulips...?","Yep.  The nobles enjoy extravagant tulip arrangements.  |They brag about who has the most elaborate arrangement.","I don't know what's so fun about flowers,","But I'm interested in the design since nobles pay so much for them.","Do you sell flowers?","No,","Annabelle, from the inn, grows flowers.  Why not ask her?","I'd ask her for some to sell myself, but she'd never give anything to me..."],max:["What would make a nobleman happy?","That seems like the type of thing Elliot would know about."]},t.townChapter3={amber:["Why did the queen die?","It sounds like she was sick.","Sorry, I don't know much about the queen either.","The queen didn't have a lot of friends,","It was rare for her to make public appearances,","I only caught a brief glimpse of her.","Supposedly she was estranged from the king,","but who knows?"],matilda:["The queen?","Sorry, I'm not too sure.","The queen died when I was little...","The rumors were that she wasn't on good terms with the king.","I wonder.","I don't know if that was really the case...","They got married, right?","Yeah.","If you care so much about the queen,","Why don't you go ask her?","Ask her?","Yeah,","The Queen is sleeping in the catacombs of St Anterus.","I see!","Thank you!"],max:["Did the king and queen get along?","I don't know.","I heard rumors that they weren't on good terms.","The queen rarely appeared in public.","But I don't know.","I don't really understand the royalty.","And it's easy to make up rumors.","I'll tell you another rumor.","Queen Evangelina,","Was fascinated by the king's appearance when he fought the dragon.","Just another rumor,","But I certainly believe it.","Everyone was moved by that brave image."]},t.townChapter4={amber:["It's just awful,","The dragon that was sealed in the Temple of Grefalde has awakened.","The king, his brother, and their knights are all headed for the temple.","Do you think they can handle a dragon?","I hope they'll be ok...","I'm sure the dragon wants to take revenge on this country for what happened ten years ago."],annabelle:["The rumor that the dragon has awoken turned out to be true.","The king's younger brother was at the temple recently,","He must have seen the dragon.","Ugh,","I really hope things work out."],matilda:["I've never seen a dragon, but it must be gigantic.","I can't imagine humans fighting with just swords can defeat it...","What's going to happen?","I don't know the details of what happened ten years, |But clearly the dragon wants revenge.","I'm scared."],elliott:["The king himself leads the quest to subdue the dragon.","He's not so young anymore,","but I can still remember what happened ten years ago.","At that time, it was miraculous to contain it in the temple, no one could think of defeating it.","If the king fails, then our kingdom is...","I don't want to think about it."],max:["A questing group led by the king and his younger brother have already left to subdue the dragon.","It was true that the dragon began stirring about half a month ago, and has finally woken up.","It's a pity that all I can do is keep silent and wait for their return.","But I believe that King Edgar will succeed.","If...","If he can't stop it, then the dragon will surely wreak havoc upon the kingdom.","If that happens, then I'll be forced to unsheathe my sword for the first time in years."],ann:["Ok,","We know our destination!","Let's go!"]},t.townChapter5={soldier:[["Oh look, the three from the Temple of Grefalde!","Is it really?","Yes, they must be the ones who saved His Highness at the temple.","Huh?","Why did you run off afterwards?","Oh... ummm we're just busy.","His Highness wishes to thank you.","We're to give you this letter.","Perhaps an invitation to the castle.","Please take a look."],["Let's see what he wrote.",'"Wait for me in the royal garden."',"...","That's it.","What, that's it?","Strange.","The garden was the location of the first assassination attempt.","Hmm.","I don't know, but we have to go."]],amber:["I'm sure you already know,","But His Majesty defeated Sonberk!","I'm so glad.","I am too.","And now we'll have peace again.","By the way,","There are rumors that it was not actually the king who defeated the dragon.","His Majesty is no longer young,","Perhaps it was the prince who defeated the dragon.","Or even an unknown knight!","But that doesn't sound as good, so the king was given credit.","The most bizarre rumor is that some traveling girls killed the dragon.","Ahaha.","But I choose to believe it was the king.  |It doesn't really matter anyways, does it?","We have peace again."],annabelle:["","You're in a pleasant mood today.","It's a great day.","I'm glad the kingdom will remain peaceful.","I'm so happy about that too!",'"That too?"',"Well, there's something else...","Really?","Do you know Matilda?","She was always hiding in the shadows, staring at me.","Oh, that girl.","What happened to her?","She said she likes me!","Huh?","I mean I always knew.","I'm just so happy she was finally direct about it.","We have plans to do something together soon.","That's wonderful!","Congratulations.","Thanks."],matilda:["...","What's wrong?","Uh, yeah yeah...","We're finally at peace.","Yeah, we are!","And I'm very happy about something else now too.","Which has been on my mind for so long...","What happened?","Well, I finally talked to Annabelle.","I said something so strange...","Is that so?","What?","Well... it's a secret.","I'm just glad we can get along again.","Oh!","I'm so glad.","Yeah!  Thanks."],elliott:["Can you believe it?","King Edgar defeated the dragon.","I'm really proud to belong to Bellion today.","I no longer want to only think about myself","I mean,","I think it's ok to give back to the people.","It made me think about things.","I'm really proud of belong to Bellion."],max:["It turned out exactly as I predicted.","King Edgar actually did it.","...","Well, to be honest I did have my doubts.","But King Edgar the Peaceful has defended our realm's peace.","Every citizen of Bellion is proud of our king.","Especially me."]}},1714:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.jack=[["","","","","","","","","......"],["","","...","","","...","","","","","...","","","","","","","","","","","","","","",""],["...","...","","","...","","","","",""],["","","","","","...","","","",""]]},1715:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.dog={start:["","","","","","","","","","","","","","","","","","","","","","",["",""],["",""]],started:["","#{count}",""],solve:["","","","","","","","","","","","",""],solved:[""],dog:{notStarted:"",d1:"",d2:"",d3:"",d4:"",d5:"",jaquelyn:"#{remain}",francisca:"#{remain}",foundAll:""}},t.mercenary={start:["","","","","","","","","","","","","|","","","","","","","","","","","","",["",""],["",""]],started:"",flower:["","",""],battle:["","","","","","","","","","","","","","","","","","","","","","","","","","",""],member1:["","","",""],member2:["",""],leader:["","","","","",""]},t.drystan={door:"",start:["","","","","","","","","","","","#{MANDRAKE_COUNT}","","",""],progress:["#{MANDRAKE_COUNT}",""],solve:["","",""]},t.bear={start:["","","","","","","|","|","",""],progress:"",bearArea:["",""],bear:["","","",""],solve:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],end:["","","",""]}},1716:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.cassandra={talk1:["...","What are you looking at?","Is this a prison?","...","Yes.","Did you do something wrong?","Yes.","I'm not allowed outside anymore.","Well that's...","This is a keyless prison made of Aragnier's thread.","The thread that he weaves can't be cut unless he's killed.","Aragnier?","Aragnier is a giant spider monster.","It disappeared after building this prison.","Now no one can find it.","I guess it grew bored of here and moved on."],talk2:["You want to speak to me?","Hey can you bring me some wine if you have the time?","I know it's illegal to purchase alcohol, but I know where to find it.","I'll tell you where to get it.",["OK","No thank you"],"So...","There's a wine cellar at the end of this underground passage.","There's wine in the passage?","Yes.","But the door is locked.","Look closely at the candlestick next to the door.","The key should be hidden there.","Who would hide the key there?","My brother often goes in and out of there.","He's searching for Aragnier's hiding place so he can get me out of here.","I see.","So is it a problem if I take the key?","Don't worry, Aragnier can't be found anyways.","My brother seems to have realized that and hasn't come here recently..","But you'll definitely find the wine.  Please bring me some."],util:{door:["Check","Leave it alone"],key:'"Underground passage key" picked up',unlock:"Unlocked the passage",locked:"It's locked.",wine:'"Wine" picked up'},progress:["Did you find the key?","Look closely at the bottom of the candlestick next to the door.","Did you find the wine yet?"],solve:["Was the wine there?","Yes, a lot of it.","Well done!","Thank you, it's so refreshing.","Being trapped here is so awful, this wine really is a nice comfort.  |I can't thank you enough.","It's ok.  Letting me know where the key was is more than enough payment.","But why is there so much wine stored down here?","Moonshine runners use this passage to smuggle liquor.","The people in the castle purchase the liquor.  This prohibition is ridiculous.","Is that so?","Yep.  Just awhile ago I heard a smuggler enter actually.","Thanks for helping me."],solved:"Thank you for the wine.",tweet:["Is this the wine?","Two more.","Need to find one more","It looks like they're all gathered"]},t.princess={talk1:["Hey!","Who?","How did you get in here?","Um, well...","Who are you two?","This is a dangerous place for children.","Excuse me!  We're fine!","This house belongs to me and Mary.","Your house? What do you mean?","Are you foreigners?","You've never heard of the Princess Mary?","Oh?","They can't be from around here.","This is Loretta. The daughter of the Duke of Troia.","Why are you here!?","It's dangerous, there's monsters.","Leave us.","Mary, who are they?","Report them to your father.","No need to do that.","Even though they've found this passage, they'll never get past Orthrus.","And we're meeting here secretly, we're not supposed to be down here either.","True.","So it's a secret that any of us were ever here.","Uh, yeah.  Sure.","Your father is royalty, right?","What are you doing down here anyways?","I can't possibly say.","Yeah, secret research and experiments that I can't tell my father about.","Don't disturb us.","Ok...","You entered through the underground passage, right?","Correct.","Then did you meet Cassandra on your way?","A woman trapped in the prison of Aragnier's thread.","We met her.","How is she?","In what sense?","Was she angry, or sad?","Uh, hmmm...","It didn't look fun being trapped there...","I see...","You know her?","Yes. she's imprisoned because of me.","It's not your fault, Mary!","Yes, it is...","Hey, don't believe that Mary.","It really wasn't your fault.","I think I understand.","Can I ask what happened?","It's fine.","Cassandra used to be my caretaker.","I was so proud of her.","Cassandra was the sister of a knight, and she was also an excellent swordfighter.","I wanted to be like her.","I always urged her to take me hunting with her.","I asked her day after day, and finally one day she took me to the forest with her.","She found a safe area,","But somehow a powerful monster found us.  They're usually never in that area.","She slayed it while protecting me.","But I was injured.","How unfortunate.","Yes, this eye.","My father was furious and locked her up.  |He was so mad I couldn't persuade him to go easy on her.","I don't hold a grudge regarding my injury.","She's still my hero.","So it's all my fault that she's trapped down there.","How awful.","Hey, it wasn't Mary's fault right?","That's right.  You can't blame yourself.","Even if you say so, it doesn't change the fact that she's locked up.","So that's why you're concerned about how she's doing.","Mary is making a gift for Cassandra","Hey, don't tell them that!","And it's not much of a gift anyways.","It's ok, maybe they can help you.","Sure... I do need some help...","We can help!","Can you bring me #{MAGIC_STONES} carbuncle stones?","Please!","Princess Mary orders it!",["I understand","I'm afraid not"],"Thank you.","There's no need.  They don't have the right to refuse.","Well then, go."],door:["We're experimenting right now.","Don't disturb.","Oh, don't go in!","We're busy in here..."],progress:["#{MAGIC_STONES} carbuncle stones.","Bring them quickly."],solve:["That glow!  They brought the stones!","They did it!","Thank you!","You're welcome.","It's great that they're for a gift for Casssandra.","What are you making?","It's a secret.","Well then, thank you."],solved:["Thank you, you saved my gift.  I was afraid I wouldn't be able to complete it.","Your help is no longer needed, you may leave."]},t.moonshine={talk1:["Wow! Who are you?","Why are you down here?","And who are you?","I heard there is a suspicious guy who brings in moonshine, would that be you?","No, of course not.","Then what's in that barrel?","...","Oh right, this is wine.","Mmmm hmmm.","Are you trying to throw me into a dungeon?","Is that what you're hoping for?","That's not the case...","Can you tell me about this place?","I want to know about this passage, and the castle.","Certainly, I know all about it.","As you know, this underground passage leads to the royal castle.","Beyond this hallway is a door leading to the castle's storage room.","And you deliver your moonshine there?","Yes.  One barrel a day.","I bring it to the back of the underground passage.","When 20 barrels have accumulated, it is brought into the castle.","Does that mean,","That the door into the castle only opens from within?","Yes.","Why are you trying to break into the castle?","You can't get past this room to reach the door anyways.","Why not?","Orthrus is protecting the next room.","You can't open the door if you've been eaten.","Orthrus?","Oh right.  Orthrus is the castle's two headed guard dog.","I always wait for him to sleep and then sneak through, |But three of you could never sneak by him.","Now that you know, you should turn back."],talk2:["Orthrus is the castle's two headed guard dog.  You won't get past him.","Now that you know, you should turn back."],talk3:["Are you seriously going in there?","Stop it.","Do you want to die?","It's the only way.","I don't want to see the corpses of three young women.","Then what should we do?","Hmm...","Ok, it's dangerous but I have a plan.","Let's cooperate.","Hmm?","Ok.","I'll make Orthrus easier for you to beat.","How?","Just leave it to me.","But make sure you beat him, I'm putting my neck out there too.","Just wait a minute.","He really went in there.","With the wine barrel, what's he planning?","Ok!  It's done!","It went well.","What were you doing in there?","Letting him have the barrel of wine.","Once he's finished, he'll be easier to defeat.","I'll lose today's score, but it'll be worth it in the long run.","Come on, go in!"],talk4:["Orthrus is drunk.","Come on, now's your chance."],talk5:["You're safe!","Did you beat it?","Is it done?","Now I don't have to be scared of him anymore.","Thanks for giving him your barrel of wine.","Haha!  Even the dragon in the Temple of Grefalde could be defeated if it was drunk enough!","I'm glad we ran into each other.","What a beneficial exchange.","Thank you!","Well then, good luck sneaking into the castle."],solved:["Well then, be careful."],orthrus1:["Wow, that's a big dog!","Yeah, he looks pretty hostile.","Let's go back for now."],orthrus2:["Alright Orthrus.","Everyone, let's go!","We managed to beat it.","Let's tell the smuggler."]},t.aragnie={jack:["Hey, you!","You three, from the garden...","What are you doing here?","You've crossed the line!","What are you doing this time?","I'm not answering you.","I really don't have the time for this.","Yoink.","Hey, wait!","Why is Jack the Kingkiller here?","Is he the knight, Hector, after all?","Hmmm.","I don't know, but let's go find out."],hector1:["Who are you!?","Uh...","And what are you doing with my key?","We just borrowed this.","Are you Cassandra's brother?","I see.  My sister told you where it was hidden.","Yes.  I am Cassandra's brother.","What are you doing here?","Cassandra told us about everything.","You're looking for Aragnier to break Cassandra out of prison, right?","I hunted that spider for years.","But I gave up on it awhile ago.","Then why are you here?","It's...","I...","I have a confession to make.","I have a grievance to settle with the king.","I want my revenge.","Revenge?","It wasn't always like this!","I once swore allegiance to the king, I was his loyal knight.","I began to resent him after he expelled me.","Even then, I only thought of defeating Aragnier and releasing my sister.","But I searched for years, and I've found nothing!","Then after I'd given up, and I was at my lowest point, a man came to me.","Yes, that man in the black robe. You must have seen him on the way in.","Hey!","What did you talk to him about?","He's a snake.","He fed my anger towards the king, made it grow.","He told me about the smuggler.","Explained that the door will open once twenty barrels have accumulated.","He guided me here.","I've already lost my mind.","He... takes advantage of people's vulnerabilities.","Hey, if you could defeat Aragnier and free Cassandra, would you abandon your revenge?","...I don't know.","Perhaps.","Help us find the spider.","I can't. I couldn't find Aragnier.  I spent years searching.","Leave me alone."],hector2:["We can find Aragnier now!","Hector it's been a long time!","Princess Mary!","Lady Loretta!","There's no honor in killing King Edgar.","Hector, please don't resent my father.","Cassandra's imprisonment and your dismissal are all my fault.","I've caused so much grief.","...","Please, just give me a chance.","A chance?","Yes, look at this.","A lantern?","This is a carbuncle stone lantern.","This light illuminates any traces of Aragnier.","That's...","Mary and I studied for years and came up with this.","These three helped us find the carbuncle stones.","You needed them to make the magical light.","Will this save my sister?","Yes!","Abandon your plot for revenge.","Let's go free Cassandra.","You three, come on!","Huh?","You can't refuse the princess!","I'm afraid we don't have the strength to defeat Aragnier after crafting the lantern.","I see, defeat Aragnier, leave it to us!","Wait.","No, don't wait.","...","...Right.","There's no reason to hesitate.","Let's go free my sister."],cassandra1:["Cassandra.","Hector, who did you bring with you?","Cassandra, it's been so long.","Ah!","Why... Why are you here?","I need to apologize to you.","Huh?","I need to get you out of here.","I can't leave.","And you've no need to apologize.","I need to apologize to you.","Listen, Cassandra.","The princess made a magical lantern to find Aragnier.","What?","Is that true?","Yes.  For you.","Just for me?","There is no reason to ignore the princess's feelings.","...","Now let's light the magic stone.","Whoa!","I can see Aragnier's threads!","Now we can hunt it down."],cassandra2:"...",lamp:["Search","Wait"],aragnie_hector:["I never knew there was such a place!","Aragnier must be hiding here!","Let's proceed.","Whoa!!","This is no good...","Seriously?"],boss:["Here it is!  Aragnier!","It looks strong...","Come on, defeat it!","Wait for my heart to slow down.","We beat it...","Well done!","I'm ashamed.","What an amazing fight.","Let's get back to Cassandra!"],last1:["We were really able to cut the thread!","Amazing!","Cassandra, you're free at last.","...","It appears I'm not free after all.","What, why not?","Your eye.","Every time I see that eye it cuts my heart.","You are being punished in your own prison.","How can I look upon your face?","Cassandra, stop.","Yeah, don't be afraid to leave here.","Don't you realize why Mary went through all this?","Mary has that same feeling when she sees you in prison.","Lady Loretta...","Cassandra, come out.","Let's go some place far away and start over.","...I understand.","How can I thank you?","Cassandra, you spent seven years in this prison because of my mistake.","I didn't do this out of pity, it is my atonement.","Come on, don't look back.  Come out!","Ok... Ok, let's go!"],last2:["They're gone.","Yeah...","Cassandra...","My sister...","Cheer up, Mary."],last3:["Hector has abandoned his plot of revenge against the king.","That's right.  We did our best Ann.","Let's go back and check the history book."]}},1717:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ferdinand={talk1:["Are you ok?  You've gone pale.","......","It's dangerous to stand so close to the edge.","......","Hey!","......Huh, what is it?......","Who are you...?","......","Hey, where am I!?","Huh?","Are you ok?","Where are we?","We're in the catacombs.","The catacombs?","The Catacombs of St Anterus.","What...?","That's in Bellion...","What am I doing in Bellion........","Seriously, are you going to be alright?","Did someone bring you here?","No.","I'll be fine.","I must have come here for a reason.","A voice! I heard a voice.","That's why I came all the way here.","Yeah?","Yes, yes.  I was listening to that voice.","Then you began talking to me.","Hey, hey, the voice. Can you hear it?","Where are all of the voices coming from?","You're scaring me.","I can't hear a thing.","Don't be crazy!","Damn!  Damn!","This is getting pretty weird.","Maybe you should go home?","Damn it.","It's all because of the Renfield family.","The spirits of the slaves I bought from them are haunting me.","You're a slaver?","In that case I bet it's a grudge.","A grudge or a curse...","Or maybe it's a hallucination created by the weight of his guilt.","Hey!  Quit talking like that.","Damn, I don't know if it's a curse,","It's all thanks to the Renfield family that I'm in this mess.","Hey, can you do something about it?","Like what?","I don't know!","I'm just asking!"],talk2:["Please help.","Please do something about the curse."],talk3:["Were you able to do something about the curse?","Hmmm...","How about this amulet?","A nun gave it to me.","That won't help!","Why don't you try it at least?","...","Give it here.","Here you go.","Fine. I'll put this stupid thing on."],talk4:["Whoa!","Who!? Don't grab my feet!","What?","Hey! Stop it!","Whaahhhhhh!","Huh...?","What just happened?","It looked like a hand pulled him down.","Is he... dead?","He fell down the cliff, he must be.","I'm scared."]},t.marianne={start:["Sister, are you ok?","She looks pretty sick.","...","Um, mam?","Oh... yes...","What's wrong?","Nothing... nothing's wrong.","Something's wrong!","You look like you could die at any moment!","Have you been eating properly?","No... no need.","I'm fine, I want to die.","Oh no...","Why?","I'm going to see Marianne.","Marianne?","Yes, Marianne.","My beloved Marianne sleeps in this grave ...","You want to follow Marianne, even if it means death?","Yes, ","I can't live in a world that isn't filled with her singing...","So many lingering regrets.","Hmmm... she must have been something special.","Tell me, what was she like?","The most beautiful voice.","Marianne was a special person.  She sang in both the shrine and the castle.","Even His Royal Highness was friends with her, would shower her with lavish presents.","Her song was so, so special.","She sounds like a great person.","Yes, she was.","And I fell in love with her.","Even though I am a nun married to God.","It's unforgivable.","When she died, so did my heart,","And now here I am.","I see...","How long have you been here?","A few days, I think.","My sense of time is vague, I can't be sure.","Oh,","Wait a minute.","Let me find you some water.","No, no, I don't want to bother you.","Don't worry about it."],started:["Wait a minute.","Let me find you some water.","No, no, I don't want to bother you.","Don't worry about it."],solve:["Here you are, sister,","You need to take care of yourself... I brought some water.","...","Thank you...","You're too generous.","It was nothing.","Refreshing...","Good.","Ah,","Thank you for your kindness, please take this amulet.","Thank you.","By the way, you said Marianne was on good terms with the queen.","Can I ask you a little about the queen?","Yes we talked sometimes, so I know about her.","Um,","Did the queen hold a grudge against the king?","Impossible.","The Queen loved His Majesty until the moment she died.","Oh, I see.","I'm sorry to ask such a strange question.","Come on, can you stand up?","I can help you walk back to town.","No...","My feelings are the same.","That...","I must be with Marianne.","If you had heard her song, you would understand.","I will follow her anywhere, even to the afterlife."],solved:["Marianne..."],item:"Holy Amulet"},t.dario={unavailable:["Uh.","...","It looks like he's busy thinking.","Let's come back later."],start:["You all need to leave this graveyard as soon as you're done.","Why?","Is it because of ghosts?","It's hard to believe, but that's the reason.","In the last few years, many evil spirits have settled in this graveyard.","For awhile now, this has been a depressing place.","So full of sorrow.","I can feel it in the air.","Just like you might feel the sun's warmth on your skin,","I can sense the sorrow of the dead.","It's not harmless, either.","Even if you don't notice it, the longer you're here the more overwhelmed by sorrow you'll become.","That's why you should leave as soon as you're done, don't tarry long.","Especially stay away from the royal and noble's graveyards.","But,","we want to visit the queen's grave.","What?","I don't recommend it.","Why not?","Does the ghost of the queen appear?","Yes.","Well yes, but no, not exactly.","That ghost might look like our queen, but she is not.","What do you mean?","The ghost...","The ghost was made by gathering the souls of the evil spirits who call these catacombs home.","I... I made...","Uh, wait a minute.","You gathered the evil spirits in this graveyard,","and formed them into the shape of the queen?","Yes.","Is that possible?","Why would anyone do that?","I can manipulate the dead.","A man forced me to summon the ghost of the queen.","I don't know why, but he intends to use the queen's ghost to kill His Majesty, the King.","If His Majesty were to die, it... it would be my fault.","Does the ghost not listen to you? You made it, right? ","Impossible.","I am powerless now.","That thing has become a vicious being beyond my power.","Be careful,","The ghost's resentment is directed at His Majesty, the King, |But she shall turn her rage on you if you get too close.","Wow, so scary...","Oh,","Was the man who threatened you wearing a black robe?","How did you know!?","A guess, we've come across him before.","Who is he? Why is he trying to kill the king?","We don't know.","Do you know where he is?","Oh,","He's still in the catacombs.","Really!?","Are you going after him?","The ghost of the queen is dangerous, very dangerous.","I'm aware...","But we have to stop him.","...","I see.","He has the dagger I used to summon the ghost of the queen.","If you get the chance,","maybe you can bring it back to me.","I'll remember, find the dagger."],started:["He has the dagger I used to summon the ghost of the queen.","If you can get it back, bring it to me.","I'll remember, find the dagger."],jack1:["Hey Ann, do you have a feeling like someone is watching us?","I don't know... let's proceed with caution."],jack2:["What are you doing here?","!!!","So this is where you've been hiding!","You disrupted my plans in the underground passage.","Yeah!","What's next?","You've made a fake evil spirit of the queen to kill the king.","That necromancer told you?","Why are you trying to kill the king?","I suppose your persistence deserves an answer.","To protect our kingdom.","To protect...?","How could killing the King Edgar the Peaceful possibly protect the kingdom?","If I explain, will you get out of my way?","...","Exactly, there's no point explaining.","We're finished here.","I can't waste any more time.","You force me to make a regrettable decision.","Yes, it had to come to this.","I can't let you leave alive this time.","It won't be like the last time.  Defend yourself."],jack3:["I lost... how?","Yes, you've been defeated.","Return our crystal first.","The one you stole from us in the royal garden.  You haven't lost it, have you?","...Not yet.","What?","This can't end here, not like this..."],jack4:["!!!","He jumped...","This is bad...","What should we do?","Chase?","Down the bottom of a cliff?","It's impossible.","You're right.","I can't even see the bottom.","He must be dead.","Uh...","How would history change if Jack died here and now?","I don't know, but we haven't prevented the king's death yet.","The ghost of the queen still lingers.","Right.","It seems impossible to chase,","Let's resolve the issue with the queen's ghost.","Yeah, let's do it."],solve:["You're looking for a dagger right?","We recovered it.","Truly?","How on earth?","We're stronger than we look.","So just leave the ghost of the queen to us.","I'm sure we can do something about it.","...","You're going to try to stop her spirit?","Is there a way?","With the dagger.","With the dagger in your posession,","you can see and approach her spirit.","It might be possible to defeat it.","Really!?","Oh.","But that ghost is really dangerous.","Are you really going?","We're going.","I see...","Then you'll need the dagger.","Here, take it.","Thank you.","I'm so sorry...","Please come back alive."],solved:["Please don't lose..."]},t.renfield={start1:["Tomb robbing!?","Hey!  What are you doing here?","Don't scare me like that!","You're a grave robber?","What if I am?","Don't worry about it.","I can't leave this alone.","Are you digging up a noble's grave to steal his gold?","A relative.","This is our tomb.","I don't know what to do.",'"Our tomb?"',"What does that mean?","My ancestral tomb.","This is the grave of the Renfield family.","A family of horrible people.","And I am Ray Renfield.","A man with dirty blood and a traitor to the Renfield family.","Why would you do this to your ancestor's tomb?","The Renfield family is a dirty family.","Sold slaves and girls to the Ferdinand family in order to become noblility.","Selling the people of your own land is as low as it gets.","Trash shouldn't be buried here.","I'll dig it up, burn it, and toss it on the road.","Wow..."],start2:["Whoa!","Something came out!","!!!","They're gone...","What are you doing!","They've died twice now.","Take a look.","...","Well, I'll leave it to you then.","What!?","You're scared!","Hey, come on!","I was just offering to let you fight the ghosts.","It was the polite thing to do..."],started:["Hey, I'm not scared!","Then what...?","...","Don't worry about it, stop being nosy!"],solve:["So strong.","...Thank you.","No big deal, but","I'll give you the key I brought.","You can use it somewhere.","Oh, yeah, thank you.","That's nice of you...","But what will you do?","Won't your family get angry when they find out?","Doesn't matter anymore.","I torched the mansion... killed them all.","Uh...","The only survivors of the Renfield family are myself and my brothers who live far away from here.","Luckily...","Otherwise, more people would have been sacrificed...","If that's the way it is...","...","Well then."],item:"Rusted Key"},t.evangelina={unavailable:["This looks like the royal tomb.","Does anyone else have a bad feeling about this?","Don't be scared."],boss1:["...Hey, is that...","Her Majesty the Queen?","No.","?","...I won't forgive...","Edgar...","Never forgive.","Is this her?","...Kill..."],boss2:["Did we defeat her?","I think so.","Then we've saved the king?","I hope the ghost wasn't really the queen.","Huh?","I didn't think about that,","You think the real queen is different?","I don't know,","Maybe it will say in the history of the kingdom now.","Yeah, let's go back."],solve1:["Please wait.","Huh?","All of you,","Thank you.","Ummm...","Are you really Queen Evangelina?","Yes.","Thank you.","For protecting my resting place from the evil beings pretending to be me.","No, no, it's ok.  You're welcome.","Um,","Do you really hold a grudge against King Edgar?","No.","I know why you ask.","Let me answer.","I never held any grudges.","I was sick,","That's why I wouldn't go out in public much.","That's how the rumors started.","I was always so thankful of Edgar.","Great.","I was ill from the start.","Since the first time I met Edgar.","I was already fated to die.","Still Edgar,","He chose me.","So that's why...","I'm so sorry to hear about your misfortune.","Thank you.","Travelers,","I still wish for peace in Edgar's beloved kingdom.","But I'm very worried.","The dragon that Edgar once sealed in the temple,","awakens.","I want to help.","But I can only offer prayers.","If you want peace in the kingdom,","Please help the king."],solve2:["Oh wait!","I wanted to hear more...","I guess there's nothing to be done.","We can't do anything now, let's go home."]}},1718:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.templeCharacters={soldier1:["It's just as His Majesty said.","The princess slipped through the guards at the castle,","And she followed His Majesty here.","But we can't allow you to go inside."],soldier2:["No matter how many times you ask, I can't let you through.","You can't disobey me, I'll tell my father!","My orders come directly from His Highness.","Please forgive me."],mary:["Oh hey, it's the suspicious people I met in the underground passage.","Hehe, nice to see you again.","What are you doing here?","It's dangerous.","My dad and uncle are fighting the dragon.","We can't just wait here!","But these knights won't let us go any further.","Please do something!","Hmmm, I don't think there's anything that can be done."],loretta:["?","You all look familiar.","Seriously, you forgot?","It's me, Ann. We met in the underground passage.","Oh, now I remember.","What are you doing here?","His Majesty is planning to fight the dragon.","Mary and I rushed here.","Well I'm worried...","If something were to happen to His Majesty, then Mary...","I have to lend my support...","I'm sure things will be ok."],dario:{talk1:["Oh!  You're the necromancer from the catacombs.","It's you three.","Excellent.","I needed to thank you.","Thank you for easing the ghost of the queen.","I'm so sorry about the danger I put you in.","It's alright.","What are you doing here though?","I heard that the Sage of the Forest was called in to help subdue the dragon.","I came with because I was worried.","Feel free to tell me if you need to recover.","Thank you!"],talk2:["Do you need to recover?"],option:["Please","Alright"]},drystan:["You are the wise man from Warkano Forest!","Thanks again for making the medicine.","It's the three girls from Warkano Forest.","Have you come to save the royal house again?","What are you doing here?","I don't like to leave my forest,","But I had to help heal the soliders.","I see.","The dragon has grown reckless.","Many soliders have been lost.","Is the dragon that strong?","They have special powers, unknown to humans.","Wisdom, not power, is essential to counteract the dragon's powers.","A long time ago, the humans who built this temple were wise in these ways.","But it is lost to us all.","Wisdom...","I think this time you should not interfere.","This isn't like getting rid of a bear."],ray:["Hey, you're the graverobber!","Huh?","You're the girls from the catacombs?","What are you doing here?","It's a once in a lifetime opportunity.","I came to see the dragon.","You want to see the dragon?","You must know how dangerous it is!","Why's that matter?","So cocky.","Well, stay safe.","Hmmm."]},t.lorraine={start1:["What are you doing?","I'm repairing this sculpture's mechanism.","Mechanism?","Yes there are numerous hidden mechanisms in the temple.","They open and close doors.","Are you this statue's sculptor?","No.","This temple was made and abandoned long ago.","I just maintain the mechanisms.","It was just a coincidence that I found this mechanism.","Really?  By chance?","Ever since my first visit here I became fascinated with the statues.","I could never forget this statue.","I became a sculptor myself eventually.","One day I was studying this statue so intensely that I completely forgot to eat,","That's when you found this mechanism.","Ah yes, what a wonderful day.","I can still remember my excitement at seeing the mechanism hidden in the pedestal.","It was broken, but I fixed it and made it work again.","Wow.","But anyways, what did you wish to know?"],option:["Ask about the statue","Ask about the dragon"],start2:["The wings of the statue seem to be broken, can't you fix it?","I could, but I won't.","As I said, I'm fascinated by this statue, even in its broken form.","Above all, I respect the person who carved this statue.","I could never modify such perfect work.","That's why I only ensure the mechanisms work.","It took me years though.","Oh you've been here a long time.","Oh, I've spent most my life here."],start3:["Do you know about the dragon?","Of course.","The dragon was sleeping in the basement of this temple, but woke up about half a month ago.","Since then, Prince Ethelbald has been visiting the dragon frequently.","What for?","I believe the prince was negotiating with the dragon on behalf of His Majesty, |Trying to calm the dragon's rage.","The dragon's anger was too great though, His Majesty came here today to try to fix things.","That's right.","We also wish to see the dragon,","Can you trigger the mechanism for us?","Unfortunately, I can't.","This is a special one.","Only a woman named Lyla knows how to work this mechanism, she rode in today with the knights.","Oh...","It's no substitute, but,","Here.","What's this?","If you trigger other mechanisms with this, you can reach the rooftop.","You'll have to study the mechanisms, but I'm sure you'll figure it out.","Thank you!"],item:"Simple Key",started:["Think about how to trigger the mechanisms."],solved:["It looks like you have solved the mechanisms.","If you wish to go underground, look for Lyla."],tweet:["Here's a mechanism.","Can Ann solve it?","Good luck!","I did it!"]},t.allsRight={start:["Hmmm?","The door should have been sealed...","Ah!  A dragon?","Is this your first time meeting a dragon?","Uh, yeah.","I was surprised.","I am part of a dragon tribe.","I'm sorry if you were frightened.","Wow there are many dragons in the kingdom.","There are.","A long time ago, dragons and humans coexisted here.","A war broke out between the two races, and the defeated dragons left the land.","It's an old tale.","But some do remain, like myself.","I see.","Why did you stay?","Because I believe in the god of this land.","God makes no distinction between dragons and people,","God watches over all of us equally.","There's not much here, it's very peaceful.","That's true.","Are the other remaining dragons living in seclusion?","Many are.","Many dragons prefer to live in quiet, remote regions.","But some do not like to hide.","For example, the mighty dragon Sonberk, that your king sealed underground.","Did you come to challenge him too?","Ummm, well yes.","You don't have to worry about me.","I might be a dragon, but Sonberk is violent in my eyes as well.","I know you sought this fight reluctantly.","But Sonberk is a mighty dragon.","You have little hope of defeating him.","How did the king manage it before?","Humans are a crafty race.","Powerful weapons and tools narrowed the gap between man and dragon.","For example, the holy sword Calibrenus, which is sealed in this temple.","That sword is undeniably a threat to us.","Holy sword Calibrenus...","If we had the holy sword could we stand against Sonberk?","The sword would give you hope.","I don't know what sword the king wields.","But you should know,","That sword was sealed away by the dragon tribe Nikke.","I can't retrieve it for you.","Oh I see.","What can we do?","Can you ask that Nikke to lend it to me?","I'm sorry.","I said I understand your fight with Sonberk,","But I could not help you slay a fellow dragon.","I see...","We're in trouble...","...","But I can help create an opportunity to speak with the Nikke.","An opportunity?","The Nikke are reclusive.","They will not respond to a human's call.","But you can leave a message from me.","So you will help!","It requires some preparation.","Preparation?","Collect #{KELUNNE_COUNT} feathers of Kelunne","Use those to make a message.","A message?","I can't say I understand, but I'll help find them!"],solve:["I collected them.","Ok.","Wait a minute.","Finished.","Is this...? A bottle?","I filled the bottle with the smoke of words.","Oh... uh ok.","What is the smoke of words?","The words of the dragons can be seen in the smoke.","Wow, really...","Unplug this bottle near the holy sword.","My words should reach the Nikke.","Ok, thank you!"],solved1:["Near the holy sword, unplug the bottle to release the words.","My words should reach the Nikke."],solved2:["All the world is nothing.","My home here is nothing, just a peaceful place."]},t.calibur={start:["Ok, let's release the words of the Zi.","Hello.","You called?","Um, Sir Nikke?","Yes","I heard Zi's message.","Who are you?","I'm Ann.","Ann, do you seek the holy sword?","Yes!  Can you lend it to me?","It is a wonderous sword.","A terrifying thing to us dragons.","It takes courage to hand it over to a human.","I will convince you by any means necessary.","Any means?","Any means.","Why do you seek the holy sword?","Well...","Do you wish to slay a dragon with it?","Uh...","Tell me.","I wish to defeat the dragon, Sonberk.","Slay Sonberk.","Poor Sonberk.","A violent dragon, but still my friend.","Is that so?","He has been sealed away for ten years,","And has finally woken up.","Just to be hunted down.","It's tragic...","Poor Sonberk.","...","I know it can't be helped.","This is human land now.","It's natural that they wish to oppress it.","I don't wish to oppress your kind.","Is it possible to persuade Sonberk not to release his wrath upon our kingdom?","I don't think so.","I see...","Only the holy sword can convince him.","Alright,","I shall let you wield it.","It was forged by humans after all.","It's only fair to give it back to them.","You are free to use it to protect your kingdom.","Really?","Really.","But not anyone can wield this.","Yes...","The one who forged this was a mighty warrior.","Are you up to the task of wielding it?","You must prove yourself.","Prove ourselves?","Fight me.","I see.","Are you up to the task? ","Prepare yourself!"],talked:["Are you ready?"],option:["Yes","No"],cancel:["Then come back when you're ready."],solve:["Wow.","You're very strong.","Alright.  I surrender.","Well done.  I am a less powerful dragon though, do not become overconfident.","Well then... the sword.","Here, take it.","Thank you.","Yes.  It looks good in your hands.","Thank you.","Yeah...","Well...","Since I no longer have to keep an eye on that sword,","I might go on a trip somewhere.","Ah,","By the way,","Are you all cheating?","Huh?","I feel like time is distorted when you are nearby.","...","Well,","Probably another power crafted by you humans."]},t.lute={unavailable:["Ah...","Taking a nap."],start:["Hello, young lady.","What a marvelous sword you have.","You've come to challenge the dragon then?","That's right.","I can't find a way underground though...","Oh, I see.","What you are looking for is this goddess statue.","Really!?","You must be Lyla.","Really.","Did you speak with the sculptor?","Only you can trigger this mechanism.","Correct.","Do you want me to open it?","Of course! ","What will you do for me to open it?","Well,","Anything!","Anything?","Yeah.","I don't really want you to do that much...","Oh,","Then can you open it?","No, you have to do something.","Uh...","Then, hmmm,","Do you enjoy apples?","I like them.","So!","I'll ask you to find me a beautiful one.","Leave it to me!"],started:["Have you found a beautiful apple?","I'm looking forward to it."],solve1:["I've collected the apples!","Very nice."],answer:[["Yes, delicious.","Thank you."],["Hmmm this apple isn't that good.","Well, I guess it can't be helped."]],solve2:["Well I made a promise.","I'll open it now.","What kind of mechanism is it?","I must play my lute.","The door opens in response to the music.","Huh.","Listen."],solve3:["Well, it should be opened now.","Wow!","Why does the sound move the device?","I don't really understand either.","I think the goddess responds to the love of music.","What do you mean?","Even if you play the same tune, it won't open unless you pour your heart into it.","But if you play it with all your heart, it will open.","I'm sure the person who made this mechanism also loved the goddess.","That's nice.","These apples are beautiful.","You must have taken great care in picking them.","I'm sure the sculptor of this statue took similar care when carving the likeness of his goddess.","Hehe.","Well then,","Do be careful.","Thank you!"],option:["Pick up","Don't need"],apple:'"Apple" picked up',tweet:"Five apples have been gathered."},t.dragonKiller={soldier:["The dragon... was much more powerful than we expected...","How did the king manage to beat the dragon ten years ago...","I want to help His Majesty... but I can't move anymore..."],block:["Hey, don't you want to talk to the injured soldiers?"],start:["Are you ok!?","It's you...","Did the dragon hit you?","Yes...","Brother...","You came to aid Edgar?","Yes.","Are you the prince?","Yes","Edgar and the dragon are ahead.","You're badly hurt.","Don't worry about me.","My brother fight's alone now.","Edgar...","Help my brother..."],started:["Have we met somewhere before?","There's no time to gossip."],confirm:["The dragon's lair is beyond."],confirmOption:["Go ahead","Stop"],king1:["Edgar, it's good you finally found the courage to show yourself.","I could never go home while the man who sealed me away for ten years walks free.","Or... do you really think you can best me again, like ten years ago?","Don't be so arrogant.","Sonberk, tell me something.","Will your anger subside if I offer you my head here and now?","You worry about your kingdom?","You seek peace of mind.","You are here now.","Your brother Ethelbald has fulfilled his promise.","You wish to trade your own life for the good of your kingdom.","Yes.","I don't know what my brother agreed to, but that's what I want.","Shower me in flame until you've satisfied your anger."],king2:["Huwa!","!","Hurry up!","...","He's collapsed!"],sonberk:["Sonberk! Prepare yourself!","Who?","You're not the king's knights.","We are merely citizens of the realm.","Just a citizen.","Yet you came here to help the king?","That's right.","And what do little girls think they can do to me?","Kill you.","With this sword.","That sword is...","I know that sword.","Why is it in your possession?","No matter.","It's still in the hands of a little girl.","If you wish to die here next to your king, I shall grant your wish.","Come on!"],solve:["Finished!  Defeated!","We did it Ann.","Somehow.","Okay, we need to help the king and his knights!","Yes.","Once we've helped them, we can disappear.","Ok!"]}},1719:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.peaceful={soldier:["An assassin dressed in a black robe.","According to His Royal Highness, we're to shoot the assassin on sight.","An assassin dressed in a black robe..."],talk1:["You came.","Why are you here?","I was the one who sent you the summons.","Huh...?","That face injury...","...","Let me introduce myself again."],talk2:["I'm the king's younger brother, prince Ethelbald.","!","I'm so sorry.","I lied.  I used my sword against you.","You of all people?","You've tried to kill the king so many times...","Oh no doubt.","I plotted to kill the king.","Please let me explain everything.","You know that the king fought the dragon ten years ago, yes?"],question:["We know","We didn't know"],talk3:["Yes,","Ten years ago, the king fought against Sonberk and sealed it in the Temple of Grefalde.","But about half a month ago,","Custodians at the Temple of Grefalde told me the dragon was awakening.","Sonberk resented the king and wanted revenge.","I went to the Temple of Grefalde many times,","To negotiate with Sonberk on behalf of my older brother.","I persuaded Sonberk to not seek revenge on the kingdom in exchange for whatever it wanted.","I offered everything I could think of, but Sonberk's wishes were consistent:","The king's death in exchange for leaving the kingdom in peace.","Eventually I gave in.  I agreed to Sonberk's demands.","Regretfully, I thought I would save the kingdom at the cost of losing my brother.","Oh, that's awful.","Do you remember the first time we ran across each other here?","That day I was trying to kill my brother.","But you three stopped me.","And I robbed you of this crystal.","The time crystal!","This is clearly a wonderous artifact.","Soon after that day, this crystal took me to another world.","I didn't know what had happened, but soon I realized something,","I was here... but in a different era.","Was it...","The era from when you came?","Yes.","The crystal connects two periods of time.","You went to our time.","What did you see there?","This royal castle...","In ruins, our entire kingdom was destroyed.","Eh!?","That shouldn't be...","I saw it with my own eyes.","It was unquestionably the work of a dragon.","Sonberk burned down our kingdom because I failed to kill my brother that day.","That's...","I don't know what the kingdom's future was like before you came.","But I knew that Sonberk's wrath had to be contained at all costs.","I understood that much.","So, even after returning to this era, I kept looking for another opportunity to kill the king.","...","But in the end you stopped your attempts on the king and faced Sonberk yourself, right?","I changed my mind.","Originally I had never thought of defeating a dragon in the first place.","But after you challenged and defeated me in the catacombs,","I decided to confront the dragon with my brother.","In the end I broke and you helped me.","It was the king who defeated Sonberk to begin with.","That's right.","I decided to try to help him do it again.","Anyways, I no longer had a choice.","I'm sorry to call you here like this.","I thought there might be trouble if I didn't return this crystal."],item:"Time Crystal",talk4:["Thank you.","What a surprise,","I still haven't wrapped my head around it all.","I'm glad to finally learn what you were doing.","You have always been a mystery.","And then,","I'm glad you reconsidered the assassination at the end.","Now that we've finished our purpose here, we wish to go home.","Honestly, I was a little worried we would never make it back...","But,","You can rest assured that this era is one of peace.","...","Yes, you shouldn't have to worry anymore.","Come on... go home.","Yeah.","...","Goodbye."],end1:["My role is over, I won't run from the guards.","The times shine brightly.","Our peaceful kingdom,","Ruled by King Edgar the Peaceful ."],end2:["Hey, over there!","The assassin in a black robe!","Don't let him get away, shoot!","So, do it."],end3:["A King,|And a kingdom,","Sung of through the ages."]}},1720:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.state=this.getDefaultSetting(),this.initializedLang=this.state.lang,this.loadSetting()}loadSetting(){const e=localStorage.getItem("setting");if(e)try{const t=JSON.parse(e);this.state=t,this.initializedLang=t.lang}catch(e){}}save(){const e=JSON.stringify(this.state);localStorage.setItem("setting",e)}getDefaultSetting(){const e=(()=>{const e=window.navigator;return e.languages?e.languages[0]:e.language||e.userLanguage||e.browserLanguage})();let t="en";return e.startsWith("ja")?t="ja":e.startsWith("zh")&&(t="zh"),{bgm:100,se:100,controller:0,lang:t}}}},1721:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.encrypt=(e,t)=>Array.from(e).map(e=>e.charCodeAt()+t).join(","),t.decrypt=(e,t)=>String.fromCharCode(...e.split(",").map(e=>Number(e)+t)),t.shiftString=(e,t)=>e.split("").map(e=>String.fromCharCode(e.charCodeAt()+t)).join("")},1722:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(145)),r=s(a(12));function s(e){return e&&e.__esModule?e:{default:e}}class o extends n.default{constructor(e,t,a,n,s,o){super(e,n,s,o),this.scene=e,this.setPosition(t,a),this.activePointer=!1,this.button=e.add.circle(0,0,9,r.default.COLORS.gray).setStrokeStyle(1,r.default.COLORS.ghost),this.button.setInteractive().on("pointerdown",e=>{this.scene.audio.se("click"),this.activePointer=e}),this.setInteractive().on("pointerdown",e=>{this.scene.audio.se("click"),this.setValueOfPointer(e),this.activePointer=e}),this.add(this.button),this.setButtonX()}preUpdate(){this.activePointer&&(this.setValueOfPointer(this.activePointer),this.activePointer.isDown||(this.emit("pointerup"),this.activePointer=null))}setValueOfPointer(e){const t=e.position.x,a=this.screenX+this.width*-this.originX,n=Math.fix(t-a,0,this.width)/this.width,r=this.valueMax*n;this.value=r,this.setButtonX(),this.emit("updated",r)}setButtonX(){const e=this.width*-this.originX,t=this.width*this.barScale;this.button.x=e+t}get screenX(){const e=(t,a)=>t.parentContainer?e(t.parentContainer,a+t.parentContainer.x):a;return e(this,this.x)}}t.default=o},1723:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(12),s=(n=r)&&n.__esModule?n:{default:n};class o extends Phaser.GameObjects.Container{constructor(e,t,a,n){super(e,t,a),this.scene=e,this.rows=n.map((e,t)=>this.getRow(e,t)),this.rows.reduce((e,t)=>(t.setPosition(e+t.width.half,0),t.x+t.width.half+40),0),this.add(this.rows),this.setValue(0)}getRow(e,t){const a=this.scene.add.container(0,0);a.value=e;const n=this.scene.add.text(13,0,e,{align:"center",fontSize:15,fontFamily:s.default.FONTS.UI}).setOrigin(.5,.5),r=this.scene.add.circle(-n.width.half-5,0,9,s.default.COLORS.ghost),o=this.scene.add.circle(-n.width.half-5,0,6,s.default.COLORS.theme);return a.radio=o,a.setSize(n.width+32,25),a.add([r,o,n]),a.setInteractive().on("pointerdown",()=>{this.scene.audio.se("click"),this.setValue(t),this.emit("updated",t)}),a}setValue(e){this.rows.forEach((t,a)=>{a===e?t.radio.setFillStyle(s.default.COLORS.theme,1):t.radio.setFillStyle(s.default.COLORS.dark,.5)})}}t.default=o},1724:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=p(a(1725)),r=p(a(743)),s=p(a(1729)),o=p(a(193)),i=p(a(43)),l=p(a(52)),h=p(a(1792)),c=p(a(751)),d=p(a(146)),u=p(a(147)),m=p(a(745)),g=p(a(1793));function p(e){return e&&e.__esModule?e:{default:e}}const y={lost:[{key:"francisca",distance:250,tweets:[e("tweet.lost.francisca.0"),e("tweet.lost.francisca.1")]},{key:"jaquelyn",distance:300,tweets:[e("tweet.lost.jaquelyn.0"),e("tweet.lost.jaquelyn.1")]}]};class f extends Phaser.Scene{constructor(){super({key:"Game",active:!1})}create(t){this.frame=0,this.storage=i.default,this.substances=this.add.group(),this.player=new n.default(this,t.x,t.y).setR(this.storage.state.r).setDisplayName(e("chara.ann")),this.francisca=new h.default(this,t.x,t.y-1,"francisca").setR(this.storage.state.r).setFollowDiff(8).setSpeed(230).setDisplayName(e("chara.francisca")),this.jaquelyn=new h.default(this,t.x,t.y-2,"jaquelyn").setR(this.storage.state.r).setFollowDiff(20).setSpeed(220).setDisplayName(e("chara.jaquelyn")),["number","string"].includes(typeof t.r)&&this.player.setR(t.r),this.player.on("walk",()=>{this.event.enemyGroups&&!this.ui.eventMode&&(this.encountDelay--,this.encountDelay<=(this.stronger?200:80)&&this.ui.setEncounter(!0,this.stronger),this.encountDelay<=0&&this.encounter(!this.stronger))}),this.map=new r.default(this,t.map),this.storage.state.visited.includes(t.map)||this.storage.state.visited.push(t.map),this.camera=this.getCamera(),this.event=s.default[t.map]||{},this.ui.audio.setBgm(this.event.bgm||null),this.ui.audio.setSceneVolume(this.event.sceneVolume||1),this.event.create&&this.event.create(this),this.setEncountDelay(t.encountDelay),this.frameShadow=this.add.sprite(0,0,"frame").setOrigin(0,0).setDepth(1e6).setScrollFactor(0),this.ui.clearMapInfo(),this.ui.informMapName(t.informMapName).then(async()=>{await this.ui.sleep(150),t.save&&(await this.ui.snapshopForSaveData(),this.storage.save(0),this.ui.systemMessage("Saving...")),this.ui.showMapInfo("room1"!==t.map?this.event:null),this.ui.battlerSummary.show(),this.ui.chapterCredit()})}update(e,t){if(this.frame++,this.event.update&&this.event.update(this),this.map.update(e),this.frame%20==0&&this.tweetLost(),this.touchMode&&!this.ui.eventMode){const e=Math.fix(this.player.x+this.ui.virtualStick.velocityX,0,this.map.width),t=Math.fix(this.player.y+this.ui.virtualStick.velocityY,0,this.map.height);this.player.setTargetPosition(e,t)}const a=this.input.manager.pointers.find(e=>e.isDown);if(a){if(this.ui.eventMode||this.touchMode)return;const e=a.x+this.camera.scrollX,t=a.y+this.camera.scrollY;if(this.map.isCollides(e.toTile,t.toTile))return;this.player.setTargetPosition(e,t)}}get ui(){return this.scene.get("UI")}get audio(){return this.ui.audio}get touchMode(){return this.ui.touchMode}get npcList(){const e=[d.default,u.default,m.default];return this.children.list.filter(t=>e.includes(t.constructor))}get checkables(){return this.npcList.filter(e=>e.checkable)}get nearestCheckable(){const e=Math.min(...this.checkables.map(e=>e.distanceToPlayer));return this.checkables.find(t=>t.distanceToPlayer===e)}talk(e,t){return this.ui.talk(e,t)}select(e,t){return this.ui.select(e,t)}blur(e){e&&this.camera.setRenderToTexture("blur"),e||this.camera.clearRenderToTexture()}mapChange(e,t,a,{r:n=null,save:r=!0,speed:s="fast",informMapName:o}={}){this.ui.battlerSummary.hide(),this.alreadyTweetLost=!1,this.scene.pause("Game");const i=Math.max(this.encountDelay,300);return this.ui.transition(s).then(()=>{this.scene.start("Game",{map:e,x:t,y:a,r:n,save:r,encountDelay:i,informMapName:o})})}backToTitle(){return this.ui.transition("normal").then(()=>{this.scene.start("Title")})}getCamera(){const e=this.cameras.main;return e.setBounds(0,0,this.map.width,this.map.height),e.roundPixels=!0,e.setZoom(1),e.startFollow(this.player,!0,.1,.1),e.updateFollow=()=>e.centerOn(e._follow.x,e._follow.y),e.look=(t,a,n,r=!1)=>{const s=r?e.scrollX+e.centerX+t:t,o=r?e.scrollY+e.centerY+a:a,i=s-e._follow.x,l=o-e._follow.y;return new Promise(t=>{e.pan(s,o,n,"Power2",!1,(a,n)=>{1===n&&(e.setFollowOffset(-i,-l),t())})})},e.revert=(t=0)=>e.look(e._follow.x,e._follow.y,t),e}get stronger(){return Math.round(i.default.state.battlers.reduce((e,t)=>e+t.lv,0)/3)>this.event.enemyLevel}encounter(e){if(this.setEncountDelay(),!e)return;this.player.stopWalk();const t=this.event.enemyGroups.random().map(e=>(0,l.default)(e,this.event.enemyLevel)),a=this.event.battleBgm;this.ui.battle(t,{bgm:a}).then(()=>{(0,g.default)(this)})}setEncountDelay(e){this.ui.setEncounter(!1),this.encountDelay=e||Math.randomInt(400,600)}get members(){return[this.player,this.francisca,this.jaquelyn]}setMembersPosition(e,t,a){this.members.forEach((n,r)=>{n.setPosition(e,0===r?t:t-1),a&&n.setR(a)})}async tweetOnce(e,t,a){return!this.storage.state.tweets.includes(a)&&(this.storage.state.tweets.push(a),e.tweet(t))}setDebugAction(){window.storage=i.default,this.input.keyboard.on("keydown_I",()=>{console.log(`x: ${this.player.x}, y: ${this.player.y}, tileX: ${this.player.x.toTile} tileY: ${this.player.y.toTile}`),console.log(this.storage.state)}),this.input.keyboard.on("keydown_M",()=>{const e=document.createElement("div");e.setAttribute("class","debugBox"),document.getElementById("game").appendChild(e);const t=document.createElement("select");t.id="select",e.appendChild(t),o.default.tilemapTiledJSON.forEach(e=>{const a=document.createElement("option");a.value=e[0],a.text=e[0],t.appendChild(a)}),t.onchange=()=>this.mapChange(t.value,20..toPixelCenter,20..toPixelCenter);const a=document.createElement("input");a.type="file",a.innerText="Data Import",a.onchange=e=>{const t=e.target.files[0],a=new FileReader;a.readAsText(t),a.onload=e=>{const t=e.target.result;this.storage.state=this.storage.fixState(JSON.parse(t)),this.mapChange(this.storage.state.map,this.storage.state.x,this.storage.state.y,{save:!1})}},e.appendChild(a);const n=document.createElement("button");n.innerText="Data Export",n.onclick=()=>{const e=new Blob([JSON.stringify(this.storage.state,null,"  ")],{type:"text/json"});(0,c.default)(URL.createObjectURL(e),"savedata.json")},e.appendChild(n);const r=document.createElement("span");e.appendChild(r),setInterval(()=>{r.innerText="FPS: "+this.game.loop.actualFps},100)})}tweetLost(){if(this.alreadyTweetLost)return;const e=y.lost.random();this[e.key].distanceToPlayer>e.distance&&(this[e.key].tweet(e.tweets.random()),this.alreadyTweetLost=!0)}}t.default=f}).call(this,a(3).default)},1725:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(146)),r=s(a(12));function s(e){return e&&e.__esModule?e:{default:e}}class o extends n.default{constructor(e,t,a){super(e,t,a,"player",{width:r.default.TILE_SIZE,height:r.default.TILE_SIZE}),this.targetMarker=e.add.sprite(0,0,"focus").setOrigin(.5,.5).setScale(0).setAlpha(0),this.targetMarker.anim=this.scene.add.tween({targets:this.targetMarker,duration:600,ease:"Power2",scale:.4,alpha:.5,loop:100}),this.targetMarker.blendMode=1,this.addAt(this.targetMarker,0),this.setSpeed(240);const n=[t,a];this.positionHistory=100..toArray().fill(n)}preUpdate(){super.preUpdate(),!this.targetMarker.visible&&this.hasTargetPosition&&this.targetMarker.anim.seek(0),this.targetMarker.setVisible(this.hasTargetPosition&&!this.scene.touchMode&&!this.scene.ui.eventMode),this.targetMarker.setPosition(this.diffToFollowingX,this.diffToFollowingY),this.scene.storage.state.map=this.scene.map.name,this.scene.storage.state.x=this.x,this.scene.storage.state.y=this.y,this.scene.storage.state.r=this.r,this.walking&&(this.emit("walk"),this.positionHistory.unshift([this.x,this.y]),this.positionHistory.length>100&&this.positionHistory.pop())}setPosition(e,t){return this.positionHistory&&this.positionHistory.fill([e,t]),super.setPosition(e,t)}}t.default=o},1726:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(12),s=(n=r)&&n.__esModule?n:{default:n};const o=[[11,2],[21,0],[43,2],[55,11],[46,22],[31,26],[27,32],[23,26],[9,22],[0,11]],i=[-.5,0,.5,.5,.5,0,0,0,-.5,-.5];class l extends Phaser.GameObjects.Container{constructor(e,t=0,a=0){super(e,t,a),this.scene=e,this.bg=e.add.polygon(0,0,o,s.default.COLORS.black).setAlpha(.7),this.text=e.add.text(0,-5,"",{fill:s.default.COLORS.white.toColorString,fontSize:11,fontFamily:s.default.FONTS.TEXT,lineSpacing:4.5,stroke:s.default.COLORS.dark.toColorString,strokeThickness:1.5}).setOrigin(.5,.5).setPadding(0,2,0,0),this.add([this.bg,this.text]),this.setVisible(!1),e.add.existing(this),this.timer=null}setText(e,t){this.visible||(this.setScale(0,0).setAlpha(0),this.scene.add.tween({targets:this,scaleX:1,scaleY:1,alpha:1,duration:150,ease:"Power2"}),this.setVisible(!0)),clearTimeout(this.timer),this.timer=setTimeout(()=>{this.hide().then(()=>t&&t())},3e3),this.text.text=e,this.bg.pathData=o.map((t,a)=>{const n=5.5*Math.max(0,e.width-3)*i[a];return[t[0]+n,t[1]]}).flat()}hide(){return new Promise(e=>{this.scene.add.tween({targets:this,scaleX:0,scaleY:0,alpha:0,duration:150,ease:"Power2",onComplete:()=>{this.setVisible(!1),e()}})})}destroy(){clearTimeout(this.timer),super.destroy()}}t.default=l},1727:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(744),s=(n=r)&&n.__esModule?n:{default:n};class o extends s.default{constructor(e,t,a,n,r,s,o,i){super(e,r,s,o,i),this.originalEvent=async()=>{"world"===t?e.ui.worldMap():e.mapChange(t,a.toPixelCenter,n.toPixelCenter)},this.setEvent(this.originalEvent)}setBlocked(e){return this.setEvent(e?()=>e(this.originalEvent):this.originalEvent),this}}t.default=o},1728:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(147),s=(n=r)&&n.__esModule?n:{default:n};class o extends s.default{constructor(t,a,n){super(t,a,n,"crystal"),this.shadow.y-=3,this.shadow.setScale(1.3,.5);const r=t.add.sprite(0,0,"chara_sprite/crystal").setFrame(2).setOrigin(.5,1).setBlendMode(Phaser.BlendModes.OVERLAY).setAlpha(.4),s=t.add.tween({targets:r,duration:900,yoyo:!0,alpha:.9,loop:-1});this.add(r),this.setTapEvent(async()=>{t.storage.state.battlers.forEach(e=>e.hp=e.max_hp),t.audio.se("heal"),t.ui.sleep(600).then(()=>t.ui.announce(e("hpRecovered"))),s.stop(),r.setAlpha(1),t.add.tween({targets:r,duration:900,alpha:0,onComplete:()=>r.destroy()}),this.image.setFrame(1),this.removeTapEvent()})}}t.default=o}).call(this,a(3).default)},1729:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=J(a(1730)),r=J(a(1732)),s=J(a(1739)),o=J(a(1742)),i=J(a(1743)),l=J(a(1744)),h=J(a(1745)),c=J(a(1746)),d=J(a(1747)),u=J(a(1748)),m=J(a(1749)),g=J(a(1750)),p=J(a(1751)),y=J(a(1752)),f=J(a(1753)),w=J(a(1754)),b=J(a(1755)),x=J(a(1756)),k=J(a(1757)),v=J(a(1758)),I=J(a(1759)),_=J(a(1760)),C=J(a(1761)),T=J(a(1762)),O=J(a(1763)),S=J(a(1765)),j=J(a(1766)),E=J(a(1767)),P=J(a(1768)),M=J(a(1769)),W=J(a(1770)),A=J(a(1771)),H=J(a(1773)),R=J(a(1775)),B=J(a(1776)),D=J(a(1778)),L=J(a(1779)),F=J(a(1780)),N=J(a(1781)),Y=J(a(1782)),q=J(a(1783)),G=J(a(1784)),z=J(a(1786)),U=J(a(1787)),K=J(a(1788)),$=J(a(1789)),V=J(a(1790)),X=J(a(1791));function J(e){return e&&e.__esModule?e:{default:e}}t.default={room1:n.default,town1:r.default,castle1:s.default,forest1:o.default,forest2:i.default,forest3:l.default,forest4:h.default,forest5:c.default,forest6:d.default,forest7:u.default,forest8:m.default,forest9:g.default,underpass1:p.default,underpass2:y.default,underpass3:f.default,underpass4:w.default,underpass5:b.default,underpass6:x.default,underpass7:k.default,underpass8:v.default,underpass9:I.default,underpass10:_.default,catacomb1:C.default,catacomb2:T.default,catacomb3:O.default,catacomb4:S.default,catacomb5:j.default,catacomb6:E.default,catacomb7:P.default,catacomb8:M.default,catacomb9:W.default,catacomb10:A.default,catacomb11:H.default,temple1:R.default,temple2:B.default,temple3:D.default,temple4:L.default,temple5:F.default,temple6:N.default,temple7:Y.default,temple8:q.default,temple9:G.default,temple10:z.default,temple11:U.default,temple12:K.default,temple13:$.default,temple14:V.default,temple15:X.default}},1730:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(1731),s=a(43),o=(n=s)&&n.__esModule?n:{default:n};t.default={name:`${e("area.town")} - ${e("areaSub.room")}`,get bgm(){return 4===o.default.state.chapter?"rain":"town"},sceneVolume:.3,create(t){t.storage.state.battlers.forEach(e=>e.hp=e.max_hp);const a=t.map.getObjectById(13);(0,r.execChapterBeginEvents)(t,a),t.map.getObjectById(11).setEvent(async()=>{t.francisca.setTarget(t.player),t.jaquelyn.setTarget(t.player)},!1);const n=t.map.getObjectById(12).setEvent(async()=>{Math.chance(50)?t.francisca.tweet(e("mapEvent.room1.bed.0")):t.jaquelyn.tweet(e("mapEvent.room1.bed.1")),n.destroy()},!1)}}}).call(this,a(3).default)},1731:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.execChapterBeginEvents=void 0;var n,r=a(194),s=(n=r)&&n.__esModule?n:{default:n};const o=e=>{e.weapons=[{id:1,weapon_id:1},{id:2,weapon_id:2},{id:3,weapon_id:1}],e.battlers.forEach((e,t)=>e.weapon=t+1)},i=(t.execChapterBeginEvents=(e,t)=>{const a=e.storage.state.chapter,n=e.storage.state.event.chapter_begin;if(n[a])return i(e,t,a);e.francisca.setPosition(655,440).setR("up").setTarget(null),e.jaquelyn.setPosition(591,440).setR("up").setTarget(null),e.ui.autoEvent(async()=>{await l[a](e),e.ui.setChapterCreditFlag(!0),n[a]=!0,i(e,t,a)})},(t,a,n)=>{a.setTapEvent(async()=>{const a=[[{chara:"ann",text:e("roomBook.0.0")},{chara:"ann",text:e("roomBook.0.1")}],[{chara:"ann",text:e("roomBook.1.0")},{chara:"ann",text:e("roomBook.1.1")}],[{chara:"ann",text:e("roomBook.2.0")},{chara:"ann",text:e("roomBook.2.1")}],[{chara:"ann",text:e("roomBook.3.0")},{chara:"ann",text:e("roomBook.3.1")}],[{chara:"ann",text:e("roomBook.4.0")},{chara:"ann",text:e("roomBook.4.1")},{chara:"ann",text:e("roomBook.4.2")}],[{chara:"ann",text:e("roomBook.5.0")},{chara:"ann",text:e("roomBook.5.1")},{chara:"ann",text:e("roomBook.5.2")}]];await t.talk(a[n])})}),l=[async t=>{await t.ui.sleep(1500),await t.talk([{chara:"ann",text:e("roomEv.0.0.0")},{chara:"jaquelyn",text:e("roomEv.0.0.1")},{chara:"francisca",text:e("roomEv.0.0.2")},{chara:"francisca",text:e("roomEv.0.0.3")},{chara:"ann",text:e("roomEv.0.0.4")}]);const a=await t.select([e("roomEv.0.1.0"),e("roomEv.0.1.1")]);await t.talk([...0===a?[{chara:"ann",text:e("roomEv.0.2.0")},{chara:"jaquelyn",text:e("roomEv.0.2.1")}]:[{chara:"francisca",text:e("roomEv.0.3.0")},{chara:"jaquelyn",text:e("roomEv.0.3.1")},{chara:"jaquelyn",text:e("roomEv.0.3.2")},{chara:"ann",text:e("roomEv.0.3.3")},{chara:"ann",text:e("roomEv.0.3.4")}],{chara:"ann",text:e("roomEv.0.4.0")},{chara:"jaquelyn",text:e("roomEv.0.4.1")},{chara:"francisca",text:e("roomEv.0.4.2")},{chara:"francisca",text:e("roomEv.0.4.3")},{chara:"ann",text:e("roomEv.0.4.4")},{chara:"francisca",text:e("roomEv.0.4.5")},{chara:"francisca",text:e("roomEv.0.4.6")},{chara:"jaquelyn",text:e("roomEv.0.4.7")},{chara:"jaquelyn",text:e("roomEv.0.4.8")},{chara:"ann",text:e("roomEv.0.4.9")},{chara:"jaquelyn",text:e("roomEv.0.4.10")},{chara:"jaquelyn",text:e("roomEv.0.4.11")},{chara:"ann",text:e("roomEv.0.4.12")},{chara:"francisca",text:e("roomEv.0.4.13")},{chara:"ann",text:e("roomEv.0.4.14")},{chara:"francisca",text:e("roomEv.0.4.15")},{chara:"ann",text:e("roomEv.0.4.16")},{chara:"francisca",text:e("roomEv.0.4.17")},{chara:"francisca",text:e("roomEv.0.4.18")},{chara:"jaquelyn",text:e("roomEv.0.4.19")},{chara:"francisca",text:e("roomEv.0.4.20")},{chara:"francisca",text:e("roomEv.0.4.21")},{chara:"ann",text:e("roomEv.0.4.22")},{chara:"jaquelyn",text:e("roomEv.0.4.23")},{chara:"jaquelyn",text:e("roomEv.0.4.24")}]),await t.ui.transition("normal"),o(t.storage.state),window.gtag&&window.gtag("event","point",{event_category:"start_cp0"})},async t=>{t.player.setR("down"),await t.ui.sleep(1500),await t.talk([{chara:"ann",text:e("roomEv.1.0.0")},{chara:"jaquelyn",text:e("roomEv.1.0.1")},{chara:"francisca",text:e("roomEv.1.0.2")},{chara:"jaquelyn",text:e("roomEv.1.0.3")},{chara:"ann",text:e("roomEv.1.0.4")},{chara:"ann",text:e("roomEv.1.0.5")}]),await t.ui.sleep(2e3),await t.talk([{chara:"ann",text:e("roomEv.1.1.0")},{chara:"ann",text:e("roomEv.1.1.1")},{chara:"jaquelyn",text:e("roomEv.1.1.2")},{chara:"francisca",text:e("roomEv.1.1.3")},{chara:"jaquelyn",text:e("roomEv.1.1.4")},{chara:"ann",text:e("roomEv.1.1.5")},{chara:"francisca",text:e("roomEv.1.1.6")},{chara:"francisca",text:e("roomEv.1.1.7")},{chara:"jaquelyn",text:e("roomEv.1.1.8")},{chara:"ann",text:e("roomEv.1.1.9")},{chara:"francisca",text:e("roomEv.1.1.10")},{chara:"francisca",text:e("roomEv.1.1.11")},{chara:"jaquelyn",text:e("roomEv.1.1.12")},{chara:"ann",text:e("roomEv.1.1.13")},{chara:"jaquelyn",text:e("roomEv.1.1.14")},{chara:"ann",text:e("roomEv.1.1.15")},{chara:"ann",text:e("roomEv.1.1.16")},{chara:"ann",text:e("roomEv.1.1.17")},{chara:"francisca",text:e("roomEv.1.1.18")},{chara:"ann",text:e("roomEv.1.1.19")},{chara:"ann",text:e("roomEv.1.1.20")},{chara:"ann",text:e("roomEv.1.1.21")},{chara:"francisca",text:e("roomEv.1.1.22")},{chara:"ann",text:e("roomEv.1.1.23")},{chara:"jaquelyn",text:e("roomEv.1.1.24")},{chara:"ann",text:e("roomEv.1.1.25")},{chara:"ann",text:e("roomEv.1.1.26")},{chara:"jaquelyn",text:e("roomEv.1.1.27")}]),await t.ui.chapterStart(`${s.default[1].name} ${s.default[1].title}`),o(t.storage.state)},async t=>{t.player.setR("down"),await t.ui.sleep(1500),await t.talk([{chara:"ann",text:e("roomEv.2.0.0")},{chara:"jaquelyn",text:e("roomEv.2.0.1")},{chara:"ann",text:e("roomEv.2.0.2")},{chara:"ann",text:e("roomEv.2.0.3")},{chara:"ann",text:e("roomEv.2.0.4")},{chara:"ann",text:e("roomEv.2.0.5")},{chara:"francisca",text:e("roomEv.2.0.6")},{chara:"jaquelyn",text:e("roomEv.2.0.7")},{chara:"jaquelyn",text:e("roomEv.2.0.8")},{chara:"ann",text:e("roomEv.2.0.9")},{chara:"ann",text:e("roomEv.2.0.10")},{chara:"ann",text:e("roomEv.2.0.11")},{chara:"ann",text:e("roomEv.2.0.12")},{chara:"ann",text:e("roomEv.2.0.13")},{chara:"francisca",text:e("roomEv.2.0.14")},{chara:"ann",text:e("roomEv.2.0.15")},{chara:"ann",text:e("roomEv.2.0.16")},{chara:"ann",text:e("roomEv.2.0.17")},{chara:"francisca",text:e("roomEv.2.0.18")},{chara:"jaquelyn",text:e("roomEv.2.0.19")},{chara:"ann",text:e("roomEv.2.0.20")},{chara:"ann",text:e("roomEv.2.0.21")},{chara:"jaquelyn",text:e("roomEv.2.0.22")},{chara:"ann",text:e("roomEv.2.0.23")},{chara:"ann",text:e("roomEv.2.0.24")},{chara:"ann",text:e("roomEv.2.0.25")},{chara:"ann",text:e("roomEv.2.0.26")},{chara:"jaquelyn",text:e("roomEv.2.0.27")},{chara:"francisca",text:e("roomEv.2.0.28")},{chara:"jaquelyn",text:e("roomEv.2.0.29")},{chara:"ann",text:e("roomEv.2.0.30")},{chara:"francisca",text:e("roomEv.2.0.31")},{chara:"jaquelyn",text:e("roomEv.2.0.32")},{chara:"ann",text:e("roomEv.2.0.33")},{chara:"ann",text:e("roomEv.2.0.34")},{chara:"ann",text:e("roomEv.2.0.35")},{chara:"francisca",text:e("roomEv.2.0.36")},{chara:"francisca",text:e("roomEv.2.0.37")},{chara:"ann",text:e("roomEv.2.0.38")},{chara:"ann",text:e("roomEv.2.0.39")}]),await t.ui.chapterStart(`${s.default[2].name} ${s.default[2].title}`)},async t=>{t.player.setR("down"),await t.ui.sleep(1500),await t.talk([{chara:"francisca",text:e("roomEv.3.0.0")},{chara:"francisca",text:e("roomEv.3.0.1")},{chara:"ann",text:e("roomEv.3.0.2")},{chara:"jaquelyn",text:e("roomEv.3.0.3")},{chara:"ann",text:e("roomEv.3.0.4")},{chara:"ann",text:e("roomEv.3.0.5")},{chara:"ann",text:e("roomEv.3.0.6")},{chara:"ann",text:e("roomEv.3.0.7")},{chara:"francisca",text:e("roomEv.3.0.8")},{chara:"jaquelyn",text:e("roomEv.3.0.9")},{chara:"jaquelyn",text:e("roomEv.3.0.10")},{chara:"ann",text:e("roomEv.3.0.11")},{chara:"francisca",text:e("roomEv.3.0.12")},{chara:"jaquelyn",text:e("roomEv.3.0.13")},{chara:"ann",text:e("roomEv.3.0.14")},{chara:"ann",text:e("roomEv.3.0.15")},{chara:"ann",text:e("roomEv.3.0.16")},{chara:"ann",text:e("roomEv.3.0.17")},{chara:"jaquelyn",text:e("roomEv.3.0.18")},{chara:"francisca",text:e("roomEv.3.0.19")},{chara:"ann",text:e("roomEv.3.0.20")},{chara:"ann",text:e("roomEv.3.0.21")},{chara:"jaquelyn",text:e("roomEv.3.0.22")},{chara:"jaquelyn",text:e("roomEv.3.0.23")},{chara:"ann",text:e("roomEv.3.0.24")},{chara:"ann",text:e("roomEv.3.0.25")},{chara:"francisca",text:e("roomEv.3.0.26")},{chara:"ann",text:e("roomEv.3.0.27")},{chara:"ann",text:e("roomEv.3.0.28")},{chara:"ann",text:e("roomEv.3.0.29")}]),await t.ui.chapterStart(`${s.default[3].name} ${s.default[3].title}`)},async t=>{t.player.setR("down"),await t.ui.sleep(1500),await t.talk([{chara:"jaquelyn",text:e("roomEv.4.0.0")},{chara:"ann",text:e("roomEv.4.0.1")},{chara:"francisca",text:e("roomEv.4.0.2")},{chara:"francisca",text:e("roomEv.4.0.3")},{chara:"ann",text:e("roomEv.4.0.4")},{chara:"francisca",text:e("roomEv.4.0.5")},{chara:"ann",text:e("roomEv.4.0.6")},{chara:"jaquelyn",text:e("roomEv.4.0.7")},{chara:"ann",text:e("roomEv.4.0.8")},{chara:"ann",text:e("roomEv.4.0.9")},{chara:"ann",text:e("roomEv.4.0.10")},{chara:"ann",text:e("roomEv.4.0.11")},{chara:"ann",text:e("roomEv.4.0.12")},{chara:"jaquelyn",text:e("roomEv.4.0.13")},{chara:"jaquelyn",text:e("roomEv.4.0.14")},{chara:"ann",text:e("roomEv.4.0.15")},{chara:"ann",text:e("roomEv.4.0.16")},{chara:"francisca",text:e("roomEv.4.0.17")},{chara:"francisca",text:e("roomEv.4.0.18")},{chara:"francisca",text:e("roomEv.4.0.19")},{chara:"ann",text:e("roomEv.4.0.20")},{chara:"ann",text:e("roomEv.4.0.21")},{chara:"ann",text:e("roomEv.4.0.22")}]),await t.ui.chapterStart(`${s.default[4].name} ${s.default[4].title}`)},async t=>{t.player.setR("down"),await t.ui.sleep(1500),await t.talk([{chara:"ann",text:e("roomEv.5.0.0")},{chara:"francisca",text:e("roomEv.5.0.1")},{chara:"jaquelyn",text:e("roomEv.5.0.2")},{chara:"ann",text:e("roomEv.5.0.3")},{chara:"francisca",text:e("roomEv.5.0.4")},{chara:"jaquelyn",text:e("roomEv.5.0.5")},{chara:"ann",text:e("roomEv.5.0.6")},{chara:"ann",text:e("roomEv.5.0.7")},{chara:"ann",text:e("roomEv.5.0.8")},{chara:"ann",text:e("roomEv.5.0.9")},{chara:"ann",text:e("roomEv.5.0.10")},{chara:"ann",text:e("roomEv.5.0.11")},{chara:"ann",text:e("roomEv.5.0.12")},{chara:"ann",text:e("roomEv.5.0.13")},{chara:"francisca",text:e("roomEv.5.0.14")},{chara:"jaquelyn",text:e("roomEv.5.0.15")},{chara:"francisca",text:e("roomEv.5.0.16")},{chara:"ann",text:e("roomEv.5.0.17")},{chara:"ann",text:e("roomEv.5.0.18")},{chara:"jaquelyn",text:e("roomEv.5.0.19")},{chara:"jaquelyn",text:e("roomEv.5.0.20")},{chara:"ann",text:e("roomEv.5.0.21")},{chara:"ann",text:e("roomEv.5.0.22")},{chara:"ann",text:e("roomEv.5.0.23")},{chara:"francisca",text:e("roomEv.5.0.24")},{chara:"ann",text:e("roomEv.5.0.25")},{chara:"jaquelyn",text:e("roomEv.5.0.26")},{chara:"ann",text:e("roomEv.5.0.27")},{chara:"ann",text:e("roomEv.5.0.28")},{chara:"francisca",text:e("roomEv.5.0.29")},{chara:"jaquelyn",text:e("roomEv.5.0.30")},{chara:"ann",text:e("roomEv.5.0.31")},{chara:"jaquelyn",text:e("roomEv.5.0.32")},{chara:"jaquelyn",text:e("roomEv.5.0.33")},{chara:"ann",text:e("roomEv.5.0.34")},{chara:"ann",text:e("roomEv.5.0.35")},{chara:"francisca",text:e("roomEv.5.0.36")},{chara:"jaquelyn",text:e("roomEv.5.0.37")},{chara:"ann",text:e("roomEv.5.0.38")}]),await t.ui.chapterStart(`${s.default[5].name} ${s.default[5].title}`)}]}).call(this,a(3).default)},1732:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(1733)),r=c(a(1734)),s=c(a(1735)),o=c(a(1736)),i=c(a(1737)),l=c(a(1738)),h=c(a(43));function c(e){return e&&e.__esModule?e:{default:e}}const d=[n.default,r.default,s.default,o.default,i.default,l.default];t.default={name:`${e("areaSub.bellion")} - ${e("area.town")}`,get bgm(){return 4===h.default.state.chapter?"rain":"town"},create(t){t.map.getObjectById(6).setTapEvent(async()=>t.mapChange("room1",17..toPixel,16..toPixelCenter,{r:"up"}));const a=t.map.getObjectById(2).setDisplayName(e("chara.amber")).setRandomWalk(!0),n=t.map.getObjectById(7).setDisplayName(e("chara.elliott")),r=t.map.getObjectById(8).setDisplayName(e("chara.max")).setRandomWalk(!0),s=t.map.getObjectById(9).setDisplayName(e("chara.annabelle")),o=t.map.getObjectById(10).setDisplayName(e("chara.matilda")),i=t.map.getObjectById(18).setDisplayName(e("chara.soldier")).setVisible(!1),l=t.map.getObjectById(19).setDisplayName(e("chara.soldier")).setVisible(!1),h=t.map.getObjectById(12);d[t.storage.state.chapter](t,{amber:a,elliott:n,max:r,annabelle:s,matilda:o,area1:h,soldier1:i,soldier2:l}),4===t.storage.state.chapter&&t.map.rain(),this.greetings=[{chara:a,message:e("townGreeting.amber"),met:!1},{chara:n,message:e("townGreeting.elliott"),met:!1},{chara:r,message:e("townGreeting.max"),met:!1},{chara:s,message:e("townGreeting.annabelle"),met:!1}],this.cp4Tweets=[{chara:a,message:e("townGreeting4.amber"),met:!1},{chara:o,message:e("townGreeting4.matilda"),met:!1}],t.map.getObjectById(20).setTapEvent(async()=>{const a=t.storage.state.chapter,n=[e("townBoard.0"),e("townBoard.1"),e("townBoard.2"),e("townBoard.3"),e("townBoard.4"),e("townBoard.5")];await t.talk([{chara:"ann",text:n[a]}])})},update(e){(4===e.storage.state.chapter?this.cp4Tweets:this.greetings).filter(e=>!e.met&&e.chara.checkable).forEach(e=>{e.met=!0,e.chara.tweet(e.message)})}}}).call(this,a(3).default)},1733:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(195);t.default=(t,a)=>{const r=t.storage.state.event.m0;r.area||a.area1.setEvent(async()=>{await t.talk([{chara:"ann",text:e("townChapter0.ann.0")},{chara:"francisca",text:e("townChapter0.ann.1")},{chara:"francisca",text:e("townChapter0.ann.2")}]),r.area=!0,a.area1.setEvent(null)}),a.amber.setTapEvent(async a=>{r.talked_amber?await t.talk([{chara:a,text:e("townChapter0.amber.13")},{chara:"ann",text:e("townChapter0.amber.14")}]):(await t.talk([{chara:a,text:e("townChapter0.amber.0")},{chara:a,text:e("townChapter0.amber.1")},{chara:"ann",text:e("townChapter0.amber.2")},{chara:a,text:e("townChapter0.amber.3")},{chara:a,text:e("townChapter0.amber.4")},{chara:"ann",text:e("townChapter0.amber.5")},{chara:a,text:e("townChapter0.amber.6")},{chara:"ann",text:e("townChapter0.amber.7")},{chara:"ann",text:e("townChapter0.amber.8")},{chara:a,text:e("townChapter0.amber.9")},{chara:a,text:e("townChapter0.amber.10")},{chara:"ann",text:e("townChapter0.amber.11")},{chara:a,text:e("townChapter0.amber.12")},{chara:a,text:e("townChapter0.amber.13")},{chara:"ann",text:e("townChapter0.amber.14")}]),r.talked_amber=!0)}),a.annabelle.setTapEvent(async a=>{if(!r.talked_matilda)return(0,n.annabelle)(t,a);r.talked_annabelle?await t.talk([{chara:a,text:e("townChapter0.annabelle.11")}]):(await t.talk([{chara:a,text:e("townChapter0.annabelle.0")},{chara:a,text:e("townChapter0.annabelle.1")},{chara:"ann",text:e("townChapter0.annabelle.2")},{chara:a,text:e("townChapter0.annabelle.3")},{chara:a,text:e("townChapter0.annabelle.4")},{chara:"ann",text:e("townChapter0.annabelle.5")},{chara:a,text:e("townChapter0.annabelle.6")},{chara:"ann",text:e("townChapter0.annabelle.7")},{chara:a,text:e("townChapter0.annabelle.8")},{chara:a,text:e("townChapter0.annabelle.9")},{chara:"ann",text:e("townChapter0.annabelle.10")}]),r.talked_annabelle=!0,t.storage.state.allowed_area=Math.max(t.storage.state.allowed_area,1),t.ui.announce(e("unlockArea",e("area.castle"))))}),a.matilda.setTapEvent(async a=>{r.talked_matilda?await t.talk([{chara:a,text:e("townChapter0.matilda.20")}]):(await t.talk([{chara:"ann",text:e("townChapter0.matilda.0")},{chara:a,text:e("townChapter0.matilda.1")},{chara:"ann",text:e("townChapter0.matilda.2")},{chara:a,text:e("townChapter0.matilda.3")},{chara:a,text:e("townChapter0.matilda.4")},{chara:a,text:e("townChapter0.matilda.5")},{chara:"ann",text:e("townChapter0.matilda.6")},{chara:a,text:e("townChapter0.matilda.7")},{chara:"ann",text:e("townChapter0.matilda.8")},{chara:a,text:e("townChapter0.matilda.9")},{chara:a,text:e("townChapter0.matilda.10")},{chara:"ann",text:e("townChapter0.matilda.11")},{chara:a,text:e("townChapter0.matilda.12")},{chara:a,text:e("townChapter0.matilda.13")},{chara:a,text:e("townChapter0.matilda.14")},{chara:"jaquelyn",text:e("townChapter0.matilda.15")},{chara:"jaquelyn",text:e("townChapter0.matilda.16")},{chara:"jaquelyn",text:e("townChapter0.matilda.17")},{chara:a,text:e("townChapter0.matilda.18")},{chara:a,text:e("townChapter0.matilda.19")}]),r.talked_matilda=!0)}),a.elliott.setTapEvent(async e=>(0,n.elliott)(t,e)),a.max.setTapEvent(async e=>(0,n.max)(t,e))}}).call(this,a(3).default)},1734:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(195);t.default=(t,a)=>{const r=t.storage.state.event.m1;a.amber.setTapEvent(async a=>{r.talked_amber?await t.talk([{chara:a,text:e("townChapter1.amber.0")}]):(await t.talk([{chara:a,text:e("townChapter1.amber.0")},{chara:"ann",text:e("townChapter1.amber.1")},{chara:a,text:e("townChapter1.amber.2")},{chara:a,text:e("townChapter1.amber.3")},{chara:"ann",text:e("townChapter1.amber.4")},{chara:a,text:e("townChapter1.amber.5")},{chara:a,text:e("townChapter1.amber.6")},{chara:"ann",text:e("townChapter1.amber.7")}]),r.talked_amber=!0)}),a.annabelle.setTapEvent(async a=>{if(!r.talked_amber)return(0,n.annabelle)(t,a);r.talked_annabelle?await t.talk([{chara:a,text:e("townChapter1.annabelle.13")},{chara:"ann",text:e("townChapter1.annabelle.14")}]):(await t.talk([{chara:a,text:e("townChapter1.annabelle.0")},{chara:"ann",text:e("townChapter1.annabelle.1")},{chara:a,text:e("townChapter1.annabelle.2")},{chara:a,text:e("townChapter1.annabelle.3")},{chara:"ann",text:e("townChapter1.annabelle.4")},{chara:a,text:e("townChapter1.annabelle.5")},{chara:"ann",text:e("townChapter1.annabelle.6")},{chara:a,text:e("townChapter1.annabelle.7")},{chara:a,text:e("townChapter1.annabelle.8")},{chara:"ann",text:e("townChapter1.annabelle.9")},{chara:"ann",text:e("townChapter1.annabelle.10")},{chara:a,text:e("townChapter1.annabelle.11")},{chara:"ann",text:e("townChapter1.annabelle.12")}]),r.talked_annabelle=!0)}),a.matilda.setTapEvent(async e=>(0,n.matilda)(t,e)),a.elliott.setTapEvent(async n=>{const s=a.max;if(r.talked_annabelle)if(r.talked_elliott)await t.talk([{chara:n,text:e("townChapter1.elliott.2.0")},{chara:n,text:e("townChapter1.elliott.2.1")}]);else{await t.talk([{chara:"ann",text:e("townChapter1.elliott.1.0")},{chara:n,text:e("townChapter1.elliott.1.1")},{chara:n,text:e("townChapter1.elliott.1.2")},{chara:n,text:e("townChapter1.elliott.1.3")},{chara:"ann",text:e("townChapter1.elliott.1.4")},{chara:n,text:e("townChapter1.elliott.1.5")}]);const a=await t.select([e("townChapter1.elliott.1.6"),e("townChapter1.elliott.1.7")]);await t.talk([...0===a?[{chara:"francisca",text:e("townChapter1.elliott.1.8")},{chara:"ann",text:e("townChapter1.elliott.1.9")},{chara:s,text:e("townChapter1.elliott.1.10")}]:[{chara:s,text:e("townChapter1.elliott.1.11")}],{chara:s,text:e("townChapter1.elliott.1.12")},{chara:n,text:e("townChapter1.elliott.1.13")},{chara:n,text:e("townChapter1.elliott.1.14")},{chara:s,text:e("townChapter1.elliott.1.15")},{chara:s,text:e("townChapter1.elliott.1.16")},{chara:s,text:e("townChapter1.elliott.1.17")},{chara:n,text:e("townChapter1.elliott.1.18")},{chara:s,text:e("townChapter1.elliott.1.19")},{chara:s,text:e("townChapter1.elliott.1.20")},{chara:s,text:e("townChapter1.elliott.1.21")},{chara:"ann",text:e("townChapter1.elliott.1.22")},{chara:s,text:e("townChapter1.elliott.1.23")},{chara:s,text:e("townChapter1.elliott.1.24")},{chara:n,text:e("townChapter1.elliott.1.25")},{chara:n,text:e("townChapter1.elliott.1.26")},{chara:n,text:e("townChapter1.elliott.1.27")},{chara:"ann",text:e("townChapter1.elliott.1.28")}]),r.talked_elliott=!0,t.storage.state.allowed_area=Math.max(t.storage.state.allowed_area,2),t.ui.announce(e("unlockArea",e("area.forest")))}else await t.talk([{chara:"ann",text:e("townChapter1.elliott.0.0")},{chara:n,text:e("townChapter1.elliott.0.1")},{chara:n,text:e("townChapter1.elliott.0.2")},{chara:n,text:e("townChapter1.elliott.0.3")}])}),a.max.setTapEvent(async e=>(0,n.max)(t,e))}}).call(this,a(3).default)},1735:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(195);t.default=(t,a)=>{const r=t.storage.state.event.m2;a.amber.setTapEvent(async a=>{if(r.talked_annabelle)r.talked_amber2?await t.talk([{chara:a,text:e("townChapter2.amber.solve.18")}]):(await t.talk([{chara:"ann",text:e("townChapter2.amber.solve.0")},{chara:a,text:e("townChapter2.amber.solve.1")},{chara:"ann",text:e("townChapter2.amber.solve.2")},{chara:a,text:e("townChapter2.amber.solve.3")},{chara:a,text:e("townChapter2.amber.solve.4")},{chara:"ann",text:e("townChapter2.amber.solve.5")},{chara:a,text:e("townChapter2.amber.solve.6")},{chara:a,text:e("townChapter2.amber.solve.7")},{chara:"ann",text:e("townChapter2.amber.solve.8")},{chara:a,text:e("townChapter2.amber.solve.9")},{chara:a,text:e("townChapter2.amber.solve.10")},{chara:"ann",text:e("townChapter2.amber.solve.11")},{chara:a,text:e("townChapter2.amber.solve.12")},{chara:a,text:e("townChapter2.amber.solve.13")},{chara:"ann",text:e("townChapter2.amber.solve.14")},{chara:a,text:e("townChapter2.amber.solve.15")},{chara:a,text:e("townChapter2.amber.solve.16")},{chara:a,text:e("townChapter2.amber.solve.17")}]),r.talked_amber2=!0,t.storage.state.allowed_area=Math.max(t.storage.state.allowed_area,3),t.ui.announce(e("unlockArea",e("area.underpass"))));else{const n=await t.select([e("townChapter2.amber.question.0"),e("townChapter2.amber.question.1"),e("townChapter2.amber.question.2")]);if(2===n)return;await t.talk(0===n?[{chara:a,text:e("townChapter2.amber.answer0.0")},{chara:a,text:e("townChapter2.amber.answer0.1")},{chara:"ann",text:e("townChapter2.amber.answer0.2")},{chara:a,text:e("townChapter2.amber.answer0.3")},{chara:a,text:e("townChapter2.amber.answer0.4")},{chara:"ann",text:e("townChapter2.amber.answer0.5")}]:[{chara:a,text:e("townChapter2.amber.answer1.0")},{chara:a,text:e("townChapter2.amber.answer1.1")},{chara:a,text:e("townChapter2.amber.answer1.2")},{chara:"ann",text:e("townChapter2.amber.answer1.3")},{chara:a,text:e("townChapter2.amber.answer1.4")},{chara:a,text:e("townChapter2.amber.answer1.5")},{chara:a,text:e("townChapter2.amber.answer1.6")},{chara:a,text:e("townChapter2.amber.answer1.7")},{chara:"francisca",text:e("townChapter2.amber.answer1.8")},{chara:"ann",text:e("townChapter2.amber.answer1.9")},{chara:a,text:e("townChapter2.amber.answer1.10")},{chara:a,text:e("townChapter2.amber.answer1.11")},{chara:a,text:e("townChapter2.amber.answer1.12")}]),1===n&&(r.talked_amber1=!0)}}),a.annabelle.setTapEvent(async a=>{if(!r.talked_elliott||r.talked_amber2)return(0,n.annabelle)(t,a);await t.talk([...r.talked_annabelle?[]:[{chara:a,text:e("townChapter2.annabelle.0")},{chara:a,text:e("townChapter2.annabelle.1")},{chara:a,text:e("townChapter2.annabelle.2")},{chara:a,text:e("townChapter2.annabelle.3")},{chara:"ann",text:e("townChapter2.annabelle.4")},{chara:a,text:e("townChapter2.annabelle.5")},{chara:a,text:e("townChapter2.annabelle.6")},{chara:"ann",text:e("townChapter2.annabelle.7")},{chara:a,text:e("townChapter2.annabelle.8")},{chara:"ann",text:e("townChapter2.annabelle.9")},{chara:a,text:e("townChapter2.annabelle.10")}],{chara:a,text:e("townChapter2.annabelle.11")}]),r.talked_annabelle=!0}),a.matilda.setTapEvent(async e=>(0,n.matilda)(t,e)),a.elliott.setTapEvent(async a=>{if(!r.talked_amber1||r.talked_annabelle)return(0,n.elliott)(t,a);await t.talk([...r.talked_elliott?[]:[{chara:a,text:e("townChapter2.elliott.0")},{chara:a,text:e("townChapter2.elliott.1")},{chara:"ann",text:e("townChapter2.elliott.2")},{chara:a,text:e("townChapter2.elliott.3")},{chara:a,text:e("townChapter2.elliott.4")},{chara:a,text:e("townChapter2.elliott.5")},{chara:"ann",text:e("townChapter2.elliott.6")},{chara:a,text:e("townChapter2.elliott.7")}],{chara:a,text:e("townChapter2.elliott.8")},{chara:a,text:e("townChapter2.elliott.9")}]),r.talked_elliott=!0}),a.max.setTapEvent(async a=>{if(!r.talked_amber1||r.talked_elliott)return(0,n.max)(t,a);await t.talk([{chara:a,text:e("townChapter2.max.0")},{chara:a,text:e("townChapter2.max.1")}])})}}).call(this,a(3).default)},1736:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(195);t.default=(t,a)=>{const r=t.storage.state.event.m3;a.amber.setTapEvent(async a=>{await t.talk([...r.talked_amber?[]:[{chara:a,text:e("townChapter3.amber.0")},{chara:a,text:e("townChapter3.amber.1")},{chara:a,text:e("townChapter3.amber.2")},{chara:a,text:e("townChapter3.amber.3")},{chara:a,text:e("townChapter3.amber.4")},{chara:a,text:e("townChapter3.amber.5")}],{chara:a,text:e("townChapter3.amber.6")},{chara:a,text:e("townChapter3.amber.7")}]),r.talked_amber=!0}),a.annabelle.setTapEvent(async e=>(0,n.annabelle)(t,e)),a.matilda.setTapEvent(async a=>{r.talked_amber&&r.talked_max&&!r.talked_matilda?(await t.talk([{chara:a,text:e("townChapter3.matilda.0")},{chara:a,text:e("townChapter3.matilda.1")},{chara:a,text:e("townChapter3.matilda.2")},{chara:a,text:e("townChapter3.matilda.3")},{chara:a,text:e("townChapter3.matilda.4")},{chara:a,text:e("townChapter3.matilda.5")},{chara:a,text:e("townChapter3.matilda.6")},{chara:"ann",text:e("townChapter3.matilda.7")},{chara:a,text:e("townChapter3.matilda.8")},{chara:a,text:e("townChapter3.matilda.9")},{chara:"ann",text:e("townChapter3.matilda.10")},{chara:a,text:e("townChapter3.matilda.11")},{chara:a,text:e("townChapter3.matilda.12")},{chara:"ann",text:e("townChapter3.matilda.13")},{chara:"ann",text:e("townChapter3.matilda.14")}]),r.talked_matilda=!0,t.storage.state.allowed_area=Math.max(t.storage.state.allowed_area,4),t.ui.announce(e("unlockArea",e("area.catacomb")))):await(0,n.matilda)(t,a)}),a.elliott.setTapEvent(async e=>(0,n.elliott)(t,e)),a.max.setTapEvent(async a=>{await t.talk([...r.talked_max?[]:[{chara:a,text:e("townChapter3.max.0")},{chara:a,text:e("townChapter3.max.1")},{chara:a,text:e("townChapter3.max.2")},{chara:a,text:e("townChapter3.max.3")},{chara:a,text:e("townChapter3.max.4")},{chara:a,text:e("townChapter3.max.5")},{chara:a,text:e("townChapter3.max.6")},{chara:a,text:e("townChapter3.max.7")}],{chara:a,text:e("townChapter3.max.8")},{chara:a,text:e("townChapter3.max.9")},{chara:a,text:e("townChapter3.max.10")},{chara:a,text:e("townChapter3.max.11")},{chara:a,text:e("townChapter3.max.12")}]),r.talked_max=!0})}}).call(this,a(3).default)},1737:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=(t,a)=>{const n=t.storage.state.event.m4,r=async()=>{["talked_amber","talked_elliott","talked_max","talked_matilda","talked_annabelle"].every(e=>n[e])&&(t.storage.state.allowed_area>=5||(await t.ui.sleep(500),await t.talk([{chara:"ann",text:e("townChapter4.ann.0")},{chara:"ann",text:e("townChapter4.ann.1")},{chara:"ann",text:e("townChapter4.ann.2")}]),t.storage.state.allowed_area=5,t.ui.announce(e("unlockArea",e("area.temple")))))},s=["annabelle","elliott","max","amber","matilda"];Array.range(13,17).map(e=>t.map.getObjectById(e)).forEach((e,t)=>{a[s[t]].setPosition(e.x,e.y).setR("left").setRandomWalk(!1)}),a.amber.setTapEvent(async a=>{await t.talk([{chara:a,text:e("townChapter4.amber.0")},{chara:a,text:e("townChapter4.amber.1")},{chara:a,text:e("townChapter4.amber.2")},{chara:a,text:e("townChapter4.amber.3")},{chara:a,text:e("townChapter4.amber.4")},{chara:a,text:e("townChapter4.amber.5")}]),n.talked_amber=!0,await r()}),a.annabelle.setTapEvent(async a=>{await t.talk([{chara:a,text:e("townChapter4.annabelle.0")},{chara:a,text:e("townChapter4.annabelle.1")},{chara:a,text:e("townChapter4.annabelle.2")},{chara:a,text:e("townChapter4.annabelle.3")},{chara:a,text:e("townChapter4.annabelle.4")}]),n.talked_annabelle=!0,await r()}),a.matilda.setTapEvent(async a=>{await t.talk([{chara:a,text:e("townChapter4.matilda.0")},{chara:a,text:e("townChapter4.matilda.1")},{chara:a,text:e("townChapter4.matilda.2")},{chara:a,text:e("townChapter4.matilda.3")},{chara:a,text:e("townChapter4.matilda.4")}]),n.talked_matilda=!0,await r()}),a.elliott.setTapEvent(async a=>{await t.talk([{chara:a,text:e("townChapter4.elliott.0")},{chara:a,text:e("townChapter4.elliott.1")},{chara:a,text:e("townChapter4.elliott.2")},{chara:a,text:e("townChapter4.elliott.3")},{chara:a,text:e("townChapter4.elliott.4")},{chara:a,text:e("townChapter4.elliott.5")}]),n.talked_elliott=!0,await r()}),a.max.setTapEvent(async a=>{await t.talk([{chara:a,text:e("townChapter4.max.0")},{chara:a,text:e("townChapter4.max.1")},{chara:a,text:e("townChapter4.max.2")},{chara:a,text:e("townChapter4.max.3")},{chara:a,text:e("townChapter4.max.4")},{chara:a,text:e("townChapter4.max.5")},{chara:a,text:e("townChapter4.max.6")}]),n.talked_max=!0,await r()})}}).call(this,a(3).default)},1738:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=(t,a)=>{const n=t.storage.state.event.m5_1,{soldier1:r,soldier2:s}=a;r.setVisible(!n.started),s.setVisible(!n.started);const o=async()=>{await t.talk([{chara:r,text:e("townChapter5.soldier.0.0")},{chara:s,text:e("townChapter5.soldier.0.1")},{chara:s,text:e("townChapter5.soldier.0.2")},{chara:"ann",text:e("townChapter5.soldier.0.3")},{chara:r,text:e("townChapter5.soldier.0.4")},{chara:"ann",text:e("townChapter5.soldier.0.5")},{chara:r,text:e("townChapter5.soldier.0.6")},{chara:r,text:e("townChapter5.soldier.0.7")},{chara:s,text:e("townChapter5.soldier.0.8")},{chara:s,text:e("townChapter5.soldier.0.9")}]),await t.ui.transition("normal"),r.setVisible(!1),s.setVisible(!1),await t.ui.sleep(1e3),await t.talk([{chara:"ann",text:e("townChapter5.soldier.1.0")},{chara:"ann",text:e("townChapter5.soldier.1.1")},{chara:"ann",text:e("townChapter5.soldier.1.2")},{chara:"ann",text:e("townChapter5.soldier.1.3")},{chara:"francisca",text:e("townChapter5.soldier.1.4")},{chara:"jaquelyn",text:e("townChapter5.soldier.1.5")},{chara:"ann",text:e("townChapter5.soldier.1.6")},{chara:"ann",text:e("townChapter5.soldier.1.7")},{chara:"ann",text:e("townChapter5.soldier.1.8")}]),n.started=!0,t.ui.missionUpdate("m5_1")};a.soldier1.setTapEvent(o),a.soldier2.setTapEvent(o),a.amber.setTapEvent(async a=>{if(a.nextMessages)return await t.talk(a.nextMessages);await t.talk([{chara:a,text:e("townChapter5.amber.0")},{chara:a,text:e("townChapter5.amber.1")},{chara:a,text:e("townChapter5.amber.2")},{chara:"ann",text:e("townChapter5.amber.3")},{chara:a,text:e("townChapter5.amber.4")},{chara:a,text:e("townChapter5.amber.5")},{chara:a,text:e("townChapter5.amber.6")},{chara:a,text:e("townChapter5.amber.7")},{chara:a,text:e("townChapter5.amber.8")},{chara:a,text:e("townChapter5.amber.9")},{chara:a,text:e("townChapter5.amber.10")},{chara:a,text:e("townChapter5.amber.11")},{chara:"ann",text:e("townChapter5.amber.12")},{chara:a,text:e("townChapter5.amber.13")}]),a.nextMessages=[{chara:a,text:e("townChapter5.amber.14")}]}),a.annabelle.setTapEvent(async a=>{if(a.nextMessages)return await t.talk(a.nextMessages);await t.talk([{chara:a,text:e("townChapter5.annabelle.0")},{chara:"ann",text:e("townChapter5.annabelle.1")},{chara:a,text:e("townChapter5.annabelle.2")},{chara:"ann",text:e("townChapter5.annabelle.3")},{chara:a,text:e("townChapter5.annabelle.4")},{chara:"ann",text:e("townChapter5.annabelle.5")},{chara:a,text:e("townChapter5.annabelle.6")},{chara:"ann",text:e("townChapter5.annabelle.7")},{chara:a,text:e("townChapter5.annabelle.8")},{chara:a,text:e("townChapter5.annabelle.9")},{chara:"ann",text:e("townChapter5.annabelle.10")},{chara:"ann",text:e("townChapter5.annabelle.11")},{chara:a,text:e("townChapter5.annabelle.12")},{chara:"ann",text:e("townChapter5.annabelle.13")},{chara:a,text:e("townChapter5.annabelle.14")},{chara:a,text:e("townChapter5.annabelle.15")},{chara:a,text:e("townChapter5.annabelle.16")},{chara:"ann",text:e("townChapter5.annabelle.17")},{chara:"ann",text:e("townChapter5.annabelle.18")},{chara:a,text:e("townChapter5.annabelle.19")}]),a.nextMessages=[{chara:"ann",text:e("townChapter5.annabelle.18")},{chara:a,text:e("townChapter5.annabelle.19")}]}),a.matilda.setTapEvent(async a=>{if(a.nextMessages)return await t.talk(a.nextMessages);await t.talk([{chara:a,text:e("townChapter5.matilda.0")},{chara:"ann",text:e("townChapter5.matilda.1")},{chara:a,text:e("townChapter5.matilda.2")},{chara:a,text:e("townChapter5.matilda.3")},{chara:"ann",text:e("townChapter5.matilda.4")},{chara:a,text:e("townChapter5.matilda.5")},{chara:a,text:e("townChapter5.matilda.6")},{chara:"ann",text:e("townChapter5.matilda.7")},{chara:a,text:e("townChapter5.matilda.8")},{chara:a,text:e("townChapter5.matilda.9")},{chara:"ann",text:e("townChapter5.matilda.10")},{chara:"ann",text:e("townChapter5.matilda.11")},{chara:a,text:e("townChapter5.matilda.12")},{chara:a,text:e("townChapter5.matilda.13")},{chara:"ann",text:e("townChapter5.matilda.14")},{chara:"ann",text:e("townChapter5.matilda.15")},{chara:a,text:e("townChapter5.matilda.16")}]),a.nextMessages=[{chara:"ann",text:e("townChapter5.matilda.15")},{chara:a,text:e("townChapter5.matilda.16")}]}),a.elliott.setTapEvent(async a=>{if(a.nextMessages)return await t.talk(a.nextMessages);await t.talk([{chara:a,text:e("townChapter5.elliott.0")},{chara:a,text:e("townChapter5.elliott.1")},{chara:a,text:e("townChapter5.elliott.2")},{chara:a,text:e("townChapter5.elliott.3")},{chara:a,text:e("townChapter5.elliott.4")},{chara:a,text:e("townChapter5.elliott.5")},{chara:a,text:e("townChapter5.elliott.6")}]),a.nextMessages=[{chara:a,text:e("townChapter5.elliott.7")}]}),a.max.setTapEvent(async a=>{if(a.nextMessages)return await t.talk(a.nextMessages);await t.talk([{chara:a,text:e("townChapter5.max.0")},{chara:a,text:e("townChapter5.max.1")},{chara:a,text:e("townChapter5.max.2")},{chara:a,text:e("townChapter5.max.3")},{chara:a,text:e("townChapter5.max.4")},{chara:a,text:e("townChapter5.max.5")},{chara:a,text:e("townChapter5.max.6")}]),a.nextMessages=[{chara:a,text:e("townChapter5.max.5")},{chara:a,text:e("townChapter5.max.6")}]})}}).call(this,a(3).default)},1739:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(1740),r=a(1741);t.default={name:e("area.castle"),create(t){const a=t.map.getObjectById(8),s=t.map.getObjectById(10),o=t.map.getObjectById(9),i=t.map.getObjectById(11),l=t.map.getObjectById(12),h=t.map.getObjectById(13),c=t.map.getObjectById(15),d=t.map.getObjectById(14);0===t.storage.state.chapter?((0,n.jackEvent)(t,a,s),(0,n.kingEvent)(t,o,i,c),d.destroy(),l.destroy()):5===t.storage.state.chapter?((0,r.peaceful)(t,a,o,l,h,d),i.destroy(),s.destroy(),c.destroy()):[l,h,c,i,s,d].forEach(e=>e.destroy()),t.tweetOnce(t.francisca,e("tweet.ca1"),"ca1")}}}).call(this,a(3).default)},1740:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.kingEvent=t.jackEvent=void 0;var n,r=a(52),s=(n=r)&&n.__esModule?n:{default:n};t.jackEvent=(t,a,n)=>{const r=t.storage.state.event.m0_1;if(r.battled)return n.destroy(),void a.destroy();n.setVisible(!1).setR("up").setSpeed(180).setDisplayName(e("chara.unknown")),a.setEvent(async()=>{t.player.stopWalk(),await t.ui.sleep(500),await t.ui.transition("normal"),t.setMembersPosition(50..toPixel,29..toPixelCenter,"up"),t.camera.updateFollow(),await t.ui.sleep(500),await t.camera.look(0,-180,1e3,!0),await t.talk([{chara:"jaquelyn",text:e("jack.0.0")},{chara:"ann",text:e("jack.0.1")},{chara:"francisca",text:e("jack.0.2")},{chara:"ann",text:e("jack.0.3")},{chara:"francisca",text:e("jack.0.4")},{chara:"francisca",text:e("jack.0.5")},{chara:"ann",text:e("jack.0.6")},{chara:"jaquelyn",text:e("jack.0.7")},{chara:"ann",text:e("jack.0.8")}]),await t.talk([{chara:n,text:e("jack.1.0")}]),t.francisca.setR("down"),t.jaquelyn.setR("down"),n.setVisible(!0),await t.camera.revert(300),await t.talk([{chara:"ann",text:e("jack.1.1")},{chara:"ann",text:e("jack.1.2")},{chara:n,text:e("jack.1.3")},{chara:"ann",text:e("jack.1.4")},{chara:"ann",text:e("jack.1.5")},{chara:"jaquelyn",text:e("jack.1.6")},{chara:"ann",text:e("jack.1.7")},{chara:n,text:e("jack.1.8")},{chara:n,text:e("jack.1.9")},{chara:"ann",text:e("jack.1.10")},{chara:"francisca",text:e("jack.1.11")},{chara:"francisca",text:e("jack.1.12")},{chara:"francisca",text:e("jack.1.13")},{chara:"ann",text:e("jack.1.14")},{chara:n,text:e("jack.1.15")},{chara:n,text:e("jack.1.16")},{chara:"ann",text:e("jack.1.17")},{chara:"ann",text:e("jack.1.18")},{chara:n,text:e("jack.1.19")},{chara:n,text:e("jack.1.20")},{chara:n,text:e("jack.1.21")},{chara:"francisca",text:e("jack.1.22")},{chara:"jaquelyn",text:e("jack.1.23")},{chara:"ann",text:e("jack.1.24")},{chara:"ann",text:e("jack.1.25")}]),t.francisca.setAllowWalkingWhileEvent(!0).setTargetPosition(48..toPixelCenter,31..toPixel),t.jaquelyn.setAllowWalkingWhileEvent(!0).setTargetPosition(50..toPixelCenter,31..toPixel),await t.player.setTargetPosition(49..toPixelCenter,31..toPixelCenter),t.francisca.stopWalk().setR("down"),t.jaquelyn.stopWalk().setR("down"),await t.ui.sleep(500),await t.ui.battle([(0,s.default)("jack",5,{hp:1e3})],{boss:!0,defeatEvent:!0}),await t.ui.sleep(500),await t.talk([{chara:"ann",text:e("jack.2.0")},{chara:"francisca",text:e("jack.2.1")},{chara:n,text:e("jack.2.2")}]),t.ui.announce(e("jack.2.3")),t.storage.state.weapons.length=0,t.storage.state.battlers.forEach(e=>e.weapon=null),await t.ui.sleep(2e3),await n.setTargetPosition(41..toPixelCenter,26..toPixelCenter),t.player.setR("left"),t.francisca.setR("left"),t.jaquelyn.setR("left"),await n.setTargetPosition(32..toPixelCenter,26..toPixelCenter),n.destroy(),await t.ui.sleep(1500),await t.talk([{chara:"jaquelyn",text:e("jack.2.4")}]),t.jaquelyn.setR("down"),await t.talk([{chara:"jaquelyn",text:e("jack.2.5")},{chara:"ann",text:e("jack.2.6")},{chara:"ann",text:e("jack.2.7")}]),t.francisca.setR("down"),await t.talk([{chara:"francisca",text:e("jack.2.8")},{chara:"francisca",text:e("jack.2.9")}]),t.camera.revert(),r.battled=!0,a.destroy()})},t.kingEvent=(t,a,n,r)=>{n.setDisplayName(e("chara.king")),r.setDisplayName(e("chara.guard"));if(t.storage.state.event.m0_1.completed)return n.destroy(),void a.destroy();a.setEvent(async()=>{t.player.stopWalk(),await t.ui.sleep(500),await t.ui.transition("normal"),t.setMembersPosition(18..toPixelCenter,26..toPixelCenter,"up"),t.camera.updateFollow(),await t.ui.sleep(500),t.camera.look(16..toPixel,18..toPixel,1e3),await n.setTargetPosition(16..toPixel,17..toPixelCenter),await t.talk([{chara:"ann",text:e("jack.3.0")}]),await t.ui.sleep(500),await t.talk([{chara:n,text:e("jack.3.1")},{chara:r,text:e("jack.3.2")}],{angle:!1}),await t.ui.sleep(300),await n.setTargetPosition(16..toPixel,19..toPixel),await t.ui.sleep(300),await t.talk([{chara:n,text:e("jack.3.3")},{chara:r,text:e("jack.3.4")}],{angle:!1}),await t.ui.sleep(500),n.setR("right"),await t.ui.sleep(800),await t.talk([{chara:n,text:e("jack.3.5")}],{angle:!1}),await t.ui.sleep(500),await t.talk([{chara:"jaquelyn",text:e("jack.3.6")},{chara:"francisca",text:e("jack.3.7")},{chara:"jaquelyn",text:e("jack.3.8")},{chara:"ann",text:e("jack.3.9")}]),window.archiveManager.activate("saved_king"),await t.ui.missionUpdate("m0_1",!0),t.storage.state.chapter=1,await t.mapChange("room1",19..toPixelCenter,11..toPixel,{speed:"slow"}),t.camera.revert()})}}).call(this,a(3).default)},1741:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});t.peaceful=(t,a,n,r,s,o)=>{o.setVisible(!1).setDisplayName(e("chara.jack")),r.setDisplayName(e("chara.guard")).setR("right"),s.setDisplayName(e("chara.guard")).setR("left");const i=t.storage.state.event.m5_1;if(i.completed)return r.setVisible(!1),void s.setVisible(!1);const l=()=>{o.setVisible(!0),r.setVisible(!1),s.setVisible(!1),a.setActive(!0),n.setActive(!1)};n.setEvent(async()=>{await t.camera.look(16..toPixel,15..toPixel,800),await t.ui.sleep(500),await t.talk([{chara:r,text:e("peaceful.soldier.0")},{chara:r,text:e("peaceful.soldier.1")},{chara:s,text:e("peaceful.soldier.2")}],{angle:!1}),await t.ui.sleep(500),await t.ui.transition("normal"),await t.camera.revert(0),t.setMembersPosition(26..toPixelCenter,20..toPixelCenter,"right"),i.soldiers=!0,l()}),a.setEvent(async()=>{t.player.tweet(""),await t.ui.sleep(400),await t.camera.look(o.x-70,o.y,800),await t.ui.sleep(1e3),await t.ui.transition("normal"),t.setMembersPosition(48..toPixelCenter,19..toPixelCenter,"right"),t.francisca.setPosition(47..toPixelCenter,18..toPixelCenter),t.jaquelyn.setPosition(47..toPixelCenter,20..toPixelCenter),t.camera.look(o.x-70,o.y,0),await t.ui.sleep(1500),o.setFaceKey("jack2");const a=o;await t.talk([{chara:a,text:e("peaceful.talk1.0")},{chara:"ann",text:e("peaceful.talk1.1")},{chara:a,text:e("peaceful.talk1.2")},{chara:"ann",text:e("peaceful.talk1.3")},{chara:"ann",text:e("peaceful.talk1.4")},{chara:a,text:e("peaceful.talk1.5")},{chara:a,text:e("peaceful.talk1.6")}]),await t.ui.sleep(500),await t.ui.transition("fast"),o.initImage("kingbrother").setFaceKey("kingbrother3").setDisplayName(e("chara.ethel")),await t.ui.sleep(500);const n=await t.talk([{chara:a,text:e("peaceful.talk2.0")},{chara:"ann",text:e("peaceful.talk2.1")},{chara:a,text:e("peaceful.talk2.2")},{chara:a,text:e("peaceful.talk2.3")},{chara:"ann",text:e("peaceful.talk2.4")},{chara:"ann",text:e("peaceful.talk2.5")},{chara:a,text:e("peaceful.talk2.6")},{chara:a,text:e("peaceful.talk2.7")},{chara:a,text:e("peaceful.talk2.8")},{chara:a,text:e("peaceful.talk2.9")},null]),i=await t.select([e("peaceful.question.0"),e("peaceful.question.1")]);n.destroy(),await t.talk([...0===i?[{chara:a,text:e("peaceful.talk3.0")}]:[],{chara:a,text:e("peaceful.talk3.1")},{chara:a,text:e("peaceful.talk3.2")},{chara:a,text:e("peaceful.talk3.3")},{chara:a,text:e("peaceful.talk3.4")},{chara:a,text:e("peaceful.talk3.5")},{chara:a,text:e("peaceful.talk3.6")},{chara:a,text:e("peaceful.talk3.7")},{chara:a,text:e("peaceful.talk3.8")},{chara:a,text:e("peaceful.talk3.9")},{chara:a,text:e("peaceful.talk3.10")},{chara:a,text:e("peaceful.talk3.11")},{chara:"ann",text:e("peaceful.talk3.12")},{chara:a,text:e("peaceful.talk3.13")},{chara:a,text:e("peaceful.talk3.14")},{chara:a,text:e("peaceful.talk3.15")},{chara:a,text:e("peaceful.talk3.16")},{chara:"ann",text:e("peaceful.talk3.17")},{chara:a,text:e("peaceful.talk3.18")},{chara:a,text:e("peaceful.talk3.19")},{chara:a,text:e("peaceful.talk3.20")},{chara:a,text:e("peaceful.talk3.21")},{chara:a,text:e("peaceful.talk3.22")},{chara:a,text:e("peaceful.talk3.23")},{chara:"ann",text:e("peaceful.talk3.24")},{chara:"ann",text:e("peaceful.talk3.25")},{chara:"ann",text:e("peaceful.talk3.26")},{chara:"ann",text:e("peaceful.talk3.27")},{chara:a,text:e("peaceful.talk3.28")},{chara:a,text:e("peaceful.talk3.29")},{chara:"ann",text:e("peaceful.talk3.30")},{chara:"ann",text:e("peaceful.talk3.31")},{chara:a,text:e("peaceful.talk3.32")},{chara:a,text:e("peaceful.talk3.33")},{chara:a,text:e("peaceful.talk3.34")},{chara:"ann",text:e("peaceful.talk3.35")},{chara:a,text:e("peaceful.talk3.36")},{chara:a,text:e("peaceful.talk3.37")},{chara:a,text:e("peaceful.talk3.38")},{chara:a,text:e("peaceful.talk3.39")},{chara:"ann",text:e("peaceful.talk3.40")},{chara:"ann",text:e("peaceful.talk3.41")},{chara:a,text:e("peaceful.talk3.42")},{chara:a,text:e("peaceful.talk3.43")},{chara:a,text:e("peaceful.talk3.44")},{chara:a,text:e("peaceful.talk3.45")},{chara:a,text:e("peaceful.talk3.46")},{chara:"ann",text:e("peaceful.talk3.47")},{chara:a,text:e("peaceful.talk3.48")},{chara:a,text:e("peaceful.talk3.49")},{chara:a,text:e("peaceful.talk3.50")},{chara:a,text:e("peaceful.talk3.51")},{chara:a,text:e("peaceful.talk3.52")}]),await t.ui.announce(e("gotItem",e("peaceful.item"))),await t.talk([{chara:"ann",text:e("peaceful.talk4.0")},{chara:"ann",text:e("peaceful.talk4.1")},{chara:"ann",text:e("peaceful.talk4.2")},{chara:"ann",text:e("peaceful.talk4.3")},{chara:"ann",text:e("peaceful.talk4.4")},{chara:"ann",text:e("peaceful.talk4.5")},{chara:"ann",text:e("peaceful.talk4.6")},{chara:"ann",text:e("peaceful.talk4.7")},{chara:"ann",text:e("peaceful.talk4.8")},{chara:"ann",text:e("peaceful.talk4.9")},{chara:"ann",text:e("peaceful.talk4.10")},{chara:a,text:e("peaceful.talk4.11")},{chara:a,text:e("peaceful.talk4.12")},{chara:a,text:e("peaceful.talk4.13")},{chara:"ann",text:e("peaceful.talk4.14")},{chara:"ann",text:e("peaceful.talk4.15")},{chara:"ann",text:e("peaceful.talk4.16")}]),await t.ui.sleep(500),window.archiveManager.activate("saved_kingdom"),await t.ui.missionUpdate("m5_1",!0),await t.ui.sleep(1e3),await t.ui.transition("slow"),t.members.forEach(e=>e.setVisible(!1)),o.initImage("jack").setFaceKey("jack2"),r.setPosition(33..toPixelCenter,19..toPixelCenter).setVisible(!0),await s.setPosition(32..toPixelCenter,20..toPixelCenter).setVisible(!0),await t.ui.sleep(1500),await t.talk([{chara:a,text:e("peaceful.end1.0")},{chara:a,text:e("peaceful.end1.1")},{chara:a,text:e("peaceful.end1.2")},{chara:a,text:e("peaceful.end1.3")}],{angle:!1}),await t.ui.sleep(1500),r.setSpeed(180).setTargetPosition(r.x+200,r.y),await s.setSpeed(180).setTargetPosition(s.x+200,s.y),await t.talk([{chara:r,text:e("peaceful.end2.0")},{chara:r,text:e("peaceful.end2.1")},{chara:s,text:e("peaceful.end2.2")},{chara:a,text:e("peaceful.end2.3")}],{angle:!1}),await t.ui.sleep(800);const l=t.add.rectangle(0,0,t.map.width,t.map.height,15606272).setAlpha(0).setDepth(14e4).setOrigin(0,0);t.add.tween({targets:l,duration:400,ease:"Power2",alpha:.6,yoyo:!0,onComplete(){o.initImage("jack2")}}),await t.ui.sleep(2500),await t.talk([{chara:a,text:e("peaceful.end3.0")},{chara:a,text:e("peaceful.end3.1")}],{angle:!1}),await t.ui.sleep(2e3),await t.ui.credit(),Object.assign(t.storage.state,{map:"room1",x:19..toPixelCenter,y:11..toPixel,r:90}),t.storage.lastSnapshot=null,t.storage.save(0),t.scene.start("Title")}).setActive(!1),i.soldiers&&l()}}).call(this,a(3).default)},1742:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(148);t.default={name:`${e("area.forest")} - ${e("areaSub.forest.a")}`,bgm:"forest",enemyLevel:1,enemyGroups:[["slime"],["bee"]],create(t){(0,n.dogEventFound)(t,t.map.getObjectById(4),"d1"),t.ui.sleep(2e3).then(()=>{t.tweetOnce(t.player,e("tweet.fr1"),"fr1")})}}}).call(this,a(3).default)},1743:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(148);t.default={name:`${e("area.forest")} - ${e("areaSub.forest.b")}`,bgm:"forest",enemyLevel:1,enemyGroups:[["slime","slime"],["bee","bee2"]],create(e){const t=e.map.getObjectById(4).setR("left").setRandomWalk(!0);(0,n.dogEventHunter)(e,t)}}}).call(this,a(3).default)},1744:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:`${e("area.forest")} - ${e("areaSub.forest.c")}`,bgm:"forest",enemyLevel:7,enemyGroups:[["wolf"],["wolf","wolf"],["bee2","bee","bee","bee2"]],create(e){}}}).call(this,a(3).default)},1745:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(149);t.default={name:`${e("area.forest")} - ${e("areaSub.forest.d")}`,bgm:"forest",create(e){(0,n.rexBear)(e,e.map.getObjectById(4),e.map.getObjectById(3))}}}).call(this,a(3).default)},1746:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(148);t.default={name:`${e("area.forest")} - ${e("areaSub.forest.e")}`,bgm:"forest",enemyLevel:2,enemyGroups:[["slime"],["slime","slime"],["bee","bee"],["bee","bee2"]],create(e){(0,n.dogEventFound)(e,e.map.getObjectById(7),"d2"),(0,n.dogEventFound)(e,e.map.getObjectById(3),"d3")}}}).call(this,a(3).default)},1747:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(148),r=a(746);t.default={name:`${e("area.forest")} - ${e("areaSub.forest.f")}`,bgm:"forest",enemyLevel:3,enemyGroups:[["slime","slime"],["slime","slime","slime"],["bee2"],["bee","bee"],["bee","bee2","bee"],["mandrake","slime","mandrake"],["mandrake","mandrake"]],create(e){(0,n.dogEventFound)(e,e.map.getObjectById(3),"d4"),(0,r.mercenary1)(e,e.map.getObjectById(6),e.map.getObjectById(7),e.map.getObjectById(8))}}}).call(this,a(3).default)},1748:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(148),r=a(746);t.default={name:`${e("area.forest")} - ${e("areaSub.forest.g")}`,bgm:"forest",enemyLevel:4,enemyGroups:[["wolf"],["bee2","bee2"],["mandrake","mandrake"],["mandrake","mandrake","mandrake"]],create(e){(0,n.dogEventFound)(e,e.map.getObjectById(4),"d5"),(0,r.mercenary2)(e,e.map.getObjectById(5),e.map.getObjectById(6))}}}).call(this,a(3).default)},1749:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:`${e("area.forest")} - ${e("areaSub.forest.h")}`,bgm:"forest",enemyLevel:6,enemyGroups:[["wolf"],["wolf","wolf"],["slime","slime","slime"],["mandrake"],["mandrake","mandrake"],["mandrake","mandrake","mandrake"]],create(e){}}}).call(this,a(3).default)},1750:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(149);t.default={name:`${e("area.forest")} - ${e("areaSub.forest.i")}`,bgm:"forest",create(e){(0,n.drystan)(e,e.map.getObjectById(3),e.map.getObjectById(2))}}}).call(this,a(3).default)},1751:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(311),r=a(196);t.default={name:`${e("area.underpass")} - ${e("areaSub.underpass.a")}`,bgm:"underpass",enemyLevel:11,enemyGroups:[["goblin"],["goblin","goblin"],["goblin","goblin","goblin"]],create(t){const a=this.getCollideObject(t,"jail"),s=this.getCollideObject(t,"door"),o=t.map.getObjectById(3),i=t.map.getObjectById(6),l=t.map.getObjectById(7),h=t.map.getObjectById(8);(0,n.cassandra)(t,t.map.getObjectById(2),o,s,t.map.getObjectById(4),t.map.getObjectById(5)),(0,r.lamp)(t,o,i,l,h,a,t.map.getObjectById(9),t.map.getImageByName("aragnie_yarn")),t.ui.sleep(2e3).then(()=>{t.tweetOnce(t.francisca,e("tweet.un1"),"un1")})},getCollideObject(e,t){const a=e.map.getImageByName(t);return e.physics.add.existing(a),a.body.setImmovable(!0),e.physics.add.collider([a],e.substances),a}}}).call(this,a(3).default)},1752:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:`${e("area.underpass")} - ${e("areaSub.underpass.b")}`,bgm:"underpass",enemyLevel:12,enemyGroups:[["goblin","goblin"],["goblin","goblin","goblin"],["carbuncle"],["carbuncle","carbuncle"]],create(e){}}}).call(this,a(3).default)},1753:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(150),r=a(311);t.default={name:`${e("area.underpass")} - ${e("areaSub.underpass.c")}`,bgm:"underpass",enemyLevel:13,enemyGroups:[["goblin","goblin","goblin"],["goblin","goblin","goblin","goblin"],["carbuncle"],["carbuncle","carbuncle"],["carbuncle","carbuncle","carbuncle"]],create(e){const t=e.map.getObjectById(4);(0,n.doorEvent)(e,t),(0,r.wine)(e,e.map.getObjectById(8),1)}}}).call(this,a(3).default)},1754:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(150);t.default={name:`${e("area.underpass")} - ${e("areaSub.underpass.d")}`,bgm:"underpass",create(e){(0,n.princess)(e,e.map.getObjectById(2),e.map.getObjectById(3))}}}).call(this,a(3).default)},1755:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(748),r=a(311);t.default={name:`${e("area.underpass")} - ${e("areaSub.underpass.e")}`,bgm:"underpass",enemyLevel:14,enemyGroups:[["goblin","goblin"],["carbuncle","carbuncle"],["gargoyle","gargoyle"],["succubus"]],create(e){(0,n.dionysus)(e,e.map.getObjectById(3),e.map.getObjectById(4),e.map.getObjectById(2)),(0,r.wine)(e,e.map.getObjectById(5),2),(0,r.wine)(e,e.map.getObjectById(8),3);const t=e.map.getObjectById(9);e.storage.state.gimmicks.includes("unserpass4_9")?(this.openNeedle(e,!1),t.destroy()):t.setEvent(async()=>{e.storage.state.gimmicks.push("unserpass4_9"),await this.openNeedle(e,!0),t.destroy()})},async openNeedle(e,t){const a=e.map.getLayerByName("layer4");a.layer.data[9][41].index=20,t&&await e.ui.sleep(500),t&&await e.camera.look(41..toPixelCenter,22..toPixelCenter,1e3),t&&await e.ui.sleep(100);[40,41,42].forEach(e=>{a.layer.data[22][e].index=79,a.layer.data[22][e].setCollision(!1)}),t&&await e.ui.sleep(500),t&&await e.camera.revert(1e3)}}}).call(this,a(3).default)},1756:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(748);t.default={name:`${e("area.underpass")} - ${e("areaSub.underpass.f")}`,bgm:"underpass",create(e){const t=e.map.getImageByName("barrel");(0,n.orthrus)(e,e.map.getObjectById(3),e.map.getObjectById(4),t)}}}).call(this,a(3).default)},1757:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:`${e("area.underpass")} - ${e("areaSub.underpass.g")}`,bgm:"underpass",enemyLevel:16,enemyGroups:[["gargoyle","gargoyle"],["gargoyle","gargoyle","gargoyle"],["succubus"],["succubus","succubus"]],create(e){const t=e.map.getObjectById(8);e.storage.state.gimmicks.includes("unserpass7_8")?(this.openNeedle(e,!1),t.destroy()):t.setEvent(async()=>{e.storage.state.gimmicks.push("unserpass7_8"),await this.openNeedle(e,!0),t.destroy()})},async openNeedle(e,t){const a=e.map.getLayerByName("layer4");a.layer.data[10][8].index=20,t&&await e.ui.sleep(500),t&&await e.camera.look(53..toPixelCenter,17..toPixelCenter,1500),t&&await e.ui.sleep(100);[50,51,52,53,54,55,56,57].forEach(e=>{a.layer.data[17][e].index=79,a.layer.data[17][e].setCollision(!1)}),t&&await e.ui.sleep(500),t&&await e.camera.revert(1500)}}}).call(this,a(3).default)},1758:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(196);t.default={name:`${e("area.underpass")} - ${e("areaSub.underpass.h")}`,bgm:"underpass",enemyLevel:17,enemyGroups:[["gargoyle","gargoyle"],["gargoyle","gargoyle","gargoyle"],["succubus"],["succubus","succubus"]],create(t){(0,n.jack)(t,t.map.getObjectById(3),t.map.getObjectById(4));const a=t.map.getObjectById(5);t.storage.state.gimmicks.includes("unserpass8_5")?(this.openNeedle(t,!1),a.destroy()):a.setTapEvent(async()=>{t.storage.state.gimmicks.push("unserpass8_5"),await t.talk([{chara:"ann",text:e("mapEvent.underpass8.candle")}]),await t.ui.sleep(500),await t.player.setTargetPosition(28..toPixelCenter,40..toPixelCenter),t.player.setR("right"),await t.ui.sleep(1e3),await t.player.setTargetPosition(26..toPixelCenter,40..toPixelCenter),t.player.setR("left"),await t.ui.sleep(500),await this.openNeedle(t,!0),a.destroy()}).setCheckableDistance(70)},async openNeedle(e,t){const a=e.map.getLayerByName("layer4");a.layer.data[40][25].index=59,e.map.getLight(25..toPixelCenter,40..toPixelCenter,16737792),t&&await e.ui.sleep(500),t&&await e.camera.look(11..toPixelCenter,26..toPixelCenter,1e3),t&&await e.ui.sleep(100);[23,24,25,26,27,28,29].forEach(e=>{a.layer.data[e][11].index=79,a.layer.data[e][11].setCollision(!1)}),t&&await e.ui.sleep(500),t&&await e.camera.revert(1e3)}}}).call(this,a(3).default)},1759:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(196);t.default={name:`${e("area.underpass")} - ${e("areaSub.underpass.i")}`,bgm:"underpass",create(e){(0,n.hector)(e,e.map.getObjectById(2),e.map.getObjectById(3),e.map.getObjectById(4))}}}).call(this,a(3).default)},1760:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(196);t.default={name:e("areaSub.aragnie"),bgm:"underpass",enemyLevel:18,enemyGroups:[["goblin2","goblin2"],["goblin","goblin2","goblin"]],create(e){const t=e.map.getObjectById(3),a=e.map.getObjectById(5),r=e.map.getObjectById(6),s=e.map.getObjectById(7),o=e.map.getObjectById(9);(0,n.aragnie)(e,a,t,r,s,o)}}}).call(this,a(3).default)},1761:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:`${e("area.catacomb")} - ${e("areaSub.catacomb.a")}`,bgm:"catacomb",enemyLevel:20,enemyGroups:[["phantom"],["phantom","phantom"],["skull"],["skull","skull"]],create(t){t.map.getObjectById(11).setDisplayName(e("chara.guard")).setTapEvent(async a=>{await t.talk([{chara:a,text:e("mapEvent.catacomb1.guard.0")},{chara:a,text:e("mapEvent.catacomb1.guard.1")}])}),t.ui.sleep(2e3).then(()=>{t.tweetOnce(t.player,e("tweet.ct1"),"ct1")})}}}).call(this,a(3).default)},1762:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:`${e("area.catacomb")} - ${e("areaSub.catacomb.b")}`,bgm:"catacomb",enemyLevel:20,enemyGroups:[["phantom"],["phantom","phantom"],["skull"],["skull","skull"]],create(e){}}}).call(this,a(3).default)},1763:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(1764);t.default={name:`${e("area.catacomb")} - ${e("areaSub.catacomb.c")}`,bgm:"catacomb",enemyLevel:21,enemyGroups:[["phantom"],["phantom","phantom"],["phantom","skull"],["skull","skull","skull"],["ghost"]],create(e){const t=e.map.getObjectById(3);(0,n.ferdinand)(e,t)}}}).call(this,a(3).default)},1764:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});t.ferdinand=(t,a)=>{const n=t.storage.state.event.m3_1;if(!n.started&&n.completed&&(n.completed=!1),a.setDisplayName(e("chara.fdn")),n.completed)return a.destroy();a.setTapEvent(async r=>{n.started&&t.storage.state.event.m3_2.completed?(await t.talk([{chara:r,text:e("ferdinand.talk3.0")},{chara:"ann",text:e("ferdinand.talk3.1")},{chara:"ann",text:e("ferdinand.talk3.2")},{chara:"ann",text:e("ferdinand.talk3.3")},{chara:r,text:e("ferdinand.talk3.4")},{chara:"ann",text:e("ferdinand.talk3.5")},{chara:r,text:e("ferdinand.talk3.6")},{chara:r,text:e("ferdinand.talk3.7")},{chara:"ann",text:e("ferdinand.talk3.8")},{chara:r,text:e("ferdinand.talk3.9")}]),await t.ui.sleep(300),await t.talk([{chara:r,text:e("ferdinand.talk4.0")}]),a.initImage("ferdinand_dragged"),t.substances.remove(a),await t.talk([{chara:r,text:e("ferdinand.talk4.1")},{chara:"ann",text:e("ferdinand.talk4.2")}]),await a.setSpeed(20).setTargetPosition(a.x-20,a.y),await t.talk([{chara:r,text:e("ferdinand.talk4.3")},{chara:r,text:e("ferdinand.talk4.4")}]),await a.setSpeed(50).setTargetPosition(a.x-2.3.toPixel,a.y),t.add.tween({targets:a,duration:200,alpha:0,x:a.x-15,y:a.y+30,rotation:a.rotation-1,onComplete:()=>a.destroy()}),await t.ui.sleep(300),await t.talk([{chara:"ann",text:e("ferdinand.talk4.5")},{chara:"ann",text:e("ferdinand.talk4.6")},{chara:"ann",text:e("ferdinand.talk4.7")}]),await t.ui.sleep(500),await t.talk([{chara:"ann",text:e("ferdinand.talk4.8")},{chara:"jaquelyn",text:e("ferdinand.talk4.9")},{chara:"francisca",text:e("ferdinand.talk4.10")}]),n.completed=!0,t.ui.missionUpdate("m3_1",!0)):n.started?await t.talk([{chara:r,text:e("ferdinand.talk2.0")},{chara:r,text:e("ferdinand.talk2.1")}]):(await t.talk([{chara:"ann",text:e("ferdinand.talk1.0")},{chara:r,text:e("ferdinand.talk1.1")},{chara:"jaquelyn",text:e("ferdinand.talk1.2")},{chara:r,text:e("ferdinand.talk1.3")},{chara:"ann",text:e("ferdinand.talk1.4")}],{angle:!1}),await t.talk([{chara:r,text:e("ferdinand.talk1.5")},{chara:r,text:e("ferdinand.talk1.6")},{chara:r,text:e("ferdinand.talk1.7")},{chara:r,text:e("ferdinand.talk1.8")},{chara:"ann",text:e("ferdinand.talk1.9")},{chara:"ann",text:e("ferdinand.talk1.10")},{chara:r,text:e("ferdinand.talk1.11")},{chara:"ann",text:e("ferdinand.talk1.12")},{chara:r,text:e("ferdinand.talk1.13")},{chara:"ann",text:e("ferdinand.talk1.14")},{chara:r,text:e("ferdinand.talk1.15")},{chara:r,text:e("ferdinand.talk1.16")},{chara:r,text:e("ferdinand.talk1.17")},{chara:"ann",text:e("ferdinand.talk1.18")},{chara:"ann",text:e("ferdinand.talk1.19")},{chara:r,text:e("ferdinand.talk1.20")},{chara:r,text:e("ferdinand.talk1.21")},{chara:r,text:e("ferdinand.talk1.22")},{chara:r,text:e("ferdinand.talk1.23")},{chara:r,text:e("ferdinand.talk1.24")},{chara:"ann",text:e("ferdinand.talk1.25")},{chara:r,text:e("ferdinand.talk1.26")},{chara:r,text:e("ferdinand.talk1.27")},{chara:r,text:e("ferdinand.talk1.28")},{chara:r,text:e("ferdinand.talk1.29")},{chara:"ann",text:e("ferdinand.talk1.30")},{chara:"ann",text:e("ferdinand.talk1.31")},{chara:r,text:e("ferdinand.talk1.32")},{chara:r,text:e("ferdinand.talk1.33")},{chara:"ann",text:e("ferdinand.talk1.34")},{chara:"ann",text:e("ferdinand.talk1.35")},{chara:r,text:e("ferdinand.talk1.36")},{chara:r,text:e("ferdinand.talk1.37")},{chara:r,text:e("ferdinand.talk1.38")},{chara:"ann",text:e("ferdinand.talk1.39")},{chara:"francisca",text:e("ferdinand.talk1.40")},{chara:"jaquelyn",text:e("ferdinand.talk1.41")},{chara:"jaquelyn",text:e("ferdinand.talk1.42")},{chara:r,text:e("ferdinand.talk1.43")},{chara:r,text:e("ferdinand.talk1.44")},{chara:r,text:e("ferdinand.talk1.45")},{chara:r,text:e("ferdinand.talk1.46")},{chara:"ann",text:e("ferdinand.talk1.47")},{chara:r,text:e("ferdinand.talk1.48")},{chara:r,text:e("ferdinand.talk1.49")}]),n.started=!0,t.ui.missionUpdate("m3_1"))})}}).call(this,a(3).default)},1765:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(749);t.default={name:`${e("area.catacomb")} - ${e("areaSub.catacomb.c")}`,bgm:"catacomb",enemyLevel:22,enemyGroups:[["phantom","phantom"],["phantom","phantom","phantom"],["skull","ghost","skull"],["ghost"],["ghost","ghost"]],create(e){const t=e.map.getObjectById(5).setRandomWalk(!0);(0,n.dario)(e,t)}}}).call(this,a(3).default)},1766:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(197);t.default={name:`${e("area.catacomb")} - ${e("areaSub.catacomb.d")}`,bgm:"catacomb",enemyLevel:23,enemyGroups:[["phantom","skull"],["skull","phantom","skull","phantom"],["ghost"],["ghost","ghost"]],create(e){const t=e.map.getObjectById(2);(0,n.marianne)(e,t)}}}).call(this,a(3).default)},1767:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:`${e("area.catacomb")} - ${e("areaSub.catacomb.e")}`,bgm:"catacomb",enemyLevel:24,enemyGroups:[["ghost","ghost"],["skull","ghost","skull"],["spectre"]],create(t){const a=t.storage.state,n=a.treasures.includes("catacomb6_9");t.map.treasures[0].removeTapEvent();const r=t.map.getObjectById(10);n?this.openDoor(t):a.event.m3_4.completed&&r.setTapEvent(async()=>{await t.talk([{chara:"ann",text:e("mapEvent.catacomb6.door")}]),this.openDoor(t),r.destroy()})},openDoor(e){const t=e.map.getLayerByName("layer3");[[14,4],[15,4],[16,4],[14,5],[15,5],[16,5]].forEach(e=>{t.layer.data[e[1]][e[0]].index=-1,t.layer.data[e[1]][e[0]].setCollision(!1)}),e.map.treasures[0].setEvent()}}}).call(this,a(3).default)},1768:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(749);t.default={name:`${e("area.catacomb")} - ${e("areaSub.catacomb.e")}`,bgm:"catacomb",enemyLevel:25,enemyGroups:[["ghost","ghost"],["skull","ghost","skull"],["spectre"],["spectre","spectre"]],create(e){const t=e.map.getObjectById(2),a=e.map.getObjectById(3),r=e.map.getObjectById(4),s=e.map.getObjectById(7);(0,n.jack)(e,t,a,r,s)}}}).call(this,a(3).default)},1769:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:`${e("area.catacomb")} - ${e("areaSub.catacomb.f")}`,bgm:"catacomb",enemyLevel:26,enemyGroups:[["ghost","ghost","ghost"],["skull","spectre","skull"],["spectre","spectre"],["wraith"],["dullahan"]],create(e){}}}).call(this,a(3).default)},1770:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:`${e("area.catacomb")} - ${e("areaSub.catacomb.f")}`,bgm:"catacomb",enemyLevel:27,enemyGroups:[["skull","spectre","skull"],["spectre","spectre"],["wraith","spectre"],["wraith","wraith"],["dullahan"]],create(e){}}}).call(this,a(3).default)},1771:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(1772);t.default={name:`${e("area.catacomb")} - ${e("areaSub.catacomb.f")}`,bgm:"catacomb",enemyLevel:28,enemyGroups:[["skull","spectre","skull"],["spectre","spectre"],["wraith","spectre"],["wraith","wraith"],["dullahan"],["dullahan","dullahan"]],create(e){const t=e.map.getObjectById(2),a=5..toArray().map(t=>e.map.getObjectById(t+3));(0,n.renfield)(e,t,a)}}}).call(this,a(3).default)},1772:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.renfield=void 0;var n,r=a(52),s=(n=r)&&n.__esModule?n:{default:n};t.renfield=(t,a,n)=>{const r=t.storage.state.event.m3_4;if(a.setDisplayName(e("chara.ray")),r.completed)return a.destroy(),void n.forEach(e=>e.destroy());a.setTapEvent(async a=>{5===r.ghosts.length?(await t.talk([{chara:a,text:e("renfield.solve.0")},{chara:a,text:e("renfield.solve.1")},{chara:a,text:e("renfield.solve.2")},{chara:a,text:e("renfield.solve.3")},{chara:a,text:e("renfield.solve.4")},{chara:"ann",text:e("renfield.solve.5")}]),t.ui.announce(e("gotItem",e("renfield.item"))),await t.talk([{chara:"ann",text:e("renfield.solve.6")},{chara:"ann",text:e("renfield.solve.7")},{chara:"ann",text:e("renfield.solve.8")},{chara:a,text:e("renfield.solve.9")},{chara:a,text:e("renfield.solve.10")},{chara:"ann",text:e("renfield.solve.11")},{chara:a,text:e("renfield.solve.12")},{chara:a,text:e("renfield.solve.13")},{chara:a,text:e("renfield.solve.14")},{chara:"ann",text:e("renfield.solve.15")},{chara:a,text:e("renfield.solve.16")},{chara:a,text:e("renfield.solve.17")}]),r.completed=!0,t.ui.missionUpdate("m3_4",!0),await a.setSpeed(140).setTargetPosition(a.x+7..toPixel,a.y+5..toPixel),await a.setSpeed(140).setTargetPosition(a.x,a.y+4..toPixel),a.destroy()):r.started?await t.talk([{chara:a,text:e("renfield.started.0")},{chara:"ann",text:e("renfield.started.1")},{chara:a,text:e("renfield.started.2")},{chara:a,text:e("renfield.started.3")}]):(await t.talk([{chara:"ann",text:e("renfield.start1.0")},{chara:a,text:e("renfield.start1.1")},{chara:a,text:e("renfield.start1.2")},{chara:"ann",text:e("renfield.start1.3")},{chara:a,text:e("renfield.start1.4")},{chara:a,text:e("renfield.start1.5")},{chara:"ann",text:e("renfield.start1.6")},{chara:"ann",text:e("renfield.start1.7")},{chara:a,text:e("renfield.start1.8")},{chara:a,text:e("renfield.start1.9")},{chara:a,text:e("renfield.start1.10")},{chara:"ann",text:e("renfield.start1.11")},{chara:"ann",text:e("renfield.start1.12")},{chara:a,text:e("renfield.start1.13")},{chara:a,text:e("renfield.start1.14")},{chara:a,text:e("renfield.start1.15")},{chara:a,text:e("renfield.start1.16")},{chara:a,text:e("renfield.start1.17")},{chara:"ann",text:e("renfield.start1.18")},{chara:a,text:e("renfield.start1.19")},{chara:a,text:e("renfield.start1.20")},{chara:a,text:e("renfield.start1.21")},{chara:a,text:e("renfield.start1.22")},{chara:a,text:e("renfield.start1.23")},{chara:"ann",text:e("renfield.start1.24")}]),await t.camera.look(0,-150,300,!0),n.forEach(e=>e.setVisible(!0)),await t.talk([{chara:"ann",text:e("renfield.start2.0")},{chara:"ann",text:e("renfield.start2.1")}]),a.setR("left"),await t.talk([{chara:a,text:e("renfield.start2.2")},{chara:a,text:e("renfield.start2.3")},{chara:"ann",text:e("renfield.start2.4")},{chara:a,text:e("renfield.start2.5")},{chara:a,text:e("renfield.start2.6")},{chara:a,text:e("renfield.start2.7")}],{angle:!1}),await t.talk([{chara:a,text:e("renfield.start2.8")},{chara:"ann",text:e("renfield.start2.9")},{chara:"ann",text:e("renfield.start2.10")},{chara:a,text:e("renfield.start2.11")},{chara:a,text:e("renfield.start2.12")},{chara:a,text:e("renfield.start2.13")}]),r.started=!0,t.ui.missionUpdate("m3_4"),await t.camera.revert(300))});n.forEach((e,a)=>{e.setTapEvent(e=>(async(e,a)=>{await t.ui.battle([(0,s.default)("spectre",22,{hp:100})])&&(r.ghosts.includes(a)||r.ghosts.push(a),e.destroy())})(e,a)).setBlendMode(Phaser.BlendModes.ADD).setAlpha(.8),e.setVisible(r.started&&!r.ghosts.includes(a))}),t.add.tween({targets:n,duration:800,loop:-1,yoyo:!0,alpha:.4})}}).call(this,a(3).default)},1773:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(1774);t.default={name:`${e("area.catacomb")} - ${e("areaSub.catacomb.g")}`,bgm:"catacomb",enemyLevel:29,enemyGroups:[["skull","spectre","skull"],["spectre","spectre"],["wraith","spectre"],["wraith","wraith"],["dullahan"],["dullahan","dullahan"]],create(e){const t=e.map.getObjectById(3),a=e.map.getObjectById(4),r=e.map.getObjectById(6);(0,n.evangelina)(e,t,a,r)}}}).call(this,a(3).default)},1774:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.evangelina=void 0;var n,r=a(52),s=(n=r)&&n.__esModule?n:{default:n};t.evangelina=(t,a,n,r)=>{const o=t.storage.state.event.m3_5;if(a.setDisplayName(e("chara.queen")),n.setDisplayName(e("chara.queen")).setFaceKey("queen").setVisible(!1),o.started||r.setTapEvent(async()=>{await t.talk([{chara:"jaquelyn",text:e("evangelina.unavailable.0")},{chara:"francisca",text:e("evangelina.unavailable.1")},{chara:"ann",text:e("evangelina.unavailable.2")}])}),!o.started||o.completed)return a.destroy(),void n.destroy();a.setTapEvent(async a=>{await t.camera.look(a.x,a.y+50,600),await t.talk([{chara:"ann",text:e("evangelina.boss1.0")},{chara:"ann",text:e("evangelina.boss1.1")},{chara:a,text:e("evangelina.boss1.2")},{chara:"ann",text:e("evangelina.boss1.3")},{chara:a,text:e("evangelina.boss1.4")},{chara:a,text:e("evangelina.boss1.5")},{chara:a,text:e("evangelina.boss1.6")},{chara:"ann",text:e("evangelina.boss1.7")},{chara:a,text:e("evangelina.boss1.8")}]),await t.ui.sleep(500);await t.ui.battle([(0,s.default)("queen",32,{hp:1700})],{boss:!0,bgm:"battle3"})&&(window.archiveManager.activate("evangelina"),a.die(),await t.camera.revert(600),await t.talk([{chara:"ann",text:e("evangelina.boss2.0")},{chara:"jaquelyn",text:e("evangelina.boss2.1")},{chara:"ann",text:e("evangelina.boss2.2")},{chara:"francisca",text:e("evangelina.boss2.3")},{chara:"ann",text:e("evangelina.boss2.4")},{chara:"ann",text:e("evangelina.boss2.5")},{chara:"ann",text:e("evangelina.boss2.6")},{chara:"jaquelyn",text:e("evangelina.boss2.7")},{chara:"jaquelyn",text:e("evangelina.boss2.8")},{chara:"ann",text:e("evangelina.boss2.9")}]),n.setVisible(!0),t.francisca.setAllowWalkingWhileEvent(!0),t.jaquelyn.setAllowWalkingWhileEvent(!0),await t.player.setSpeed(200).setTargetPosition(15..toPixelCenter,21..toPixelCenter),a=n,await t.talk([{chara:a,text:e("evangelina.solve1.0")},{chara:"ann",text:e("evangelina.solve1.1")}]),await t.camera.look(a.x,a.y-60,600),await t.talk([{chara:a,text:e("evangelina.solve1.2")},{chara:a,text:e("evangelina.solve1.3")},{chara:"ann",text:e("evangelina.solve1.4")},{chara:"ann",text:e("evangelina.solve1.5")},{chara:a,text:e("evangelina.solve1.6")},{chara:a,text:e("evangelina.solve1.7")},{chara:a,text:e("evangelina.solve1.8")},{chara:"ann",text:e("evangelina.solve1.9")},{chara:"ann",text:e("evangelina.solve1.10")},{chara:"ann",text:e("evangelina.solve1.11")},{chara:a,text:e("evangelina.solve1.12")},{chara:a,text:e("evangelina.solve1.13")},{chara:a,text:e("evangelina.solve1.14")},{chara:a,text:e("evangelina.solve1.15")},{chara:a,text:e("evangelina.solve1.16")},{chara:a,text:e("evangelina.solve1.17")},{chara:a,text:e("evangelina.solve1.18")},{chara:a,text:e("evangelina.solve1.19")},{chara:"ann",text:e("evangelina.solve1.20")},{chara:a,text:e("evangelina.solve1.21")},{chara:a,text:e("evangelina.solve1.22")},{chara:a,text:e("evangelina.solve1.23")},{chara:a,text:e("evangelina.solve1.24")},{chara:a,text:e("evangelina.solve1.25")},{chara:"ann",text:e("evangelina.solve1.26")},{chara:"ann",text:e("evangelina.solve1.27")},{chara:a,text:e("evangelina.solve1.28")},{chara:a,text:e("evangelina.solve1.29")},{chara:a,text:e("evangelina.solve1.30")},{chara:a,text:e("evangelina.solve1.31")},{chara:a,text:e("evangelina.solve1.32")},{chara:a,text:e("evangelina.solve1.33")},{chara:a,text:e("evangelina.solve1.34")},{chara:a,text:e("evangelina.solve1.35")},{chara:a,text:e("evangelina.solve1.36")},{chara:a,text:e("evangelina.solve1.37")}]),o.completed=!0,t.ui.missionUpdate("m3_5",!0),t.add.tween({targets:n,duration:500,alpha:0,onComplete:()=>n.destroy()}),t.ui.sleep(1e3),await t.talk([{chara:"ann",text:e("evangelina.solve2.0")},{chara:"ann",text:e("evangelina.solve2.1")},{chara:"ann",text:e("evangelina.solve2.2")},{chara:"francisca",text:e("evangelina.solve2.3")}]),await t.ui.sleep(1e3),t.storage.state.chapter=4,await t.mapChange("room1",19..toPixelCenter,11..toPixel,{speed:"slow"}))})}}).call(this,a(3).default)},1775:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:`${e("area.temple")} - ${e("areaSub.temple.a")}`,bgm:"wind",enemyLevel:32,enemyGroups:[["bird"],["bird","bird"]],create(t){t.ui.sleep(2e3).then(()=>{t.tweetOnce(t.jaquelyn,e("tweet.tm1"),"tm1")})}}}).call(this,a(3).default)},1776:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(750),s=a(743),o=a(1777),i=(n=o)&&n.__esModule?n:{default:n};t.default={name:`${e("area.temple")} - ${e("areaSub.temple.b")}`,bgm:"temple",battleBgm:"temple",enemyLevel:33,enemyGroups:[["bird"],["bird","bird"],["lizard"],["lizard","lizard"]],create(e){(0,i.default)(e,{soldier1:e.map.getObjectById(11),soldier2:e.map.getObjectById(12),mary:e.map.getObjectById(13),loretta:e.map.getObjectById(14),dario:e.map.getObjectById(15).setRandomWalk(!0),drystan:e.map.getObjectById(16),ray:e.map.getObjectById(17).setRandomWalk(!0)});const t=[6,7,8].map(t=>e.map.getObjectById(t)),a=e.map.getObjectById(9),n=e.map.getObjectById(18),o=Number(2).toArray().map(t=>e.add.sprite(48*t,0,"tileset/door_gimmick").setOrigin(0,0).setFrame(t)),l=Number(4).toArray().map(t=>{const a=t%2*48,n=33*Math.floor(t/2);return e.add.sprite(a,n,"tileset/door_gimmick_light").setOrigin(0,0).setFrame(t)});if(e.add.tween({targets:l,duration:500,alpha:.5,yoyo:!0,loop:-1}),a.add([...o,...l]),(0,r.gimmick)(e,t,a,o,l,n),e.storage.state.event.m4_4.completed){const t=e.map.getLayerByName("layer3");[[17,48],[18,48],[19,48]].forEach(e=>{t.layer.data[e[1]][e[0]].setCollision(!1)})}else{const t=e.map.getObjectById(10);Number(2).toArray().map(a=>e.add.sprite(t.x+48*a,t.y,"tileset/door_gimmick").setOrigin(0,0).setFrame(a).setDepth(s.DEPTH.TOP))}}}}).call(this,a(3).default)},1777:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=(t,a)=>{const{soldier1:n,soldier2:r,mary:s,loretta:o,dario:i,drystan:l,ray:h}=a;if(4!==t.storage.state.chapter)return[n,r,s,o,i,l,h].forEach(e=>e.destroy());const c=t.storage.state.event.m4;n.setDisplayName(e("chara.guard")),r.setDisplayName(e("chara.guard")),s.setDisplayName(e("chara.mary")),o.setDisplayName(e("chara.loretta")),i.setDisplayName(e("chara.dario")),l.setDisplayName(e("chara.drystan")),h.setDisplayName(e("chara.ray")),n.setTapEvent(async a=>{await t.talk([{chara:a,text:e("templeCharacters.soldier1.0")},{chara:a,text:e("templeCharacters.soldier1.1")},{chara:a,text:e("templeCharacters.soldier1.2")},{chara:a,text:e("templeCharacters.soldier1.3")}])}),r.setTapEvent(async a=>{s.setR("right"),await t.talk([{chara:a,text:e("templeCharacters.soldier2.0")},{chara:s,text:e("templeCharacters.soldier2.1")},{chara:a,text:e("templeCharacters.soldier2.2")},{chara:a,text:e("templeCharacters.soldier2.3")}],{angle:!1})}),s.setTapEvent(async a=>{c.talked_mary?await t.talk([{chara:a,text:e("templeCharacters.mary.7")},{chara:"ann",text:e("templeCharacters.mary.8")}]):(await t.talk([{chara:a,text:e("templeCharacters.mary.0")},{chara:"ann",text:e("templeCharacters.mary.1")},{chara:"ann",text:e("templeCharacters.mary.2")},{chara:"ann",text:e("templeCharacters.mary.3")},{chara:a,text:e("templeCharacters.mary.4")},{chara:a,text:e("templeCharacters.mary.5")},{chara:a,text:e("templeCharacters.mary.6")},{chara:a,text:e("templeCharacters.mary.7")},{chara:"ann",text:e("templeCharacters.mary.8")}]),c.talked_mary=!0)}),o.setTapEvent(async a=>{c.talked_loretta?await t.talk([{chara:a,text:e("templeCharacters.loretta.9")},{chara:a,text:e("templeCharacters.loretta.10")}]):(await t.talk([{chara:a,text:e("templeCharacters.loretta.0")},{chara:a,text:e("templeCharacters.loretta.1")},{chara:"ann",text:e("templeCharacters.loretta.2")},{chara:"ann",text:e("templeCharacters.loretta.3")},{chara:a,text:e("templeCharacters.loretta.4")},{chara:"ann",text:e("templeCharacters.loretta.5")},{chara:a,text:e("templeCharacters.loretta.6")},{chara:a,text:e("templeCharacters.loretta.7")},{chara:"ann",text:e("templeCharacters.loretta.8")},{chara:a,text:e("templeCharacters.loretta.9")},{chara:a,text:e("templeCharacters.loretta.10")},{chara:"ann",text:e("templeCharacters.loretta.11")}]),c.talked_loretta=!0)}),i.setTapEvent(async a=>{if(c.talked_dario){const n=await t.talk([{chara:a,text:e("templeCharacters.dario.talk2.0")},null]),r=await t.ui.select([e("templeCharacters.dario.option.0"),e("templeCharacters.dario.option.1")]);if(n.destroy(),1===r)return;t.storage.state.battlers.forEach(e=>e.hp=e.max_hp),t.ui.announce(e("hpRecovered")),await t.talk([{chara:"ann",text:e("templeCharacters.dario.talk1.11")}])}else await t.talk([{chara:"ann",text:e("templeCharacters.dario.talk1.0")},{chara:a,text:e("templeCharacters.dario.talk1.1")},{chara:a,text:e("templeCharacters.dario.talk1.2")},{chara:a,text:e("templeCharacters.dario.talk1.3")},{chara:a,text:e("templeCharacters.dario.talk1.4")},{chara:a,text:e("templeCharacters.dario.talk1.5")},{chara:"ann",text:e("templeCharacters.dario.talk1.6")},{chara:"ann",text:e("templeCharacters.dario.talk1.7")},{chara:a,text:e("templeCharacters.dario.talk1.8")},{chara:a,text:e("templeCharacters.dario.talk1.9")},{chara:a,text:e("templeCharacters.dario.talk1.10")},{chara:"ann",text:e("templeCharacters.dario.talk1.11")}]),c.talked_dario=!0}),l.setTapEvent(async a=>{c.talked_drystan?await t.talk([{chara:a,text:e("templeCharacters.drystan.16")}]):(await t.talk([{chara:"ann",text:e("templeCharacters.drystan.0")},{chara:"ann",text:e("templeCharacters.drystan.1")},{chara:a,text:e("templeCharacters.drystan.2")},{chara:a,text:e("templeCharacters.drystan.3")},{chara:"ann",text:e("templeCharacters.drystan.4")},{chara:a,text:e("templeCharacters.drystan.5")},{chara:a,text:e("templeCharacters.drystan.6")},{chara:"ann",text:e("templeCharacters.drystan.7")},{chara:a,text:e("templeCharacters.drystan.8")},{chara:a,text:e("templeCharacters.drystan.9")},{chara:"ann",text:e("templeCharacters.drystan.10")},{chara:a,text:e("templeCharacters.drystan.11")},{chara:a,text:e("templeCharacters.drystan.12")},{chara:a,text:e("templeCharacters.drystan.13")},{chara:a,text:e("templeCharacters.drystan.14")},{chara:"ann",text:e("templeCharacters.drystan.15")},{chara:a,text:e("templeCharacters.drystan.16")},{chara:a,text:e("templeCharacters.drystan.17")}]),c.talked_drystan=!0)}),t.storage.state.event.m3_4.completed?h.setTapEvent(async a=>{c.talked_ray?await t.talk([{chara:"ann",text:e("templeCharacters.ray.10")},{chara:a,text:e("templeCharacters.ray.11")}]):(await t.talk([{chara:"ann",text:e("templeCharacters.ray.0")},{chara:a,text:e("templeCharacters.ray.1")},{chara:a,text:e("templeCharacters.ray.2")},{chara:"ann",text:e("templeCharacters.ray.3")},{chara:a,text:e("templeCharacters.ray.4")},{chara:a,text:e("templeCharacters.ray.5")},{chara:"ann",text:e("templeCharacters.ray.6")},{chara:"ann",text:e("templeCharacters.ray.7")},{chara:a,text:e("templeCharacters.ray.8")},{chara:"ann",text:e("templeCharacters.ray.9")},{chara:"ann",text:e("templeCharacters.ray.10")},{chara:a,text:e("templeCharacters.ray.11")}]),c.talked_ray=!0)}):h.destroy()}}).call(this,a(3).default)},1778:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:`${e("area.temple")} - ${e("areaSub.temple.c")}`,bgm:"temple",battleBgm:"temple",enemyLevel:34,enemyGroups:[["bird"],["bird","bird"],["lizard"],["lizard","lizard"],["bird","lizard","bird"]],create(){}}}).call(this,a(3).default)},1779:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(750);t.default={name:`${e("area.temple")} - ${e("areaSub.temple.c")}`,bgm:"temple",battleBgm:"temple",enemyLevel:35,enemyGroups:[["bird"],["bird","bird"],["lizard"],["lizard","lizard"],["bird","lizard","bird"]],create(e){const t=e.map.getObjectById(3).setRandomWalk(!0);(0,n.architect)(e,t)}}}).call(this,a(3).default)},1780:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:`${e("area.temple")} - ${e("areaSub.temple.d")}`,bgm:"temple",battleBgm:"temple",enemyLevel:36,enemyGroups:[["bird"],["bird","bird"],["lizard"],["lizard","lizard"],["bird","lizard","bird"]],create(e){}}}).call(this,a(3).default)},1781:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:`${e("area.temple")} - ${e("areaSub.temple.d")}`,bgm:"temple",battleBgm:"temple",enemyLevel:37,enemyGroups:[["bird"],["bird","bird"],["lizard"],["lizard","lizard"],["bird","lizard","bird"]],create(t){const a=t.map.getObjectById(2),n=t.map.getObjectById(13);t.storage.state.gimmicks.includes("temple6_13")||(a.setVisible(!1),n.setTapEvent(async()=>{await t.talk([{chara:"ann",text:e("mapEvent.temple6.statue")}]);0===await t.select([e("mapEvent.temple6.option.0"),e("mapEvent.temple6.option.1")])&&(t.storage.state.gimmicks.push("temple6_13"),a.setVisible(!0),n.removeTapEvent(),t.player.tweet(""))}).setCheckableDistance(70))}}}).call(this,a(3).default)},1782:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(198);t.default={name:`${e("area.temple")} - ${e("areaSub.temple.d")}`,bgm:"temple",battleBgm:"temple",enemyLevel:37,enemyGroups:[["bird"],["bird","bird"],["lizard"],["lizard","lizard"],["bird","lizard","bird"]],create(e){const t=e.map.getObjectById(3).setRandomWalk(!0);(0,n.allsRight)(e,t)}}}).call(this,a(3).default)},1783:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(199);t.default={name:`${e("area.temple")} - ${e("areaSub.temple.e")}`,bgm:"temple",battleBgm:"temple",enemyLevel:38,enemyGroups:[["tree"],["tree","tree"],["bird","tree","bird"]],create(e){this.apples=Array.range(4,9).map(t=>({apple:e.map.getObjectById(t),key:"a8_"+t})),this.apples.forEach(t=>(0,n.appleCollection)(e,t.apple,t.key))},update(t){t.frame%15==0&&this.apples.filter(e=>e.apple.active&&e.apple.distanceToPlayer<80).forEach(a=>{n.GOOD_APPLES.includes(a.key)?t.tweetOnce(t.player,e("tweet.aplg"),"aplg"):t.tweetOnce(t.francisca,e("tweet.aplb"),"aplb")})}}}).call(this,a(3).default)},1784:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(1785),r=a(199);t.default={name:`${e("area.temple")} - ${e("areaSub.temple.e")}`,bgm:"temple",battleBgm:"temple",enemyLevel:39,enemyGroups:[["tree","tree"],["bird","tree","bird"],["thief"]],create(e){const t=e.map.getObjectById(3),a=e.map.getObjectById(2);(0,n.calibur)(e,t,a),Array.range(4,5).forEach(t=>(0,r.appleCollection)(e,e.map.getObjectById(t),"a9_"+t)),this.sword=t},update(t){t.storage.state.event.m4_3.started&&this.sword.active&&this.sword.distanceToPlayer<180&&t.tweetOnce(t.francisca,e("tweet.clbr"),"clbr")}}}).call(this,a(3).default)},1785:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.calibur=void 0;var n,r=a(52),s=(n=r)&&n.__esModule?n:{default:n};const o=e=>{const t=e.map.getLayerByName("layer4");t.layer.data[7][15].index=326,t.layer.data[7][16].index=327,t.layer.data[8][15].index=336,t.layer.data[8][16].index=337};t.calibur=(t,a,n)=>{const r=t.storage.state.event.m4_3;if(r.completed&&o(t),!r.started||r.completed)return a.destroy(),void n.destroy();n.setDisplayName(e("chara.nikke")).setVisible(r.talked);const i=r.talked?n:a,l=async()=>{await(async()=>{t.player.y>n.y+40||(await t.ui.transition("fast"),t.setMembersPosition(n.x,n.y+70,"up"),await t.ui.sleep(300))})();const h=n,c=async()=>{if(1===await t.select([e("calibur.option.0"),e("calibur.option.1")]))return await t.talk([{chara:h,text:e("calibur.cancel.0")}]),i.removeTapEvent(),n.setTapEvent(l),void await t.camera.revert(500);await t.ui.battle([(0,s.default)("nikke",41,{hp:1200})],{boss:!0,bgm:"battle2"})&&(await t.talk([{chara:h,text:e("calibur.solve.0")},{chara:h,text:e("calibur.solve.1")},{chara:h,text:e("calibur.solve.2")},{chara:h,text:e("calibur.solve.3")},{chara:h,text:e("calibur.solve.4")},{chara:h,text:e("calibur.solve.5")},{chara:"ann",text:e("calibur.solve.6")}]),o(t),t.ui.increaseWeapon(19),await t.talk([{chara:h,text:e("calibur.solve.7")},{chara:"ann",text:e("calibur.solve.8")},{chara:h,text:e("calibur.solve.9")},{chara:h,text:e("calibur.solve.10")},{chara:h,text:e("calibur.solve.11")},{chara:h,text:e("calibur.solve.12")}]),t.substances.remove(h),await h.setSpeed(80).setTargetPosition(h.x-70,h.y+40),await t.talk([{chara:h,text:e("calibur.solve.13")},{chara:h,text:e("calibur.solve.14")},{chara:h,text:e("calibur.solve.15")},{chara:"ann",text:e("calibur.solve.16")},{chara:h,text:e("calibur.solve.17")},{chara:"ann",text:e("calibur.solve.18")},{chara:h,text:e("calibur.solve.19")},{chara:h,text:e("calibur.solve.20")}]),await h.setSpeed(200).setTargetPosition(h.x-20,h.y+150),await h.setSpeed(400).setTargetPosition(h.x-30,h.y+300),r.completed=!0,t.ui.missionUpdate("m4_3",!0),a.destroy(),n.destroy(),await t.camera.revert(500))};if(r.talked)await t.camera.look(16..toPixel,7..toPixelCenter,500),await t.talk([{chara:h,text:e("calibur.talked.0")}]),await c();else{r.talked=!0,await t.talk([{chara:"ann",text:e("calibur.start.0")}]),t.ui.sleep(300);const a=t.add.rectangle(0,0,t.map.width,t.map.height,4508808);a.setAlpha(0).setBlendMode(Phaser.BlendModes.OVERLAY).setDepth(14e4).setOrigin(0,0),t.add.tween({targets:a,duration:1200,ease:"Power2",alpha:.7,yoyo:!0,hold:1200,onComplete(){a.destroy()}}),await t.ui.sleep(2400),n.setVisible(!0).setAlpha(0),t.add.tween({targets:n,duration:1200,ease:"Power2",alpha:1}),await t.ui.sleep(300),t.player.tweet(""),await t.ui.sleep(1200),await t.camera.look(16..toPixel,7..toPixel,500),await t.talk([{chara:h,text:e("calibur.start.1")},{chara:h,text:e("calibur.start.2")},{chara:"ann",text:e("calibur.start.3")},{chara:h,text:e("calibur.start.4")},{chara:h,text:e("calibur.start.5")},{chara:h,text:e("calibur.start.6")},{chara:"ann",text:e("calibur.start.7")},{chara:h,text:e("calibur.start.8")},{chara:"ann",text:e("calibur.start.9")},{chara:h,text:e("calibur.start.10")},{chara:h,text:e("calibur.start.11")},{chara:h,text:e("calibur.start.12")},{chara:"ann",text:e("calibur.start.13")},{chara:h,text:e("calibur.start.14")},{chara:"ann",text:e("calibur.start.15")},{chara:h,text:e("calibur.start.16")},{chara:"ann",text:e("calibur.start.17")},{chara:h,text:e("calibur.start.18")},{chara:"ann",text:e("calibur.start.19")},{chara:h,text:e("calibur.start.20")},{chara:"ann",text:e("calibur.start.21")},{chara:h,text:e("calibur.start.22")},{chara:h,text:e("calibur.start.23")},{chara:h,text:e("calibur.start.24")},{chara:"ann",text:e("calibur.start.25")},{chara:h,text:e("calibur.start.26")},{chara:h,text:e("calibur.start.27")},{chara:h,text:e("calibur.start.28")},{chara:"ann",text:e("calibur.start.29")},{chara:h,text:e("calibur.start.30")},{chara:"ann",text:e("calibur.start.31")},{chara:h,text:e("calibur.start.32")},{chara:h,text:e("calibur.start.33")},{chara:h,text:e("calibur.start.34")},{chara:"ann",text:e("calibur.start.35")},{chara:"ann",text:e("calibur.start.36")},{chara:h,text:e("calibur.start.37")},{chara:"ann",text:e("calibur.start.38")},{chara:h,text:e("calibur.start.39")},{chara:h,text:e("calibur.start.40")},{chara:h,text:e("calibur.start.41")},{chara:h,text:e("calibur.start.42")},{chara:h,text:e("calibur.start.43")},{chara:h,text:e("calibur.start.44")},{chara:"ann",text:e("calibur.start.45")},{chara:h,text:e("calibur.start.46")},{chara:h,text:e("calibur.start.47")},{chara:h,text:e("calibur.start.48")},{chara:h,text:e("calibur.start.49")},{chara:h,text:e("calibur.start.50")},{chara:h,text:e("calibur.start.51")},{chara:"ann",text:e("calibur.start.52")},{chara:h,text:e("calibur.start.53")},{chara:"ann",text:e("calibur.start.54")},{chara:h,text:e("calibur.start.55")},{chara:h,text:e("calibur.start.56")}]),await c()}};i.setTapEvent(l)}}).call(this,a(3).default)},1786:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(199);t.default={name:`${e("area.temple")} - ${e("areaSub.temple.e")}`,bgm:"temple",battleBgm:"temple",enemyLevel:40,enemyGroups:[["tree","tree"],["bird","tree","bird"],["thief","thief"],["tree","thief"]],create(e){const t=e.map.getObjectById(2),a=e.map.getImageByName("megami2");(0,n.lute)(e,t,a)}}}).call(this,a(3).default)},1787:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:`${e("area.temple")} - ${e("areaSub.temple.f")}`,enemyLevel:41,enemyGroups:[["thief","thief"],["knight"]],create(e){}}}).call(this,a(3).default)},1788:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(312);t.default={name:`${e("area.temple")} - ${e("areaSub.temple.f")}`,enemyLevel:42,enemyGroups:[["thief","thief"],["knight"],["knight","knight"]],create(e){const t=e.map.getObjectById(3),a=e.map.getObjectById(2),r=Array.range(4,6).map(t=>e.map.getObjectById(t).setFaceKey("soldier"));(0,n.ethelbald)(e,t,r,a),e.map.getObjectById(7).setEvent(async()=>{e.tweetOnce(e.player,"","tm12")},!1)}}}).call(this,a(3).default)},1789:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:`${e("area.temple")} - ${e("areaSub.temple.f")}`,enemyLevel:43,enemyGroups:[["thief","thief"],["thief","thief","thief"],["knight"],["knight","knight"]],create(e){}}}).call(this,a(3).default)},1790:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(312);t.default={name:`${e("area.temple")} - ${e("areaSub.temple.f")}`,enemyLevel:44,enemyGroups:[["thief","thief"],["thief","thief","thief"],["knight"],["knight","knight"]],create(e){const t=e.map.getObjectById(7);(0,n.gateConfirm)(e,t)}}}).call(this,a(3).default)},1791:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(312);t.default={name:`${e("area.temple")} - ${e("areaSub.temple.g")}`,create(t){const a=t.map.getObjectById(2);a.image.y+=55;const r=t.map.getObjectById(3),s=t.map.getObjectById(4),o=t.map.getObjectById(5),i=t.map.getObjectById(6);(0,n.dragon)(t,a,r,s,o,i);const l=t.map.getObjectById(7);5!==t.storage.state.chapter||t.storage.state.gimmicks.includes("temple15_7")?l.destroy():l.setTapEvent(async()=>{t.storage.state.gimmicks.push("temple15_7"),t.ui.announce(e("gotItem",e("item.dragonScale"))),l.destroy()})}}}).call(this,a(3).default)},1792:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(146),s=(n=r)&&n.__esModule?n:{default:n};class o extends s.default{constructor(e,t,a,n,r){super(e,t,a,n,r),this.setTarget(e.player),this.setFollowDiff(20),this.player=e.player,this.body.setDrag(700),this.setAllowWalkingWhileEvent(!1)}_walkToTargetPosition(){this.scene.ui.eventMode&&!this.allowWalkingWhileEvent||super._walkToTargetPosition()}setFollowDiff(e){return this.followDiff=e,this}setAllowWalkingWhileEvent(e){return this.allowWalkingWhileEvent=e,this}get followingX(){return this.hasTargetPosition?this._targetPositionX:this.player.positionHistory[this.followDiff][0]}get followingY(){return this.hasTargetPosition?this._targetPositionY:this.player.positionHistory[this.followDiff][1]}}t.default=o},1793:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(149),r=a(150),s=a(197),o=a(198);t.default=t=>{t.storage.state.event.m1_3.count>=n.MANDRAKE_COUNT&&t.tweetOnce(t.jaquelyn,e("afterBattle.m1_3"),"mdrk"),t.storage.state.event.m2_2.count>=r.MAGIC_STONES&&t.tweetOnce(t.francisca,e("afterBattle.m2_2"),"mstn"),t.storage.state.event.m3_2.count>=s.WATER_COUNT&&t.tweetOnce(t.francisca,e("afterBattle.m3_2"),"wtr"),t.storage.state.event.m4_2.count>=o.KELUNNE_COUNT&&t.tweetOnce(t.jaquelyn,e("afterBattle.m4_2"),"kln")}}).call(this,a(3).default)},1794:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=v(a(2)),r=v(a(12)),s=v(a(43)),o=v(a(309)),i=v(a(310)),l=a(47),h=v(a(751)),c=v(a(1795)),d=v(a(1797)),u=v(a(1798)),m=v(a(1802)),g=v(a(1804)),p=v(a(1809)),y=v(a(77)),f=v(a(1810)),w=v(a(1812)),b=v(a(1813)),x=v(a(1814)),k=v(a(313));function v(e){return e&&e.__esModule?e:{default:e}}const I={fast:200,normal:500,slow:1e3},_=300,C=200;class T extends Phaser.Scene{constructor(){super({key:"UI",active:!1})}create(e={}){this.storage=s.default,this.setting=o.default,this.audio=new x.default(this),this.input.keyboard.on("keydown_F12",e=>{e.preventDefault(),this.snapShot(this)}),this.menuButton=this.getMenuButton(70..byRight,35..byBottom),this.add.existing(this.menuButton),this.loadEncounter(),this.battlerSummary=new f.default(this),this.blocker=this.add.rectangle(0,0,r.default.WIDTH,r.default.HEIGHT).setInteractive().setOrigin(0,0).setVisible(!1),this.add.existing(this.blocker),this.virtualStick=new b.default(this,100,160..byBottom).setVisible(this.touchMode),this.checkButton=this.getCheckButton().setVisible(!1),this.eventMode=!1,this.setChapterCreditFlag(!1)}update(e,t){const a=Math.floor(e/1e3);this.sec!==a&&(this.sec=a,this.storage.state.sec+=1),this.battlerSummary.update(),this.virtualStick.setVisible(this.controllable&&this.touchMode),this.checkButton.setVisible(this.controllable&&this.touchMode&&this.gameScene.nearestCheckable),this.gameScene.nearestCheckable&&this.checkButton.icon.setFrame("bubble_talk"===this.gameScene.nearestCheckable.balloon.key?0:1),this.menuButton.setVisible(this.controllable)}get gameScene(){return this.scene.get("Game")}get controllable(){return!this.eventMode&&this.scene.isActive("Game")}get touchMode(){switch(this.setting.state.controller){case 0:return!this.sys.game.device.os.desktop;case 1:return!1;case 2:return!0}}get inBattle(){return this.children.list.some(e=>e instanceof u.default)}loadEncounter(){this.encounter1=this.add.container(70..byRight,70).setSize(84,85),this.encounter1.add(this.add.sprite(0,0,"encounter1").setOrigin(.5,.5).setScale(.9,.9)),this.encounter1.add(this.add.sprite(0,60,"click").setOrigin(.5,.5).setScale(1,1)),this.add.tween({targets:this.encounter1.list[0],duration:400,ease:"Power2",loop:-1,scaleX:1.1,scaleY:1.1}),this.add.tween({targets:this.encounter1.list[1],duration:400,loop:-1,yoyo:!0,y:65}),this.encounter1.setInteractive().on("pointerdown",()=>{this.audio.se("click"),this.gameScene.encounter(!0)}),this.encounter2=this.add.sprite(70..byRight,70,"encounter2").setOrigin(.5,.5).setScale(.9,.9),this.add.tween({targets:this.encounter2,duration:400,ease:"Power2",loop:-1,scaleX:1.1,scaleY:1.1}),this.encounter2.setInteractive().on("pointerdown",()=>{this.audio.se("click"),this.gameScene.encounter(!0)}),this.setEncounter(!1)}getCheckButton(){const e=this.add.container(70..byRight,160..byBottom).setSize(80,80).setInteractive().on("pointerup",()=>{this.gameScene.nearestCheckable.execTapEvent()});return e.add(this.add.circle(0,0,50,r.default.COLORS.black,.5)),e.icon=this.add.sprite(0,0,"virtual_button").setAlpha(.25),e.add(e.icon),e}setEncounter(e,t){e?this[t?"encounter1":"encounter2"].visible=e:(this.encounter1.visible=!1,this.encounter2.visible=!1)}async announce(e){this.audio.se("announce");const t=this.add.container(20,50);t.setDepth(_);const a=this.add.text(15,-1,e,{align:"left",fontSize:13,fontFamily:r.default.FONTS.TEXT}).setPadding(0,2,0,0).setOrigin(0,.5),n=new y.default(this,0,0,a.width+35,27).setOrigin(0,.5);return t.add([n,a]),await(0,l.slideIn)(this,t),await(0,l.slideOut)(this,t,{x:-200,delay:2e3}),t}async systemMessage(e,t=1e3){const a=this.add.text(20..byRight,22,e,{align:"right",fontSize:12,fontFamily:r.default.FONTS.TEXT}).setPadding(0,2,0,0).setOrigin(1,.5);return await(0,l.fadeIn)(this,a),await(0,l.fadeOut)(this,a,{delay:t}),a}menu(){return new Promise(e=>new g.default(this,e))}worldMap(){return new Promise(e=>new p.default(this,e))}talk(e,t){return new Promise(a=>new c.default(this,e,t,a))}select(e){return new Promise(t=>new d.default(this,e,t))}battle(e,t){return this.gameScene.setEncountDelay(),new Promise(a=>new u.default(this,e,t,a))}battleResult(e,t){return new Promise(a=>new m.default(this,e,t,a).setDepth(C))}sleep(e){return new Promise(t=>setTimeout(()=>t(),e))}transition(e){const t=I[e];return new Promise(e=>{const a=this.add.rectangle(0,0,r.default.WIDTH,r.default.HEIGHT,1118481).setOrigin(0,0).setAlpha(0);this.add.tween({targets:a,duration:t,hold:t.half,alpha:1,yoyo:!0,onYoyo:e,onComplete:()=>a.destroy()})})}async informMapName(e){if(!e)return;const t=this.add.sprite(0,0,"dark").setOrigin(0,0),a=this.add.rectangle(0,0,r.default.WIDTH,r.default.HEIGHT,0).setOrigin(0,0).setInteractive(),n=e.split("").join("  "),s=this.add.text(15,-8,n,{align:"center",fontSize:21,fontFamily:r.default.FONTS.UI}).setOrigin(.5,.5).setPosition(r.default.WIDTH.half,r.default.HEIGHT.half),o=[t,a,s];(0,l.fadeIn)(this,o,{alpha:.5}),this.gameScene.blur(!0),await this.sleep(2e3),this.gameScene.blur(!1),this.add.tween({targets:s,duration:250,scale:4}),await(0,l.fadeOut)(this,o)}setEventMode(e){this.eventMode=e,e?(this.gameScene.player.stopWalk(),this.blocker.setVisible(!0),this.battlerSummary.setVisible(!1),this.encounter1.setAlpha(0),this.encounter2.setAlpha(0),this.mapInfo&&this.mapInfo.setVisible(!1)):(this.battlerSummary.setVisible(!0),this.encounter1.setAlpha(1),this.encounter2.setAlpha(1),this.mapInfo&&this.mapInfo.setVisible(!0),this.time.delayedCall(1,()=>{this.blocker.setVisible(!1)}))}autoEvent(e){this.setEventMode(!0),e().then(()=>this.setEventMode(!1))}snapshopForSaveData(){return new Promise(e=>{this.gameScene.player.targetMarker.anim.seek(0),this.scene.sleep("UI"),this.game.renderer.snapshot(t=>{this.storage.lastSnapshot=t.src,this.scene.wake("UI"),e()},"image/jpeg",.25)})}getMenuButton(t,a){const n=this.add.container(t,a).setSize(120,50);n.add(this.add.rectangle(0,0,120,50,r.default.COLORS.black).setAlpha(0)),n.add(this.add.text(15,-8,"MENU",{align:"center",fontSize:20,fontStyle:"bold",fontFamily:r.default.FONTS.UI}).setPadding(0,2,0,0).setOrigin(.5,.5));const s=this.add.text(15,11,e("ui.sub.menu"),{align:"center",fontSize:9,fontStyle:"bold",fontFamily:r.default.FONTS.TEXT}).setPadding(0,2,0,0).setOrigin(.5,.5);return n.add(s),n.add(this.add.rectangle(-35,-1,25,3,r.default.COLORS.theme).setRotation(Math.PI/1)),n.add(this.add.rectangle(-35,-1,25,3,r.default.COLORS.theme).setRotation(Math.PI/-2)),n.updateLabel=()=>s.setText(e("ui.sub.menu")),n.setInteractive().on("pointerdown",e=>{n.x!==t||this.inBattle||(e.isDown=!1,this.audio.se("click"),(0,l.slideOut)(this,n,{destroy:!1,x:100}),(0,l.slideOut)(this,this.encounter1,{destroy:!1,x:100}),(0,l.slideOut)(this,this.encounter2,{destroy:!1,x:100}),this.mapInfo&&this.mapInfo.setVisible(!1),this.snapshopForSaveData().then(()=>{this.menu().then(e=>{if(n.x=t,(0,l.slideIn)(this,n,{x:100,delay:100}),"backToTitle"===e)return this.gameScene.backToTitle();this.encounter1.x=70..byRight,this.encounter2.x=70..byRight,(0,l.slideIn)(this,this.encounter1,{x:100,delay:100}),(0,l.slideIn)(this,this.encounter2,{x:100,delay:100}),this.mapInfo&&this.mapInfo.setVisible(!0),this.battlerSummary.show()})}))}),n}chapterStart(e){return new Promise(t=>{const a=this.add.container(r.default.WIDTH.half,r.default.HEIGHT.half),n=this.add.sprite(0,0,"emblem").setTint(3216914),s=this.add.text(0,-5,e,{fill:r.default.COLORS.white.toColorString,fontSize:16,fontFamily:r.default.FONTS.TEXT}).setOrigin(.5,.5);a.add([n,s]),new w.default(this,[a],!1).on("beforeEnd",t)})}setChapterCreditFlag(e){this.chapterCreditFlag=e}async chapterCredit(){if(!this.chapterCreditFlag)return;this.setChapterCreditFlag(!1),await this.sleep(500);const e=r.default.WIDTH-120,t=this.add.text(40,r.default.HEIGHT.half-32,"Written by",{align:"left",fontSize:11,fontFamily:r.default.FONTS.TEXT}).setPadding(0,2,0,0).setOrigin(0,1),a=this.add.text(40,r.default.HEIGHT.half-30,"Laineus",{align:"left",fontSize:15,fontFamily:r.default.FONTS.TEXT}).setPadding(0,2,0,0).setOrigin(0,0);await(0,l.fadeIn)(this,[t,a]),await this.sleep(2500),await(0,l.fadeOut)(this,[t,a]),await this.sleep(1e3);const n=this.add.text(e,r.default.HEIGHT.half-32,"Illustrations by",{align:"left",fontSize:11,fontFamily:r.default.FONTS.TEXT}).setPadding(0,2,0,0).setOrigin(0,1),s=this.add.text(e,r.default.HEIGHT.half-30,"",{align:"left",fontSize:15,fontFamily:r.default.FONTS.TEXT}).setPadding(0,2,0,0).setOrigin(0,0),o=this.add.text(e,r.default.HEIGHT.half+30,"Music by",{align:"left",fontSize:11,fontFamily:r.default.FONTS.TEXT}).setPadding(0,2,0,0).setOrigin(0,1),i=this.add.text(e,r.default.HEIGHT.half+32,"Laineus",{align:"left",fontSize:15,fontFamily:r.default.FONTS.TEXT}).setPadding(0,2,0,0).setOrigin(0,0);await(0,l.fadeIn)(this,[n,s,o,i]),await this.sleep(2500),await(0,l.fadeOut)(this,[n,s,o,i])}credit(){return new Promise(e=>{const t=[{label:"Written by",name:"Laineus"},{label:"Illustrations by",name:""},{label:"Music by",name:"Laineus"},{label:"English translations by",name:"uribgp"}].map(e=>{const t=this.add.container(r.default.WIDTH.half,r.default.HEIGHT.half);return t.add(this.add.text(0,-20,e.label,{fill:r.default.COLORS.white.toColorString,fontSize:13,fontFamily:r.default.FONTS.TEXT}).setOrigin(.5,.5)),t.add(this.add.text(0,5,e.name,{fill:r.default.COLORS.white.toColorString,fontSize:17,fontFamily:r.default.FONTS.TEXT}).setOrigin(.5,.5)),t});new w.default(this,t,!1).on("beforeEnd",e)})}storyTelling(){const t=5..toArray().map(t=>e("storyTelling."+t));return new Promise(e=>{const a=this.add.container(r.default.WIDTH.half,r.default.HEIGHT.half);a.add(this.add.text(0,-35,t[0],{align:"left",fill:r.default.COLORS.white.toColorString,fontSize:18,fontFamily:r.default.FONTS.TEXT}).setOrigin(.5,.5).setLineSpacing(15)),a.add(this.add.text(185,55,t[1],{align:"right",fill:r.default.COLORS.white.toColorString,fontSize:18,fontFamily:r.default.FONTS.TEXT}).setOrigin(.5,.5).setLineSpacing(15));const n=this.add.text(r.default.WIDTH.half,r.default.HEIGHT.half-5,t[2],{align:"left",fill:r.default.COLORS.white.toColorString,fontSize:18,fontFamily:r.default.FONTS.TEXT}).setOrigin(.5,.5).setLineSpacing(15),s=this.add.text(r.default.WIDTH.half,r.default.HEIGHT.half-5,t[3],{align:"left",fill:r.default.COLORS.white.toColorString,fontSize:18,fontFamily:r.default.FONTS.TEXT}).setOrigin(.5,.5).setLineSpacing(15),o=this.add.text(r.default.WIDTH.half,r.default.HEIGHT.half-5,t[4],{align:"left",fill:r.default.COLORS.white.toColorString,fontSize:18,fontFamily:r.default.FONTS.TEXT}).setOrigin(.5,.5).setLineSpacing(15);this.audio.setBgm(null),this.sleep(1700).then(()=>this.audio.setBgm("storytelling")),new w.default(this,[a,n,s,o],!0).on("beforeEnd",e)})}increaseWeapon(t,a=!0){const n=k.default.find(e=>e.id===t);if(!n)return!1;const r=Math.max(...s.default.state.weapons.map(e=>e.id),0)+1;return this.storage.state.weapons.push({id:r,weapon_id:n.id}),a&&this.announce(e("gotItem",n.name)),n}missionUpdate(t,a){this.storage.state.event[t][a?"completed":"started"]=!0;const n=i.default.find(e=>e.key===t),r=e(a?"missionComplete":"missionStart",n.title);return i.default.every(e=>this.storage.state.event[e.key].completed)&&window.archiveManager.activate("completed"),this.announce(r)}snapShot(){const e=`ScreenShot_${(0,n.default)().format("YYYYMMDD_HHmmss")}.png`;this.game.renderer.snapshot(t=>(0,h.default)(t.src,e))}clearMapInfo(){this.mapInfo&&this.mapInfo.destroy()}async showMapInfo(t,a=!1){if(this.clearMapInfo(),!t)return;const n=t.enemyLevel?t.enemyLevel-Math.average(...this.storage.state.battlers.map(e=>e.lv)):0,s=n>=2,o=n>=4,i=o?15597568:s?15636736:r.default.COLORS.theme,h=t.name||e("ui.undefinedArea"),c=this.add.text(42,6,h,{align:"left",fill:r.default.COLORS.white.toColorString,fontSize:12,fontFamily:r.default.FONTS.TEXT}).setOrigin(0,0),d=t.enemyLevel?`${e("ui.recommendedLevel")} ${t.enemyLevel}`:e("ui.recommendedLevel")+" -",u=this.add.text(42,21,d,{align:"left",fill:i.toColorString,fontSize:12,fontFamily:r.default.FONTS.TEXT}).setOrigin(0,0),m=Math.max(c.width+70,u.width+70,180),g=this.add.container(0,0);if(g.warning=s,s){const e=new y.default(this,m-17,0,r.default.WIDTH+50,30,{color:i,alpha:.4}).setOrigin(0,0);this.add.tween({targets:e,duration:o?300:600,yoyo:!0,loop:-1,alpha:.6});const t=this.add.text(m+5,6,"WARNING",{align:"left",fill:r.default.COLORS.white.toColorString,stroke:r.default.COLORS.white.toColorString,strokeThickness:1,fontSize:16,fontFamily:r.default.FONTS.UI}).setAlpha(.5).setOrigin(0,0),a=this.add.tileSprite(m+90,12,r.default.WIDTH,6,"dashedline").setAlpha(.5).setOrigin(0,0);g.add([e,t,a])}const p=new y.default(this,-10,0,m,44).setOrigin(0,0),f=(()=>{if(o)return this.add.sprite(22,21,"alert").setTint(i);const e=this.add.circle(22,21,5);return e.isStroked=!0,e.lineWidth=1.5,e.strokeColor=i,e})();g.add([p,f,c,u]);const w=-(m-10);a?g.x=w:((0,l.slideIn)(this,g,{delay:250}),this.add.tween({targets:g,duration:400,ease:"Power2",delay:3100,x:w})),this.add.existing(g),this.mapInfo=g,this.mapInfo.reload=()=>this.showMapInfo(t,!0)}}t.default=T}).call(this,a(3).default)},1795:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(12)),r=o(a(1796)),s=o(a(146));function o(e){return e&&e.__esModule?e:{default:e}}class i extends Phaser.GameObjects.Container{constructor(e,t,{angle:a=!0}={},r){super(e),this.scene=e,this.events=t,this.callback=r,this.index=0,this.events=t.reduce((e,t)=>(t&&"string"==typeof t.text?t.text.split("|").forEach(a=>{e.push(Object.assign({},t,{text:a}))}):e.push(t?Object.assign({},t):t),e),[]),e.add.existing(this),this.npc=this.events.filter(e=>e&&e.chara.constructor===s.default).map(e=>e.chara),this.npc.forEach(e=>{e.setTalking(!0),a&&e.setR(e.angleTo(this.scene.gameScene.player))}),a&&this.npc.length&&this.scene.gameScene.player.setR(this.scene.gameScene.player.angleTo(this.npc[0]));const o=Math.average(...this.npc.map(e=>e.x),this.scene.gameScene.player.x);this.events.filter(e=>e).reduce((e,t)=>(t.position=this.getChara(t).x<o?-1:1,e&&e.chara!==t.chara&&e.position===t.position&&(t.position*=-1),t),null),this.tapArea=this.scene.add.rectangle(0,0,n.default.WIDTH,n.default.HEIGHT).setOrigin(0,0),this.tapArea.setInteractive().on("pointerup",this.next.bind(this)),this.add(this.tapArea),this.next()}getChara(e){switch(e.chara){case"ann":return this.scene.gameScene.player;case"francisca":return this.scene.gameScene.francisca;case"jaquelyn":return this.scene.gameScene.jaquelyn;default:return e.chara}}get current(){return this.events[this.index]}get prev(){return this.index?this.events[this.index-1]:null}get sameSpeakerAsBefore(){return this.current&&this.prev&&this.current.chara===this.prev.chara}get currentPosition(){return this.prev&&this.current.position===this.prev.position?-this.current.position:this.current.position}next(){if(!this.current)return this.end();if(this.scene.audio.se("talk"),this.sameSpeakerAsBefore)this.bubble.setText(this.current.text);else{this.deleteBubble();const e="string"==typeof this.current.chara,t=this.getChara(this.current),a=t.displayName||"No name",n=e?this.current.chara:t.faceKey,s=this.scene.gameScene.camera,o=t.x-s.scrollX+30*this.currentPosition,i=t.y-s.scrollY-84-(t.height||32).half;this.bubble=new r.default(this.scene,o,i,a,"face/"+n,this.current.text,this.currentPosition);const l=this.bubble.x,h=this.bubble.y;this.bubble.setScale(0,0).setPosition(l,h+100).setAlpha(0),this.scene.add.tween({targets:this.bubble,scaleX:1,scaleY:1,y:h,alpha:1,duration:150,ease:"Power2"})}this.index++}end(){null===this.current?this.tapArea.destroy():this.destroy(),this.callback&&this.callback(this)}deleteBubble(){this.bubble&&this.scene.add.tween({targets:this.bubble,scaleX:0,scaleY:0,alpha:0,duration:150,ease:"Power2",onComplete:this.bubble.destroy})}destroy(){this.npc.forEach(e=>e.setTalking(!1)),this.deleteBubble(),super.destroy()}}t.default=i},1796:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(12),s=(n=r)&&n.__esModule?n:{default:n};const o=[[32,10],[335,0],[360,65],[335,105],[190,102],[189,110],[196,122],[178,110],[176,101],[18,94],[0,40]],i={left:o,right:o.map(e=>[360-e[0],e[1]]),top:o.map(e=>[360-e[0],107-e[1]])};class l extends Phaser.GameObjects.Container{constructor(e,t,a,n,r,o,l=-1){super(e,Math.fix(t,180,s.default.WIDTH-180),Math.fix(a,90,s.default.HEIGHT-90));const h=a<-100,c=-1===l?"left":"right";this.bg=e.add.polygon(0,0,i[h?"top":c],s.default.COLORS.black).setAlpha(.7),this.bg.isStroked=!0,this.bg.lineWidth=1.5,this.bg.strokeColor=s.default.COLORS.white;const d=-1===l;this.image=e.add.sprite(d?-120:102,50,r).setOrigin(.5,1),this.name=e.add.text(d?-70:-140,d?-69:-72,n,{fill:s.default.COLORS.white.toColorString,fontSize:16,fontFamily:s.default.FONTS.TEXT,fontStyle:"bold",stroke:s.default.COLORS.dark.toColorString,strokeThickness:2}).setPadding(0,2,0,0),this.text=e.add.text(d?44:-44,-6,"",{fill:s.default.COLORS.white.toColorString,fontSize:14,fontFamily:s.default.FONTS.TEXT,lineSpacing:4.5,stroke:s.default.COLORS.dark.toColorString,strokeThickness:2,wordWrap:{width:200,useAdvancedWrap:!0}}).setOrigin(.5,.5).setPadding(0,2,0,0),this.setText(o),this.tri=e.add.triangle(...d?[147,36]:[55,30],-4,-3,4,-3,0,2,s.default.COLORS.white),e.add.tween({targets:this.tri,duration:400,loop:-1,yoyo:!0,y:this.tri.y-4}),this.add([this.bg,this.image,this.name,this.text,this.tri]),e.add.existing(this)}setText(e){this.text.text=e,this.text.setLineSpacing(this.text.height<82?4.5:0)}}t.default=l},1797:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(120)),r=s(a(12));function s(e){return e&&e.__esModule?e:{default:e}}class o extends Phaser.GameObjects.Container{constructor(e,t,a){super(e),this.scene=e,this.callback=a,this.optionTexts=t,e.add.existing(this),this.options=t.map((e,t)=>{const a=r.default.WIDTH-240..half-35,n=r.default.HEIGHT-this.sumHeight-20+55*t;return this.option(e,t,a,n)}),this.add(this.options)}option(e,t,a,r){return new n.default(this.scene,a,r,e,240,40,{align:"left",fontSize:16}).on("click",()=>{this.destroy(),this.callback&&this.callback(t)})}get sumHeight(){return 40*this.optionTexts.length+15*(this.optionTexts.length-1)}}t.default=o},1798:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(12)),r=c(a(1799)),s=c(a(1801)),o=c(a(120)),i=c(a(43)),l=c(a(753)),h=a(47);function c(e){return e&&e.__esModule?e:{default:e}}const d={1:[0],2:[-130,130],3:[-200,0,200],4:[-240,-80,80,240],5:[-260,-130,0,130,260]};class u extends Phaser.GameObjects.Container{constructor(t,a,{boss:l=!1,defeatEvent:h=!1,bgm:c=null}={},d){super(t),this.group=a,this.scene=t,this.boss=l,this.defeatEvent=h,this.callback=d,t.add.existing(this),t.scene.pause("Game"),this.scene.gameScene.blur(!0),this.overlay=this.scene.add.rectangle(0,0,n.default.WIDTH,n.default.HEIGHT,l?16711680:8939076,100).setOrigin(0,0),this.overlay.blendMode=1,this.window=this.scene.add.sprite(0,0,"dark").setOrigin(0,0),this.enemies=this.scene.add.container(0,0),this.players=this.scene.add.container(0,0),this.buttons=this.scene.add.container(0,0),this.add([this.overlay,this.window,this.enemies,this.players,this.buttons]),this.group.map(e=>new r.default(this.scene,e,l).setPosition(n.default.WIDTH.half,n.default.HEIGHT.half-50)).forEach(e=>this.enemies.add(e)),i.default.state.battlers.map((e,t)=>{l&&(e.hp=e.max_hp);const a=n.default.WIDTH.half+310*(t-1);return new s.default(this.scene,e).setPosition(a,70..byBottom)}).forEach(e=>this.players.add(e)),Number(this.enemies.length).toArray().forEach(t=>{const a=new o.default(this.scene,80,0,e("ui.battle.attack"),120,40);a.line=this.scene.add.line(-56,0,0,0,0,0,n.default.COLORS.white).setOrigin(0,0).setLineWidth(.5).setAlpha(.5),a.circle=this.scene.add.circle(0,1,2,n.default.COLORS.white).setOrigin(.5,.5),a.add([a.line,a.circle]),a.on("click",()=>{this.tapEnemy(this.enemies.list[t])}),this.buttons.add(a)}),this.all=[],this.players.list.forEach(e=>this.all.push(e)),this.enemies.list.forEach(e=>this.all.push(e)),this.turnIndex=-1,this.increaseTurn(),this.fixButtonsPosition(),this.slideInButtons(),this.players.list.forEach((e,t)=>{e.y+=150,this.scene.add.tween({targets:e,duration:200,ease:"Power2",delay:50*t,y:e.y-150})}),this.bgmResolver=this.scene.audio.interruptBgm(c||"battle1")}preUpdate(){this.enemies.list.forEach((e,t)=>{e.x=n.default.WIDTH.half+d[this.enemies.length][t]})}updateButtons(){const e=this.enemies.length!==this.buttons.list.length;this.buttons.list.slice(this.enemies.length).forEach(e=>e.destroy()),e&&this.fixButtonsPosition(),this.buttons.list.forEach(e=>{!e.visible&&this.playerTurn&&this.slideInButtons(),e.visible=this.playerTurn})}fixButtonsPosition(){this.victory||this.buttons.list.forEach((e,t)=>{const a=320+-52*t;e.y=a,e.line.geom.x2=-340+d[this.enemies.length][t],e.circle.x=-396+d[this.enemies.length][t],e.toInactive()})}slideInButtons(){this.buttons.list.forEach((e,t)=>{e.x=n.default.WIDTH.half+60+d[this.enemies.length][t],this.scene.add.tween({targets:e,duration:250,ease:"Power2",x:n.default.WIDTH-80}),e.line.scaleX=0,this.scene.add.tween({targets:e.line,duration:250,ease:"Power2",scaleX:1}),e.circle.x=-56,this.scene.add.tween({targets:e.circle,duration:250,ease:"Power2",x:-396+d[this.enemies.length][t]})})}get currentBattler(){return this.all[this.turnIndex]}get playerTurn(){return this.currentBattler.constructor===s.default}increaseTurn(){if(this.defeat)return this.end(!1);if(this.victory)return this.end(!0);this.turnIndex=this.turnIndex<this.all.length-1?this.turnIndex+1:0;if(!(this.currentBattler.alive&&this.currentBattler.increaseTurn()))return this.increaseTurn();this.setAbilityButtons(),this.playerTurn||this.execEnemyTurn(),this.updateButtons()}async execEnemyTurn(){await this.scene.sleep(220);const e=this.currentBattler.getAttackMode(),t={normal:1,double:2,triple:3};e.type in t?await this.attackToOnePlayer(t[e.type],e.mag):(await this.currentBattler.attackAnim(),await this.multiAttack(e.mag)),await this.scene.sleep(400),this.increaseTurn()}async attackToOnePlayer(e=1,t=1){const a=this.players.list.filter(e=>e.alive).random();if(!a)return await this.scene.sleep(180);return await this.counter(this.currentBattler,a)||(await this.currentBattler.attackAnim(),await this.currentBattler.attackTo(a,{mag:t}),e<=1)?void 0:this.attackToOnePlayer(e-1,t)}async cutIn(e){const t=this.scene,a=-10,r=450,s=-.12,o=[[0,80],[n.default.WIDTH+50,0],[n.default.WIDTH+50,240],[0,160]],i=Math.max(...o.map(e=>e[1]))-Math.min(...o.map(e=>e[1])),l=Math.cos(s-Math.PI/2)*i.half,h=Math.sin(s-Math.PI/2)*i.half,c=t.add.polygon(a,r,o).setFillStyle(n.default.COLORS.black).setScale(1,0).setRotation(s).setOrigin(0,0),d=t.make.graphics().setPosition(a,r).setScale(1,0).setRotation(s).fillPoints(c.geom.points,!0),u=new Phaser.Display.Masks.GeometryMask(t,d),m=t.add.sprite(590,325,"cutin_"+e.key).setAlpha(.5).setMask(u).setRotation(-.1);t.add.tween({targets:[c,d],duration:120,ease:"Power2",yoyo:!0,hold:500,scaleY:1,x:a+l,y:r+h,onComplete:()=>[c,d,u,m].forEach(e=>e.destroy())}),await this.scene.sleep(400)}async counter(e,t){const a=Math.round(100*t.hp/t.maxHp);if(Math.chance(a))return!1;const n=await this.counterChance(t);return n?(i.default.state.counter_delay-=i.default.state.counter_delay>500?100:10,await this.cutIn(t),await t.attackTo(this.currentBattler,{counter:!0})):i.default.state.counter_delay<500&&(i.default.state.counter_delay+=10),n}async counterChance(t){const a=this.scene.add.container(t.x,t.y-90).setSize(140,140),r=this.scene.add.rectangle(0,0,140,140,n.default.COLORS.black).setRotation(Math.PI/4).setScale(.7).setAlpha(.4),s=this.scene.add.rectangle(0,0,140,140).setFillStyle(n.default.COLORS.black,.6).setStrokeStyle(1,n.default.COLORS.white).setRotation(Math.PI/4),o=this.scene.add.text(0,0,e("ui.battle.counter"),{align:"center",fontSize:18,fontFamily:n.default.FONTS.UI,fill:n.default.COLORS.white.toColorString}).setOrigin(.5,.5).setPadding(0,2,0,0);return this.scene.add.tween({targets:r,duration:200,ease:"Power2",loop:-1,scale:1.2,alpha:.2}),a.add([r,s,o]),this.add(a),new Promise(e=>{a.setInteractive().on("pointerdown",()=>e(!0)),this.scene.sleep(i.default.state.counter_delay).then(()=>e(!1))}).then(e=>(a.destroy(),e))}addOptionButton(e,t,a,n){const r=new o.default(this.scene,t,a,e,130,40).setInteractive().on("pointerdown",()=>{this.clearAblButtons(),n()});this.add(r),this.ablButtons.push(r)}setAbilityButtons(){if(this.clearAblButtons(),this.ablButtons=[],!this.playerTurn)return;const e=this.currentBattler.weapon?l.default[this.currentBattler.weapon.ability]:null;if(e){switch(e.key){case"heal":this.players.list.forEach((t,a)=>{t.alive&&t.hp!==t.maxHp&&this.addOptionButton(e.label,210+310*a,390,()=>{this.currentBattler.heal(t,34),this.increaseTurn()})});break;case"multi-heal":{const t=this.players.list.filter(e=>e.alive&&e.hp<e.maxHp);if(!t.length)return;this.addOptionButton(e.label,85,320,()=>{t.forEach(e=>this.currentBattler.heal(e,20)),this.increaseTurn()});break}case"multi-attack":this.addOptionButton(e.label,85,220,()=>{this.multiAttack().then(this.increaseTurn.bind(this))})}(0,h.slideIn)(this.scene,this.ablButtons)}}clearAblButtons(){this.ablButtons&&this.ablButtons.forEach(e=>e.destroy())}tapEnemy(e){this.playerTurn&&(this.clearAblButtons(),this.buttons.list.forEach(e=>e.visible=!1),this.currentBattler.attackTo(e).then(()=>{this.buttons.list.forEach(e=>e.visible=!0),this.increaseTurn()}))}multiAttack(e=.66){const t=this.playerTurn?this.enemies.list:this.players.list.filter(e=>e.alive);return Promise.all(t.map(t=>this.currentBattler.attackTo(t,{mag:e})))}get defeat(){return 0===this.players.list.filter(e=>e.alive).length}get victory(){return 0===this.enemies.list.length}destroyUI(){this.enemies.destroy(),this.players.destroy(),this.buttons.destroy(),this.ablButtons.forEach(e=>e.destroy())}end(e){if(this.defeatEvent)return this.destroy(e),void i.default.state.battlers.forEach(e=>e.hp=e.max_hp);if(e)this.destroyUI(),this.boss?this.scene.battleResult(this.group,{boss:!0}).then(()=>{this.destroy(e)}):(this.scene.battleResult(this.group),this.destroy(e));else{const t=this.scene.add.rectangle(0,0,n.default.WIDTH,n.default.HEIGHT,16711680).setOrigin(0,0),a="GAME OVER".split("").join("  "),r=this.lvLabel=this.scene.add.text(n.default.WIDTH.half,n.default.HEIGHT.half-10,a,{align:"center",fill:n.default.COLORS.white.toColorString,fontSize:21,fontFamily:n.default.FONTS.UI}).setOrigin(.5,.5);this.add([t,r]),(0,h.fadeIn)(this.scene,t,{alpha:.6,duration:1800}),(0,h.fadeIn)(this.scene,r,{duration:800}),i.default.state.battlers.forEach(e=>e.hp=e.max_hp),setTimeout(()=>{this.scene.gameScene.mapChange("room1",8..toPixel,12..toPixelCenter,{r:"down"}).then(()=>{this.destroy(e)})},5e3)}}destroy(e){this.scene.scene.resume("Game"),this.scene.gameScene.blur(!1),this.bgmResolver(),super.destroy(),this.callback(e)}}t.default=u}).call(this,a(3).default)},1799:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(752)),r=o(a(145)),s=o(a(12));function o(e){return e&&e.__esModule?e:{default:e}}class i extends n.default{constructor(e,t,a){super(e,t),this.boss=a,this.sprite=this.scene.add.sprite(0,0,"enemy/"+t.key),this.sprite.setScale(1),t.y&&(this.sprite.y=t.y),this.add(this.sprite),this.nameLabel=this.scene.add.text(0,-157,a?t.name:`${t.name} Lv ${this.lv}`,{fill:s.default.COLORS.gray.toColorString,stroke:s.default.COLORS.dark.toColorString,strokeThickness:2,fontSize:12,fontStyle:"bold",fontFamily:s.default.FONTS.TEXT}).setOrigin(.5,1),this.add(this.nameLabel),a||(this.hpMaxLabel=this.scene.add.text(0,-134,"/"+this.maxHp,{fill:s.default.COLORS.soy.toColorString,stroke:s.default.COLORS.dark.toColorString,strokeThickness:2,fontSize:12,fontStyle:"bold",fontFamily:s.default.FONTS.UI}).setOrigin(0,1),this.add(this.hpMaxLabel),this.hpValueLabel=this.scene.add.text(0,-133,this.hp,{fill:s.default.COLORS.soy.toColorString,stroke:s.default.COLORS.dark.toColorString,strokeThickness:2,fontSize:17,fontStyle:"bold",fontFamily:s.default.FONTS.UI}).setOrigin(1,1),this.add(this.hpValueLabel),this.gauge=new r.default(this.scene,100,7,{valueMax:this.hp,color:15632401,blood:!0}).setPosition(0,-130),this.add(this.gauge))}get hp(){return this._hp}set hp(e){this._hp=Math.fix(e,0,this.maxHp),this.gauge&&(this.gauge.value=this.hp,this.hpMaxLabel.setText("/"+this.maxHp),this.hpValueLabel.setText(this.hp))}attackAnim(){return new Promise(e=>{this.scene.add.tween({targets:this.sprite,duration:40,ease:"Power2",yoyo:!0,y:this.sprite.y-10,onComplete:()=>{this.scene.add.tween({targets:this.sprite,duration:60,ease:"Power2",yoyo:!0,y:this.sprite.y+50,onComplete:e})}})})}die(){return this.scene.audio.se(this.boss?"die_boss":"die"),new Promise(e=>{this.sprite.setTint(16711680),this.scene.add.tween({targets:this.sprite,duration:300,ease:"Power2",scaleX:1.3,scaleY:1.3,alpha:.2,onComplete:()=>{this.destroy(),e()}})})}}t.default=i},1800:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Phaser.GameObjects.Container{constructor(e,t,a){super(e,0,0),this.scene=e,this.sprites=2..toArray().map(t=>{const a=e.add.sprite(0,0,"battle_effects");return a.blendMode=1,a}),this.add(this.sprites),this[a](t)}setFrame(e){return this.sprites.forEach(t=>t.setFrame(e)),this}hit(e=!1){this.setFrame(1),this.setScale(.5,.5);const t=e?1.7:1.2;this.scene.add.tween({targets:this,duration:120,scaleX:t,scaleY:t,alpha:.3,onComplete:()=>this.destroy()})}shot(e=!1){this.setFrame(0);const t=e?1.7:1.2;this.setScale(t,t),this.scene.add.tween({targets:this,duration:120,scaleX:.3,scaleY:.3,alpha:.3,onComplete:()=>this.destroy()})}slash(e=!1){this.setFrame(5);const t=e?1.5:1;this.setScale(t,t),this.setPosition(70,-70),this.scene.add.tween({targets:this,duration:120,rotation:-.5,x:-70,y:70,alpha:0,onComplete:()=>this.destroy()})}crash(e=!1){this.setFrame(2);const t=e?1.5:1;this.setScale(t,t),this.setPosition(10,-30),this.scene.add.tween({targets:this,duration:120,x:-10,y:30,alpha:0,onComplete:()=>this.destroy()})}scratch(e=!1){this.setFrame(4);const t=e?1.5:1;this.setScale(t,t),this.setPosition(40,-40),this.setRotation(.5),this.scene.add.tween({targets:this,duration:120,rotation:-.5,x:-40,y:40,alpha:0,onComplete:()=>this.destroy()})}stab(e=!1){this.setFrame(3);const t=e?1.5:1;this.setScale(t,t),this.setPosition(0,-100),this.scene.add.tween({targets:this,duration:120,scaleX:.2,scaleY:.1,y:100,alpha:0,onComplete:()=>this.destroy()})}}t.default=n},1801:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(752)),r=h(a(145)),s=h(a(77)),o=h(a(12)),i=h(a(313)),l=h(a(43));function h(e){return e&&e.__esModule?e:{default:e}}class c extends n.default{constructor(e,t){super(e,t),this.bgLight=this.scene.add.polygon(-5,-16,[[26,0],[104,40],[300,40],[282,130],[0,130]],o.default.COLORS.theme),this.bgLight.alpha=.7,this.bgLight.blendMode=1,this.add(this.bgLight),this.bg=new s.default(this.scene,0,0,300,90),this.add(this.bg),this.bg2=this.scene.add.polygon(-9,-20,[[26,0],[282,130],[0,130]],1118481),this.add(this.bg2),this.sprite=this.scene.add.sprite(-90,-60,this.key),this.sprite.setScale(.7).setOrigin(.5,0),this.add(this.sprite),this.sprite.setCrop(0,0,this.sprite.width,150),this.nameLabel=this.scene.add.text(-138,15,this.name,{fill:o.default.COLORS.theme.toColorString,stroke:o.default.COLORS.dark.toColorString,strokeThickness:2,fontSize:19,fontStyle:"bold",fontFamily:o.default.FONTS.UI}),this.add(this.nameLabel),this.lvLabel=this.scene.add.text(-36,38,"Lv "+this.lv,{fill:o.default.COLORS.gray.toColorString,stroke:o.default.COLORS.dark.toColorString,strokeThickness:2,fontSize:12,fontStyle:"bold",fontFamily:o.default.FONTS.UI}).setOrigin(0,1),this.add(this.lvLabel),this.hpLabel=this.scene.add.text(-36,-25,"HP",{fill:o.default.COLORS.soy.toColorString,stroke:o.default.COLORS.dark.toColorString,strokeThickness:2,fontSize:14,fontStyle:"bold",fontFamily:o.default.FONTS.UI}),this.add(this.hpLabel),this.hpMaxLabel=this.scene.add.text(125,-10,"/"+this.maxHp,{fill:o.default.COLORS.soy.toColorString,stroke:o.default.COLORS.dark.toColorString,strokeThickness:2,fontSize:16,fontStyle:"bold",fontFamily:o.default.FONTS.UI}).setOrigin(1,1),this.add(this.hpMaxLabel),this.hpValueLabel=this.scene.add.text(this.hpMaxLabel.x-this.hpMaxLabel.width,-9,this.hp,{fill:o.default.COLORS.soy.toColorString,stroke:o.default.COLORS.dark.toColorString,strokeThickness:2,fontSize:21,fontStyle:"bold",fontFamily:o.default.FONTS.UI}).setOrigin(1,1),this.add(this.hpValueLabel),this.gauge=new r.default(this.scene,160,10,{valueMax:this.maxHp,color:o.default.COLORS.theme,blood:!0}).setPosition(45,-3),this.gauge.value=this.hp,this.add(this.gauge),this.setWeapon();const a=this.weapon&&this.weapon.ability?22:0;this.weaponLabel=this.scene.add.container(124,37).setSize(360,45);const n=this.scene.add.text(-a,0,this.weapon?this.weapon.name:"-",{fill:o.default.COLORS.gray.toColorString,stroke:o.default.COLORS.dark.toColorString,strokeThickness:2,fontSize:10,fontFamily:o.default.FONTS.TEXT}).setOrigin(1,1);if(this.weaponLabel.add(n),this.weapon){const e=this.scene.add.sprite(-n.width-a,2,"icon/"+this.weapon.icon).setScale(.18).setOrigin(1,1).setTint(o.default.COLORS.gray);if(this.weaponLabel.add(e),this.weapon.ability){const e=this.scene.add.sprite(0,1,"weapon_abilities").setFrame(this.weapon.ability-1).setOrigin(1,1);this.weaponLabel.add(e)}}this.add(this.weaponLabel)}get hp(){return this.source.hp}set hp(e){this.source.hp=Math.fix(e,0,this.maxHp),this.gauge&&(this.gauge.value=this.hp,this.hpMaxLabel.setText("/"+this.maxHp),this.hpValueLabel.setText(this.hp))}get hitSE(){return"hit"}setWeapon(){const e=l.default.state.weapons.find(e=>e.id===this.source.weapon);this.weapon=e?i.default.find(t=>t.id===e.weapon_id):null,this.weapon&&(["atk","def","dex","agi"].filter(e=>this.weapon[e]).forEach(e=>{this[e]+=this.weapon[e]}),this.effect=this.weapon.effect)}die(){return this.scene.audio.se("die"),new Promise(e=>{this.sprite.setTint(5592405),e()})}setActive(e){super.setActive(e),this.bg2&&(this.bg2.visible=e),this.bgLight&&(this.bgLight.visible=e,this.bgLight.setPosition(0,-21).setAlpha(0),this.scene.add.tween({targets:this.bgLight,duration:300,ease:"Power2",x:-5,y:-16,alpha:1}))}}t.default=c},1802:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(12)),r=c(a(77)),s=c(a(754)),o=c(a(1803)),i=c(a(43)),l=c(a(755)),h=a(47);function c(e){return e&&e.__esModule?e:{default:e}}class d extends Phaser.GameObjects.Container{constructor(t,a,{boss:s=!1}={},l){super(t),t.add.existing(this),this.scene=t,this.group=a,this.boss=s,this.callback=l,t.audio.se("result");const c=new r.default(this.scene,-110,0,480,n.default.HEIGHT).setOrigin(0,0);this.add(c);const d=t.add.text(20,15,"Result",{align:"center",fill:n.default.COLORS.theme.toColorString,fontSize:21,fontStyle:"bold",fontFamily:n.default.FONTS.UI}),u=t.add.text(20,41,e("ui.sub.battleResult"),{align:"center",fill:n.default.COLORS.gray.toColorString,fontSize:10,fontStyle:"bold",fontFamily:n.default.FONTS.TEXT});this.add([d,u]);const m=t.add.text(30,75,"Experience",{align:"center",fill:n.default.COLORS.white.toColorString,fontSize:16,fontFamily:n.default.FONTS.UI});this.add([m]),this.charas=i.default.state.battlers.map((e,t)=>this.getChara(e,125,110+52*t)),this.add(this.charas),(0,h.slideIn)(this.scene,this.charas);const g=this.dropWeapons();if(g.length){const a=t.add.text(30,275,"Items",{align:"center",fill:n.default.COLORS.white.toColorString,fontSize:16,fontFamily:n.default.FONTS.UI});this.add([a]);const r=g.map((t,a)=>this.getRow(35,305+20*a,e("weaponDrop",t.name)));this.add(r),(0,h.slideIn)(this.scene,r)}const p=new o.default(this.group).getResult();if(p.length){const e=g.length?305+20*g.length+15:275,a=t.add.text(30,e,"Quest",{align:"center",fill:n.default.COLORS.white.toColorString,fontSize:16,fontFamily:n.default.FONTS.UI});this.add([a]);const r=p.map((t,a)=>this.getRow(35,e+30+20*a,t));this.add(r),(0,h.slideIn)(this.scene,r)}(0,h.slideIn)(this.scene,this,{x:-100}).then(()=>{this.increaceExp().then(()=>{this.scene.mapInfo&&this.scene.mapInfo.reload(),setTimeout(()=>{(0,h.slideOut)(this.scene,this,{x:-100,destroy:!1}).then(()=>{this.scene.battlerSummary.show(),this.callback(),this.destroy()})},1800)}),i.default.state.battlers.filter(e=>e.hp<=0).forEach(e=>e.hp+=1)})}getChara(e,t,a){const r=this.scene.add.container(t,a);r.source=e;const o=this.scene.add.sprite(-78,0,e.key).setScale(.25).setOrigin(.5,0);o.setCrop(0,0,o.width,150);const i=this.scene.add.text(-53,0,e.name,{fill:n.default.COLORS.theme.toColorString,stroke:n.default.COLORS.dark.toColorString,strokeThickness:2,fontSize:15,fontStyle:"bold",fontFamily:n.default.FONTS.UI}),l=this.scene.add.text(130,15,"Lv "+e.lv,{fill:n.default.COLORS.theme.toColorString,stroke:n.default.COLORS.dark.toColorString,strokeThickness:2,fontSize:14,fontStyle:"bold",fontFamily:n.default.FONTS.UI,align:"right"}).setOrigin(1,.5),h=new s.default(this.scene,38,38,180,e.lv,e.exp);return r.lvUp=e=>{l.text="Lv "+e,this.scene.add.tween({targets:l,duration:100,ease:"Power2",scale:1.3,yoyo:!0})},r.gauge=h,r.add([o,h,i,l]),e.hp<=0&&r.list.forEach(e=>e.setAlpha(.4)),r}expAdjustment(e,t){const a=e-t;if(a>0)return 1;const n=.25*(Math.abs(a)+1);return Math.max(.15,1-n)}increaceExp(){const e=i.default.state.battlers.filter(e=>e.hp>0),t=Math.average(...this.group.map(e=>e.lv)),a=(this.boss?12*t:Math.sum(...this.group.map(e=>e.lv*Math.max(4-.6*Math.max(this.group.length,4),1))))/e.length,n=e.map(e=>{const n=Math.ceil(a*this.expAdjustment(t,e.lv));return e.exp+=n,this.levelUp(e),new Promise(t=>{const a=this.charas.find(t=>t.source===e);a.gauge.addExp(n),a.gauge.on("lvUp",a.lvUp),a.gauge.on("completed",t)})});return Promise.all(n)}levelUp(e){const t=l.default[e.lv];t&&e.exp>=t&&(this.scene.audio.se("lvup"),e.lv++,Object.keys(e.up).filter(t=>Math.chance(e.up[t])).forEach(t=>{"hp"===t?(e.hp+=5,e.max_hp+=5):e[t]+=1}),this.levelUp(e))}dropWeapons(){return this.group.map(e=>!!e.dropWeapon&&(!!Math.chance(e.dropWeapon.chance)&&this.scene.increaseWeapon(e.dropWeapon.id,!1))).filter(e=>e)}getRow(e,t,a){return this.scene.add.text(e,t,a,{fill:n.default.COLORS.theme.toColorString,fontSize:12,fontFamily:n.default.FONTS.TEXT})}}t.default=d}).call(this,a(3).default)},1803:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(43),s=(n=r)&&n.__esModule?n:{default:n},o=a(149),i=a(150),l=a(197),h=a(198);const c=(e,t,a=100)=>e.filter(e=>e.key===t&&Math.chance(a)).length,d=[(t,a)=>{if(a.m1_3.completed||!a.m1_3.started)return;const n=c(t,"mandrake",75);return n?(a.m1_3.count+=n,`${e("itemDrop.mandrake",n)}${a.m1_3.count}/${o.MANDRAKE_COUNT}`):void 0},(t,a)=>{if(a.m2_2.completed||!a.m2_2.started)return;const n=c(t,"carbuncle",75);return n?(a.m2_2.count+=n,`${e("itemDrop.magicStone",n)}${a.m2_2.count}/${i.MAGIC_STONES}`):void 0},(t,a)=>{if(a.m3_2.completed||!a.m3_2.started)return;const n=c(t,"phantom",85);return n?(a.m3_2.count+=n,`${e("itemDrop.water",n)}${a.m3_2.count}/${l.WATER_COUNT}`):void 0},(t,a)=>{if(a.m3_3.completed||!a.m3_3.started)return;return c(t,"jack",100)?e("itemDrop.dagger"):void 0},(t,a)=>{if(a.m4_2.completed||!a.m4_2.started)return;const n=c(t,"bird",75);return n?(a.m4_2.count+=n,`${e("itemDrop.kelunne",n)}${a.m4_2.count}/${h.KELUNNE_COUNT}`):void 0}];t.default=class{constructor(e){this.group=e}getResult(){return d.map(e=>e(this.group,s.default.state.event)).filter(Boolean)}}}).call(this,a(3).default)},1804:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(12)),r=c(a(1805)),s=c(a(1808)),o=c(a(740)),i=c(a(741)),l=a(47),h=c(a(742));function c(e){return e&&e.__esModule?e:{default:e}}const d=[{Class:r.default,name:"QUESTS",min:e("ui.sub.quests"),size:52,frame:0},{Class:s.default,name:"CHARACTERS",min:e("ui.sub.characters"),size:52,frame:1},{Class:o.default,name:"SAVE",min:e("ui.sub.save"),size:52,frame:2},{Class:i.default,name:"SETTINGS",min:e("ui.sub.settings"),size:42,frame:3}];class u extends Phaser.GameObjects.Container{constructor(e,t){super(e),this.scene=e,this.callback=t,e.add.existing(this),this.bg=e.add.rectangle(0,0,n.default.WIDTH,n.default.HEIGHT,8939076,.2).setOrigin(0,0),this.bg.blendMode=1,this.window=e.add.polygon(0,0,[[0,0],[50..byRight,0],[150..byRight,(0).byBottom],[0,(0).byBottom]],n.default.COLORS.dark,.7).setOrigin(0,0),this.add([this.bg,this.window]),this.buttons=d.map((e,t)=>{const a=d.slice(0,t).reduce((e,t)=>e+2*t.size+10,15)+e.size,n=Math.max(...d.map(e=>e.size))+15;return this.button(e,n.byRight,a)}),this.add(this.buttons),this.close=new h.default(e,70..byRight,35..byBottom).on("click",this.destroy.bind(this,!0)),this.add(this.close),this.scene.gameScene.blur(!0),e.scene.pause("Game"),this.loadContent(d[0]),(0,l.fadeIn)(e,this.bg),(0,l.slideIn)(e,[...this.buttons,this.close],{x:100}),(0,l.slideIn)(e,[this.window,this.content],{x:-100})}destroy(e=!1,t=null){if(this.scene.gameScene.blur(!1),"backToTitle"!==t&&this.scene.scene.resume("Game"),this.callback(t),!e)return super.destroy();(0,l.fadeOut)(this.scene,this.bg),(0,l.slideOut)(this.scene,[...this.buttons,this.close],{x:100}),(0,l.slideOut)(this.scene,[this.content,this.window],{x:-100}).then(()=>{super.destroy()})}button(e,t,a){const r=this.scene.add.container(t,a).setSize(104,104),s=this.scene.add.circle(0,0,e.size,n.default.COLORS.black),o=this.scene.add.sprite(0,-8,"menu_icons").setOrigin(.5,.5).setTint(n.default.COLORS.ghost).setFrame(e.frame),i=this.scene.add.text(0,e.size-24,e.name,{align:"center",fill:n.default.COLORS.theme.toColorString,stroke:n.default.COLORS.dark.toColorString,strokeThickness:4,fontSize:17,fontStyle:"bold",fontFamily:n.default.FONTS.UI}).setOrigin(.5,1).setPadding(0,2,0,0),l=this.scene.add.text(0,e.size-28,e.min,{align:"center",fill:n.default.COLORS.gray.toColorString,fontSize:9,fontStyle:"bold",fontFamily:n.default.FONTS.TEXT}).setOrigin(.5,0).setPadding(0,2,0,0);return r.add([s,o,i,l]),r.setInteractive().on("pointerdown",()=>{this.scene.audio.se("click"),this.loadContent(e)}),r}loadContent(e){this.content instanceof e.Class||(this.content&&this.content.destroy(),this.content=new e.Class(this.scene),this.content.on("close",this.destroy.bind(this,!1)),this.content.on("loadData",e=>{this.scene.storage.load(e.number).then(()=>{this.scene.gameScene.mapChange(e.state.map,e.state.x,e.state.y,{save:!1}).then(()=>{this.destroy(!1)})})}),this.content.on("backToTitle",e=>{this.destroy(!0,"backToTitle")}),this.add(this.content),this.buttons.forEach(e=>this.moveTo(e,this.length-1)))}}t.default=u}).call(this,a(3).default)},1805:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(12)),r=m(a(194)),s=m(a(310)),o=m(a(756)),i=m(a(77)),l=m(a(757)),h=m(a(1806)),c=a(47),d=m(a(43)),u=m(a(1807));function m(e){return e&&e.__esModule?e:{default:e}}const g=.25*n.default.TILE_SIZE;class p extends Phaser.GameObjects.Container{constructor(t){super(t),this.scene=t;const a=t.add.rectangle(0,0,n.default.WIDTH-120,n.default.HEIGHT).setOrigin(0,0).setInteractive().on("pointerup",e=>{e.downX===e.upX&&e.downY===e.upY&&this.detail&&this.setMissionDetail(null),this.lastX=null,this.lastY=null}).on("pointerout",e=>{this.lastX=null,this.lastY=null}).on("pointermove",e=>{e.isDown&&this.map&&("number"==typeof this.lastX&&"number"==typeof this.lastY&&(this.map.x+=e.x-this.lastX,this.map.y+=e.y-this.lastY),this.lastX=e.x,this.lastY=e.y)});this.add(a);const r=t.add.text(20,15,"MAP & QUESTS",{align:"center",fill:n.default.COLORS.theme.toColorString,fontSize:21,fontStyle:"bold",fontFamily:n.default.FONTS.UI}),s=t.add.text(20,41,e("ui.sub.quests"),{align:"center",fill:n.default.COLORS.gray.toColorString,fontSize:10,fontStyle:"bold",fontFamily:n.default.FONTS.TEXT});this.add([r,s]),this.setMap(this.scene.storage.state.map),this.setChapter(this.scene.storage.state.chapter)}setChapter(e){this.chapter=e,this.chapterLabel&&this.chapterLabel.destroy(),this.chapterLabel=this.getChapter(this.chapter,30,100),this.add(this.chapterLabel),this.missionLabels&&this.missionLabels.forEach(e=>e.destroy()),this.missionLabels=s.default.filter(e=>e.chapter===this.chapter).map((e,t)=>this.getMission(e,165,160+40*t)),(0,c.slideIn)(this.scene,this.missionLabels),this.add(this.missionLabels),this.pager||(this.pager=new l.default(this.scene,30,500,270).on("prev",this.moveChapter.bind(this,-1)).on("next",this.moveChapter.bind(this,1)),this.add(this.pager)),this.pager.set(this.hasPrevious,this.hasNext),this.setMissionDetail(null)}moveChapter(e){![-1,1].includes(e)||-1===e&&!this.hasPrevious||1===e&&!this.hasNext||this.setChapter(this.chapter+e)}get hasPrevious(){return this.chapter>0}get hasNext(){return this.chapter<this.scene.storage.state.chapter}getChapter(e,t,a){const s=r.default[e],o=this.scene.add.container(t,a),i=s.sub,l=this.scene.add.text(0,0,s.name,{fontSize:i?17:14,fontStyle:"bold",fontFamily:n.default.FONTS.TEXT}).setOrigin(0,0),h=this.scene.add.text(Math.max(l.width+7,50),i?-3:0,s.title,{fontSize:14,fontStyle:"bold",fontFamily:n.default.FONTS.TEXT}).setOrigin(0,0);if(o.add([l,h]),i){const e=this.scene.add.text(50,15,s.sub,{fill:n.default.COLORS.gray.toColorString,fontSize:10,fontFamily:n.default.FONTS.UI}).setOrigin(0,0);o.add(e)}return o}getMission(e,t,a){const r=d.default.state.event[e.key],s=this.scene.add.container(t,a).setSize(295,32),o=new i.default(this.scene,0,0,295,32);s.setInteractive().on("pointerdown",()=>{r.started&&(this.scene.audio.se("click"),this.setMissionDetail(e))});const l=r.started?n.default.COLORS.white.toColorString:n.default.COLORS.ghost.toColorString,h=this.scene.add.text(-127,0,r.started?e.title:"",{fontSize:14,fontStyle:"bold",fontFamily:n.default.FONTS.TEXT}).setOrigin(0,.5),c=this.scene.add.sprite(120,0,"check").setTint(n.default.COLORS[r.completed?"theme":"ghost"]).setFrame(Number(r.completed));return s.add([o,h,c]),s.key=e.key,s.setActive=e=>h.setFill(e?n.default.COLORS.theme.toColorString:l),s}setMissionDetail(e){if(this.detail&&this.detail.destroy(),!e)return this.setMap(this.scene.storage.state.map,this.scene.storage.state.x,this.scene.storage.state.y),void this.missionLabels.forEach(e=>e.setActive(!1));this.detail=this.getMissionDetail(e,330,400),this.add(this.detail),this.setMap(e.map.key,e.map.x.toPixel,e.map.y.toPixel),this.missionLabels.forEach(t=>t.setActive(t.key===e.key))}getMissionDetail(e,t,a){const r=this.scene.add.container(t,a),s=this.scene.add.text(0,0,e.title,{fontSize:15,fontStyle:"bold",fontFamily:n.default.FONTS.TEXT}).setOrigin(0,0),o=u.default[e.key]?u.default[e.key](d.default.state):"-",i=this.scene.add.text(0,30,o,{fill:n.default.COLORS.gray.toColorString,fontSize:13,fontStyle:"bold",fontFamily:n.default.FONTS.TEXT,wordWrap:{width:480,useAdvancedWrap:!0}}).setOrigin(0,0);return i.setLineSpacing(10),r.add([s,i]),r}setMap(e,t=0,a=0){const r=t=>t.key===e,s=o.default.find(e=>e.list.some(r));if(!s)return;const i=s.list.find(r),l=!this.map;(l||this.map.key!==s.key)&&(this.map&&this.map.destroy(),this.map=this.getMapImage(s.key),this.addAt(this.map,0));const h=n.default.WIDTH.half-i.x*this.map.scale*g-.25*t,c=n.default.HEIGHT.half-i.y*this.map.scale*g-.25*a;l&&this.map.setPosition(h,c),this.scene.add.tween({targets:this.map,duration:200,ease:"Power2",x:h,y:c})}getMapImage(e){return this.mask||(this.mask=this.scene.make.graphics().fillRect(0,-180,895,720).setRotation(.18).createGeometryMask()),new h.default(this.scene,e).setMask(this.mask)}}t.default=p}).call(this,a(3).default)},1806:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(756)),r=s(a(12));function s(e){return e&&e.__esModule?e:{default:e}}const o=.25*r.default.TILE_SIZE;class i extends Phaser.GameObjects.Container{constructor(e,t){super(e),this.key=t;const a=e.storage.state,r=n.default.find(e=>e.key===t),s=r.list.filter(e=>a.visited.includes(e.key)).map(t=>{const a=t.x*o,n=t.y*o;return e.add.sprite(a,n,"map_image/"+t.key).setOrigin(0,0).setAlpha(.4)});this.add(s);const i=r.list.find(e=>e.key===a.map);if(i){const t=i.x*o+.25*a.x,n=i.y*o+.25*a.y,r=e.add.sprite(t,n,"marker").setScale(.5,.5).setOrigin(.5,1);this.add(r)}}}t.default=i},1807:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a(149),r=a(150),s=a(197),o=a(198),i=a(199);t.default={m0_1(t){const a=e("missionDescription.m0_1.base"),n=e("missionDescription.m0_1.first"),r=e("missionDescription.m0_1.second");return t.event.m0_1.completed?a:0===t.allowed_area?`${a}\n${n}`:`${a}\n${r}`},m1_1(t){const a=e("missionDescription.m1_1.base"),n=["d1","d2","d3","d4","d5"].filter(e=>t.event.m1_1[e]).length,r=e("missionDescription.m1_1.cnt",{current:n});return t.event.m1_1.completed?a:`${a}\n${r}`},m1_2(t){const a=e("missionDescription.m1_2.base");if(t.event.m1_2.completed)return a;const n=e("missionDescription.m1_2.started"),r=e("missionDescription.m1_2.solved");return t.event.m1_2.solved?`${a}\n${r}`:`${a}\n${n}`},m1_3(t){const a=e("missionDescription.m1_3.base"),r=e("missionDescription.m1_3.cnt",{current:t.event.m1_3.count,max:n.MANDRAKE_COUNT});return t.event.m1_3.completed?a:`${a}\n${r}`},m1_4(t){const a=e("missionDescription.m1_4.base"),n=e("missionDescription.m1_4.bear"),r=e("missionDescription.m1_4.solved");return t.event.m1_4.completed?a:`${a}\n${t.event.m1_4.solved?r:n}`},m2_1(t){const a=e("missionDescription.m2_1.base"),n=e("missionDescription.m2_1.wip"),r=e("missionDescription.m2_1.cnt",{current:t.event.m2_1.wine.length});return t.event.m2_1.completed?a:`${a}\n${n}\n${r}`},m2_2(t){const a=e("missionDescription.m2_2.base"),n=e("missionDescription.m2_2.cnt",{current:t.event.m2_2.count,max:r.MAGIC_STONES});return t.event.m2_2.completed?a:`${a}\n${n}`},m2_3(t){const a=e("missionDescription.m2_3.base"),n=e("missionDescription.m2_3.wip"),r=e("missionDescription.m2_3.solved");return t.event.m2_3.completed?a:`${a}\n${t.event.m2_3.solved?r:n}`},m2_4(t){const a=e("missionDescription.m2_4.base"),n=e("missionDescription.m2_4.search"),r=e("missionDescription.m2_4.solved");return t.event.m2_4.completed?a:t.event.m2_4.solved?`${a}\n${r}`:t.event.m2_4.search?`${a}\n${n}`:a},m3_1(t){const a=e("missionDescription.m3_1.base"),n=e("missionDescription.m3_1.started"),r=e("missionDescription.m3_1.solved"),s=e("missionDescription.m3_1.completed");return t.event.m3_1.completed?`${a}\n${s}`:t.event.m3_2.completed?`${a}\n${r}`:`${a}\n${n}`},m3_2(t){const a=e("missionDescription.m3_2.base"),n=e("missionDescription.m3_2.started"),r=e("missionDescription.m3_2.cnt",{current:t.event.m3_2.count,max:s.WATER_COUNT});return t.event.m3_2.completed?a:`${a}\n${n}\n${r}`},m3_3(t){const a=e("missionDescription.m3_3.base"),n=e("missionDescription.m3_3.started"),r=e("missionDescription.m3_3.solved");return t.event.m3_3.completed?a:t.event.m3_3.solved?`${a}\n${r}`:`${a}\n${n}`},m3_4(t){const a=e("missionDescription.m3_4.base"),n=e("missionDescription.m3_4.started"),r=e("missionDescription.m3_4.cnt",{current:t.event.m3_4.ghosts.length});return t.event.m3_4.completed?a:`${a}\n${n}\n${r}`},m3_5(t){const a=e("missionDescription.m3_5.base"),n=e("missionDescription.m3_5.started");return t.event.m3_5.completed?a:`${a}\n${n}`},m4_1(t){const a=e("missionDescription.m4_1.base"),n=e("missionDescription.m4_1.started");return t.event.m4_1.completed?a:`${a}\n${n}`},m4_2(t){const a=e("missionDescription.m4_2.base"),n=e("missionDescription.m4_2.started"),r=e("missionDescription.m4_2.cnt",{current:t.event.m4_2.count,max:o.KELUNNE_COUNT});return t.event.m4_2.completed?a:`${a}\n${n}\n${r}`},m4_3(t){const a=e("missionDescription.m4_3.base"),n=e("missionDescription.m4_3.started"),r=e("missionDescription.m4_3.talked");return t.event.m4_3.completed?a:t.event.m4_3.talked?`${a}\n${r}`:`${a}\n${n}`},m4_4(t){const a=e("missionDescription.m4_4.base"),n=e("missionDescription.m4_4.started"),r=e("missionDescription.m4_4.cnt",{current:t.event.m4_4.apples.length,max:i.APPLES_COUNT});return t.event.m4_4.completed?a:`${a}\n${n}\n${r}`},m4_5(t){const a=e("missionDescription.m4_5.base"),n=e("missionDescription.m4_5.started");return t.event.m4_5.completed?a:`${a}\n${n}`},m5_1:t=>`${e("missionDescription.m5_1.base")}\n${e("missionDescription.m5_1.started")}`}}).call(this,a(3).default)},1808:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=u(a(12)),r=u(a(77)),s=u(a(145)),o=u(a(754)),i=u(a(757)),l=u(a(313)),h=a(47),c=u(a(43)),d=u(a(753));function u(e){return e&&e.__esModule?e:{default:e}}class m extends Phaser.GameObjects.Container{constructor(t){super(t),this.scene=t;const a=t.add.text(20,15,"CHARACTERS",{align:"center",fill:n.default.COLORS.theme.toColorString,fontSize:21,fontStyle:"bold",fontFamily:n.default.FONTS.UI}),r=t.add.text(20,41,e("ui.sub.characters"),{align:"center",fill:n.default.COLORS.gray.toColorString,fontSize:10,fontStyle:"bold",fontFamily:n.default.FONTS.TEXT});this.add([a,r]);const s=t.storage.state.battlers;this.tabs=s.map((e,t)=>this.getTabItem(e,380+145*t,60..byBottom)),(0,h.slideIn)(this.scene,this.tabs,{x:-100}),this.add(this.tabs),this.page=this.pageMax,this.setWeaponList(!0),this.setCharacter(s[0]),this.add(this.getExplanation(750,30))}getExplanation(e,t){const a=this.scene.add.container(e,t),r=Object.keys(d.default).map(e=>d.default[e]).reduce((e,t,r)=>{const s=this.scene.add.sprite(e,0,"weapon_abilities").setOrigin(0,0).setScale(.7).setFrame(r);e+=s.width;const o=this.scene.add.text(e,0,t.label,{align:"right",fill:n.default.COLORS.gray.toColorString,fontSize:10,fontStyle:"bold",fontFamily:n.default.FONTS.UI}).setOrigin(0,0);return e+=o.width+15,a.add([s,o]),e},0);return a.x-=r,a}get availableWeapons(){const e=c.default.state.battlers.map(e=>e.weapon).filter(e=>e);return c.default.state.weapons.filter(t=>!e.includes(t.id))}get weaponGroup(){const e=[];this.availableWeapons.forEach(t=>{e.includes(t.weapon_id)||e.push(t.weapon_id)}),e.sort((e,t)=>e-t);return e.map(e=>{const t=l.default.find(t=>t.id===e),a=this.availableWeapons.filter(t=>t.weapon_id===e).length;return Object.assign({count:a},t)})}get pageMax(){return Math.ceil(this.weaponGroup.length/7)}setWeaponList(e){this.page=Math.fix(this.page,1,this.pageMax),this.weapons&&this.weapons.destroy(),this.weapons=this.scene.add.container(560,135);const t=7*(this.page-1);this.weapons.add(this.weaponGroup.slice(t,t+7).map((e,t)=>this.getWeapon(e,0,40*t))),this.add(this.weapons),e&&(0,h.slideIn)(this.scene,this.weapons.list,{x:-100}),this.pager||(this.pager=new i.default(this.scene,380,425,360).on("prev",this.movePage.bind(this,-1)).on("next",this.movePage.bind(this,1)),this.add(this.pager)),this.pager.set(this.page>1,this.page<this.pageMax)}movePage(e){this.page+=e,this.setWeaponList(!0)}setCharacter(e){if(this.chara){if(this.chara.battler===e)return;(0,h.slideOut)(this.scene,[this.chara,this.currentWeapon],{x:-50})}this.tabs.forEach(t=>t.setActive(t.chara===e)),this.chara=this.getCharacter(e,210,30..byBottom),this.currentWeapon=this.getCurrentWeapon(this.chara.battler.weapon,560,75),this.add([this.chara,this.currentWeapon]),(0,h.slideIn)(this.scene,[this.chara,this.currentWeapon],{x:-50})}setWeapon(e){const t=this.availableWeapons.find(t=>t.weapon_id===e);this.chara.battler.weapon=t?t.id:null,this.currentWeapon.setSource(this.chara.battler.weapon),this.setWeaponList(!1)}getCharacter(e,t,a){const r=this.scene.add.container(t-50,a).setAlpha(0);r.battler=e;const i=this.scene.add.sprite(-10,-5,e.key).setOrigin(.5,1).setScale(.64,.64).setTint(0).setAlpha(.5),l=this.scene.add.sprite(0,0,e.key).setOrigin(.5,1).setScale(.64,.64);r.add([i,l]);const h=this.scene.add.container(-81,-158),c=this.scene.add.text(0,0,e.name,{fill:n.default.COLORS.theme.toColorString,stroke:n.default.COLORS.dark.toColorString,strokeThickness:3,fontSize:22,fontStyle:"bold",fontFamily:n.default.FONTS.UI}),d=this.scene.add.text(25+9*e.name.length,7,"Lv "+e.lv,{fill:n.default.COLORS.theme.toColorString,stroke:n.default.COLORS.dark.toColorString,strokeThickness:2,fontSize:14,fontStyle:"bold",fontFamily:n.default.FONTS.UI}),u=this.scene.add.text(0,40,"HP",{fill:n.default.COLORS.soy.toColorString,stroke:n.default.COLORS.dark.toColorString,strokeThickness:2,fontSize:11,fontStyle:"bold",fontFamily:n.default.FONTS.UI}),m=this.scene.add.text(162,55,"/"+e.max_hp,{fill:n.default.COLORS.soy.toColorString,stroke:n.default.COLORS.dark.toColorString,strokeThickness:2,fontSize:15,fontStyle:"bold",fontFamily:n.default.FONTS.UI}).setOrigin(1,1),g=this.scene.add.text(m.x-m.width,56,e.hp,{fill:n.default.COLORS.soy.toColorString,stroke:n.default.COLORS.dark.toColorString,strokeThickness:2,fontSize:19,fontStyle:"bold",fontFamily:n.default.FONTS.UI}).setOrigin(1,1),p=new s.default(this.scene,160,10,{valueMax:e.max_hp,color:n.default.COLORS.theme}).setPosition(81,62),y=new o.default(this.scene,81,95,160,e.lv,e.exp),f={fill:n.default.COLORS.soy.toColorString,stroke:n.default.COLORS.dark.toColorString,strokeThickness:2,fontSize:15,fontStyle:"bold",fontFamily:n.default.FONTS.UI},w=[this.scene.add.text(0,110,"ATK",f),this.scene.add.text(70,110,e.atk,f).setOrigin(1,0),this.scene.add.text(0,132,"DEF",f),this.scene.add.text(70,132,e.def,f).setOrigin(1,0),this.scene.add.text(92,110,"DEX",f),this.scene.add.text(162,110,e.dex,f).setOrigin(1,0),this.scene.add.text(92,132,"AGI",f),this.scene.add.text(162,132,e.agi,f).setOrigin(1,0)];return p.value=e.hp,h.add([c,d,u,m,g,p,y,...w]),r.add(h),r}getTabItem(e,t,a){const s=this.scene.add.container(t,a).setSize(140,45);s.chara=e;const o=new r.default(this.scene,0,0,140,45),i=this.scene.add.sprite(-76,-16,e.key).setScale(.25).setOrigin(0,0);i.setCrop(0,0,i.width,150);const l=this.scene.add.text(52,18,e.name,{fontSize:14,fontStyle:"bold",fontFamily:n.default.FONTS.UI}).setOrigin(1,1);return s.setActive=e=>l.setFill(n.default.COLORS[e?"theme":"white"].toColorString),s.setInteractive().on("pointerdown",()=>{this.scene.audio.se("click"),this.setCharacter(e)}),s.add([o,i,l]),s}idToWeaponData(e){if(!e)return null;const t=c.default.state.weapons.find(t=>t.id===e);return l.default.find(e=>e.id===t.weapon_id)}getCurrentWeapon(e,t,a){const s=this.scene.add.container(t,a).setSize(360,45),o=new r.default(this.scene,0,0,360,40).setOrigin(.5,.5),i=this.scene.add.sprite(-168,0).setScale(.22).setOrigin(0,.5).setTint(n.default.COLORS.ghost),l=this.scene.add.text(-138,0,null,{fontSize:15,fontStyle:"bold",fontFamily:n.default.FONTS.TEXT}).setOrigin(0,.5),h=this.scene.add.text(137,0,null,{fontSize:13,fontStyle:"bold",fontFamily:n.default.FONTS.UI,fill:n.default.COLORS.gray.toColorString}).setOrigin(1,.5),c=this.scene.add.sprite(165,0,"weapon_abilities").setOrigin(1,.5),d=this.scene.add.line(-177,0,0,0,40,0,n.default.COLORS.white).setOrigin(1,0).setLineWidth(.5).setAlpha(.5),u=this.scene.add.line(-192,1,0,0,-25,120,n.default.COLORS.white).setOrigin(1,0).setLineWidth(.5).setAlpha(.5),m=this.scene.add.line(-242,121,0,0,80,0,n.default.COLORS.white).setOrigin(1,0).setLineWidth(.5).setAlpha(.5),g=this.scene.add.circle(-322,123,2,n.default.COLORS.white).setOrigin(.5,.5);return s.setInteractive().on("pointerdown",()=>{this.scene.audio.se("click"),this.setWeapon(null)}),s.setSource=e=>{const t=this.idToWeaponData(e);i.setVisible(Boolean(t)),c.setVisible(Boolean(t)),l.text=t?t.name:"-",h.text=t?this.getStatusText(t):null,t&&(i.setTexture("icon/"+t.icon),c.setFrame(Math.max(t.ability-1,0)).setVisible(null!==t.ability))},s.setSource(e),s.add([o,i,l,h,c,d,u,m,g]),s}getStatusText(e){return["atk","def","dex","agi"].filter(t=>e[t]).map(t=>`${t.toUpperCase()}: ${e[t]}`).join("   ")}getWeapon(e,t,a){const s=this.scene.add.container(t,a).setSize(360,45),o=new r.default(this.scene,0,0,360,32).setOrigin(.5,.5),i=this.scene.add.sprite(-168,0,"icon/"+e.icon).setScale(.2).setOrigin(0,.5).setTint(n.default.COLORS.ghost),l=this.scene.add.text(-138,0,e.name,{fontSize:14,fontStyle:"bold",fontFamily:n.default.FONTS.TEXT}).setOrigin(0,.5),h=this.scene.add.text(137,0,this.getStatusText(e),{fontSize:12,fontFamily:n.default.FONTS.UI,fill:n.default.COLORS.gray.toColorString}).setOrigin(1,.5);if(s.add([o,i,l,h]),e.ability){const t=this.scene.add.sprite(165,0,"weapon_abilities").setFrame(e.ability-1).setOrigin(1,.5);s.add(t)}if(e.count>1){const t=this.scene.add.text(-133+l.width,0,"* "+e.count,{fontSize:11,fontFamily:n.default.FONTS.UI,fill:n.default.COLORS.gray.toColorString}).setOrigin(0,.5);s.add([t])}return s.setInteractive().on("pointerdown",()=>{this.scene.audio.se("click"),this.setWeapon(e.id)}),s}}t.default=m}).call(this,a(3).default)},1809:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=i(a(12)),r=i(a(77)),s=i(a(120)),o=a(47);function i(e){return e&&e.__esModule?e:{default:e}}const l=385,h=260,c=[{name:e("area.town"),x:960,y:545,key:"town1",mapX:2,mapY:20,r:"right"},{name:e("area.castle"),x:1020,y:390,key:"castle1",mapX:48,mapY:37,r:"up"},{name:e("area.forest"),x:320,y:240,key:"forest1",mapX:45,mapY:17,r:"left",label:"Warkano Forest"},{name:e("area.underpass"),x:1276,y:705,key:"underpass1",mapX:14,mapY:39,r:"up",label:"Troia's secret passage"},{name:e("area.catacomb"),x:995,y:915,key:"catacomb1",mapX:2,mapY:14,r:"right",label:"St Anterus' catacomb"},{name:e("area.temple"),x:1595,y:530,key:"temple1",mapX:2,mapY:13,r:"right",label:"Temple of Grefalde"}],d=.37,u=.75;class m extends Phaser.GameObjects.Container{constructor(e,t){super(e),this.scene=e,this.callback=t,this.scene.scene.pause("Game"),this.scene.add.existing(this),this.scene.transition("normal").then(()=>{this.init()}),this.scene.gameScene.player.stopWalk()}init(){this.originalVolume=this.scene.audio.sceneVolume,this.scene.audio.setSceneVolume(.3),this.map=this.scene.add.sprite(-20,-20,"world").setScale(d).setOrigin(0,0).setInteractive().on("pointerdown",()=>{this.setArea(null)}),this.add(this.map),this.pins={},c.forEach(e=>this.setPin(e,d,-20,-20)),this.rows=c.filter((e,t)=>this.scene.storage.state.allowed_area>=t).map((e,t,a)=>{const n=50..byBottom-40*(a.length-1),r=this.getMission(e,145,n+40*t);return this.add(r),r}),(0,o.slideIn)(this.scene,this.rows),this.setMarker(d,-20,-20),this.button=new s.default(this.scene,105..byRight,52..byBottom,"Cancel",140,40).setSeKey("cancel"),this.button.on("click",()=>{(0,o.slideOut)(this.scene,this.rows,{x:-200}),(0,o.slideOut)(this.scene,this.button),this.selected?this.onOk():this.onCancel()}),this.add(this.button)}onOk(){if(this.map.removeInteractive(),this.scene.storage.state.map===this.selected.key)return this.onCancel();const e={r:this.selected.r,informMapName:this.selected.label};this.scene.gameScene.mapChange(this.selected.key,this.selected.mapX.toPixelCenter,this.selected.mapY.toPixelCenter,e).then(()=>{this.destroy()})}onCancel(){this.map.removeInteractive(),this.scene.transition("normal").then(()=>{this.destroy()})}setMarker(e,t,a){const n=c.find(e=>e.key===this.scene.storage.state.map),r=(l+n.x)*e+t,s=(h+n.y)*e+a-3;if(!this.marker)return this.marker=this.scene.add.sprite(r,s,"world_cursor").setOrigin(.5,1).setScale(.5),this.marker.tween=this.scene.add.tween({targets:this.marker,duration:600,ease:"Power2",y:s+7,loop:-1,yoyo:!0}),void this.add(this.marker);this.marker.tween.remove();this.marker.moveTween&&this.marker.moveTween.remove(),this.marker.moveTween=this.scene.add.tween({targets:this.marker,duration:400,ease:"Power2",x:r,y:s,onComplete:()=>{this.marker.tween=this.scene.add.tween({targets:this.marker,duration:600,ease:"Power2",y:s+7,loop:-1,yoyo:!0})}})}setPin(e,t,a,n){const r=(l+e.x)*t+a,s=(h+e.y)*t+n;if(!this.pins[e.key]){const t=this.scene.add.sprite(r,s,"world_pin").setScale(.5);return this.add(t),void(this.pins[e.key]=t)}this.scene.add.tween({targets:this.pins[e.key],duration:400,ease:"Power2",x:r,y:s})}setArea(e){this.selected=e,this.button.setText(e?"OK":"Cancel").setSeKey(e?"click":"cancel");const t=e?n.default.WIDTH.half-(e.x+l)*u:-20,a=e?n.default.HEIGHT.half-(e.y+h)*u:-20,r=e?u:d;this.scene.add.tween({targets:this.map,duration:400,ease:"Power2",x:t,y:a,scale:r}),this.rows.forEach(t=>t.setActive(t.area===e)),c.forEach(n=>{this.pins[n.key].setFrame(n===e?1:0),this.setPin(n,e?u:d,t,a)}),this.setMarker(e?u:d,t,a)}getMission(e,t,a){const s=this.scene.add.container(t,a).setSize(240,32);s.area=e;const o=new r.default(this.scene,0,0,240,32);s.setInteractive().on("pointerdown",()=>{this.scene.audio.se("click"),this.setArea(e)});const i=this.scene.add.text(-90,0,e.name,{fontSize:14,fontStyle:"bold",fontFamily:n.default.FONTS.TEXT}).setOrigin(0,.5);return s.add([o,i]),s.setActive=e=>i.setFill(e?n.default.COLORS.theme.toColorString:n.default.COLORS.white.toColorString),s}destroy(){this.scene.audio.setSceneVolume(this.originalVolume),this.scene.scene.resume("Game"),this.callback(),super.destroy()}}t.default=m}).call(this,a(3).default)},1810:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(43)),r=o(a(1811)),s=a(47);function o(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e){this.scene=e,this.summaries=n.default.state.battlers.map((t,a)=>{const n=new r.default(e,100+140*a,34..byBottom+80,a);return n.alpha=0,e.add.existing(n),n}),this.delay=0}update(){this.delay>0&&(this.delay--,0===this.delay&&this.hide())}reload(){this.summaries.forEach(e=>e.reload())}resetPosition(){this.summaries.forEach(e=>e.y=34..byBottom)}show(){const e=this.delay>0;this.delay=160,this.reload(),e||(this.resetPosition(),(0,s.slideIn)(this.scene,this.summaries,{x:0,y:80}))}hide(){this.delay=0,this.resetPosition(),(0,s.slideOut)(this.scene,this.summaries,{x:0,y:80,destroy:!1})}setVisible(e){this.summaries.forEach(t=>t.setVisible(e))}}},1811:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(12)),r=o(a(77)),s=o(a(145));function o(e){return e&&e.__esModule?e:{default:e}}class i extends Phaser.GameObjects.Container{constructor(e,t,a,o){super(e,t,a),this.scene=e,this.battlerIndex=o;const i=e.storage.state.battlers[this.battlerIndex],l=new r.default(e,0,0,140,30),h=e.add.sprite(-48,-23,i.key).setScale(.25).setOrigin(.5,0);h.setCrop(0,0,h.width,150);const c=e.add.text(-23,4,i.name,{fontSize:11,fontStyle:"bold",fontFamily:n.default.FONTS.UI}).setOrigin(0,1);this.lv=null,this.gauge=new s.default(this.scene,78,5,{valueMax:i.max_hp,color:n.default.COLORS.theme}).setPosition(14,8),this.add([l,h,c,this.gauge]),this.reload()}reload(){const e=this.scene.storage.state.battlers[this.battlerIndex];this.gauge.valueMax=e.max_hp,this.gauge.value=e.hp,this.lv&&this.lv.destroy(),this.lv=this.scene.add.text(5.4*e.name.length-12,-8,"Lv "+e.lv,{fill:n.default.COLORS.theme.toColorString,fontSize:10,fontStyle:"bold",fontFamily:n.default.FONTS.UI}),this.add([this.lv])}}t.default=i},1812:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(47),s=a(12),o=(n=s)&&n.__esModule?n:{default:n};class i extends Phaser.GameObjects.Container{constructor(e,t,a=!1){super(e),this.scene=e,this.messages=t,this.waitToClick=a,e.add.existing(this),this.bg=e.add.rectangle(0,0,o.default.WIDTH,o.default.HEIGHT,1118481).setOrigin(0,0).setInteractive(),this.add(this.bg),t.filter(e=>"string"!=typeof e).forEach(e=>e.setAlpha(0)),this.tri=this.scene.add.triangle(25..byRight,20..byBottom,-5,-3,5,-3,0,4,o.default.COLORS.white).setAlpha(0),e.add.tween({targets:this.tri,duration:400,loop:-1,yoyo:!0,y:this.tri.y-4}),this.add(this.tri),this.exec()}async exec(){await(0,r.fadeIn)(this.scene,this.bg,{duration:1e3}),await this.sleep(1500),await this.execRow(),this.emit("beforeEnd"),await(0,r.fadeOut)(this.scene,this.bg,{duration:1e3}),this.destroy()}async execRow(e=0){const t=this.messages[e]instanceof String?this.scene.add.text(o.default.WIDTH.half,o.default.HEIGHT.half,this.messages[e],{align:"center",fill:o.default.COLORS.white.toColorString,fontSize:18,fontFamily:o.default.FONTS.TEXT}).setOrigin(.5,.5):this.messages[e];return this.add(t),await(0,r.fadeIn)(this.scene,t),this.waitToClick?await this.waitClick():await this.sleep(3e3),await(0,r.fadeOut)(this.scene,t),await this.sleep(700),e<this.messages.length-1?this.execRow(e+1):null}sleep(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}waitClick(){return this.tri.setAlpha(1),new Promise(e=>{const t=()=>{this.tri.setAlpha(0),this.bg.off("pointerdown",t),e()};this.bg.on("pointerdown",t)})}}t.default=i},1813:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(12),s=(n=r)&&n.__esModule?n:{default:n};class o extends Phaser.GameObjects.Container{constructor(e,t,a){super(e,t,a),this.scene=e,e.add.existing(this),this.stick=null,this.velocityX=0,this.velocityY=0;const n=this.scene.add.circle(0,0,80,s.default.COLORS.black,.5).setInteractive(),r=this.scene.add.circle(0,0,30,s.default.COLORS.white,.25);this.add([n,r]),n.on("pointerdown",e=>{this.stick=e}),e.input.on("pointermove",e=>{if(this.stick===e){this.velocityX=e.x-e.downX,this.velocityY=e.y-e.downY;const t=Math.min(Phaser.Math.Distance.Between(e.downX,e.downY,e.x,e.y),50),a=Math.atan2(this.velocityY,this.velocityX);r.setPosition(Math.cos(a)*t,Math.sin(a)*t)}}),e.input.on("pointerup",e=>{this.stick===e&&(this.stick=null,this.velocityX=0,this.velocityY=0,r.setPosition(0,0))})}}t.default=o},1814:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(309),s=(n=r)&&n.__esModule?n:{default:n};t.default=class{constructor(e){this.scene=e,this.setting=s.default,this.currentBgm=null,this.sceneVolume=1}get seVolume(){return this.setting.state.se/100}se(e){this.scene.sound.play("se/"+e,{volume:this.seVolume})}get bgmVolume(){return this.setting.state.bgm/100}updateBgmVolume(){this.scene.sound.sounds.filter(e=>e.key.startsWith("bgm")).forEach(e=>{e.volume=this.bgmVolume*this.sceneVolume})}setSceneVolume(e){this.sceneVolume=e,this.updateBgmVolume()}setBgm(e){if(!e)return this.currentBgm=null,void this.scene.sound.stopAll();const t="bgm/"+e;this.currentBgm&&this.currentBgm.key===t||(this.currentBgm&&this.currentBgm.stop(),this.currentBgm=this.scene.sound.add(t,{loop:!0,volume:this.bgmVolume}),this.currentBgm.play())}interruptBgm(e){const t="bgm/"+e;if(this.currentBgm){if(this.currentBgm.key===t)return()=>null;this.currentBgm.pause()}const a=this.scene.sound.add(t,{loop:!0,volume:this.bgmVolume,duration:200});a.play();return()=>{this.currentBgm&&(this.currentBgm.resume(),this.currentBgm.setVolume(0),this.scene.add.tween({targets:this.currentBgm,volume:this.bgmVolume,duration:2e3})),this.scene.add.tween({targets:a,volume:0,duration:500,onComplete:()=>{a.isPlaying&&a.stop()}})}}}},1815:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{initGtag(e){this.gtag=e}initSteam(e){this.steam=e}activate(e){this.steam&&this.steam.activateAchievement(e,()=>null),this.gtag&&this.gtag("event","archive",{event_category:e})}}},1816:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.initLocalStorage()}initLocalStorage(){this.localStorage={getItem:async e=>localStorage.getItem(e),setItem:async(e,t)=>localStorage.setItem(e,t),removeItem:async e=>localStorage.removeItem(e)}}initSteam(e){this.steam=e,this.steamStorage={getItem:t=>new Promise((a,n)=>e.readTextFromFile(t,a,n)).catch(()=>this.localStorage.getItem(t)),setItem:(t,a)=>new Promise((n,r)=>e.saveTextToFile(t,a,n,r)).catch(()=>this.localStorage.setItem(t,a)),removeItem:t=>new Promise((a,n)=>e.deleteFile(t,a,n)).catch(()=>this.localStorage.removeItem(t))}}getAvailableStorage(){return this.steam&&this.steam.isCloudEnabledForUser()&&this.steam.isCloudEnabled()?this.steamStorage:this.localStorage}async getItem(e){return this.getAvailableStorage().getItem(e)}async setItem(e,t){return this.getAvailableStorage().setItem(e,t)}async removeItem(e){return this.getAvailableStorage().removeItem(e)}}},193:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(1681),s=(n=r)&&n.__esModule?n:{default:n};const o=e=>e.replace(/^\.\/(.*)/,window.ASSET_HOST+"/$1");window.ASSET_HOST&&Object.keys(s.default).map(e=>s.default[e]).forEach(e=>{e.forEach(e=>{Array.isArray(e[1])?e[1].forEach((t,a)=>{e[1][a]=o(e[1][a])}):e[1]=o(e[1])})}),t.default=s.default},194:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{name:e("chapter.0.name"),title:e("chapter.0.title"),sub:e("chapter.0.sub")},{name:e("chapter.1.name"),title:e("chapter.1.title"),sub:e("chapter.1.sub")},{name:e("chapter.2.name"),title:e("chapter.2.title"),sub:e("chapter.2.sub")},{name:e("chapter.3.name"),title:e("chapter.3.title"),sub:e("chapter.3.sub")},{name:e("chapter.4.name"),title:e("chapter.4.title"),sub:e("chapter.4.sub")},{name:e("chapter.5.name"),title:e("chapter.5.title"),sub:e("chapter.5.sub")}]}).call(this,a(3).default)},195:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});t.amber=async(t,a)=>{await t.talk([{chara:a,text:e("townCommon.amber")}])},t.annabelle=async(t,a)=>{if(a.nextMessages)return await t.talk(a.nextMessages);const n=t.storage.state.event.town.annabelle;if(n.includes(0))if(n.includes(1))if(n.includes(2))if(n.includes(3))await t.talk([{chara:a,text:e("townCommon.annabelle.4.0")}]);else{const r=[{chara:a,text:e("townCommon.annabelle.3.0")},{chara:a,text:e("townCommon.annabelle.3.1")},{chara:a,text:e("townCommon.annabelle.3.2")},{chara:a,text:e("townCommon.annabelle.3.3")},{chara:a,text:e("townCommon.annabelle.3.4")}];await t.talk(r),a.nextMessages=r,n.push(3)}else await t.talk([{chara:a,text:e("townCommon.annabelle.2.0")},{chara:a,text:e("townCommon.annabelle.2.1")},{chara:a,text:e("townCommon.annabelle.2.2")},{chara:a,text:e("townCommon.annabelle.2.3")},{chara:a,text:e("townCommon.annabelle.2.4")},{chara:a,text:e("townCommon.annabelle.2.5")},{chara:a,text:e("townCommon.annabelle.2.6")}]),a.nextMessages=[{chara:a,text:e("townCommon.annabelle.2.6")}],n.push(2);else await t.talk([{chara:a,text:e("townCommon.annabelle.1.0")},{chara:a,text:e("townCommon.annabelle.1.1")},{chara:a,text:e("townCommon.annabelle.1.2")},{chara:"ann",text:e("townCommon.annabelle.1.3")},{chara:a,text:e("townCommon.annabelle.1.4")},{chara:a,text:e("townCommon.annabelle.1.5")},{chara:"ann",text:e("townCommon.annabelle.1.6")},{chara:a,text:e("townCommon.annabelle.1.7")},{chara:a,text:e("townCommon.annabelle.1.8")},{chara:a,text:e("townCommon.annabelle.1.9")},{chara:"ann",text:e("townCommon.annabelle.1.10")},{chara:a,text:e("townCommon.annabelle.1.11")}]),a.nextMessages=[{chara:a,text:e("townCommon.annabelle.1.12")},{chara:a,text:e("townCommon.annabelle.1.13")}],n.push(1);else await t.talk([{chara:a,text:e("townCommon.annabelle.0.0")},{chara:a,text:e("townCommon.annabelle.0.1")},{chara:a,text:e("townCommon.annabelle.0.2")},{chara:"ann",text:e("townCommon.annabelle.0.3")},{chara:"ann",text:e("townCommon.annabelle.0.4")},{chara:a,text:e("townCommon.annabelle.0.5")},{chara:a,text:e("townCommon.annabelle.0.6")},{chara:"ann",text:e("townCommon.annabelle.0.7")},{chara:a,text:e("townCommon.annabelle.0.8")},{chara:a,text:e("townCommon.annabelle.0.9")},{chara:"ann",text:e("townCommon.annabelle.0.10")},{chara:"ann",text:e("townCommon.annabelle.0.11")},{chara:a,text:e("townCommon.annabelle.0.12")},{chara:a,text:e("townCommon.annabelle.0.13")},{chara:a,text:e("townCommon.annabelle.0.14")},{chara:"ann",text:e("townCommon.annabelle.0.15")},{chara:a,text:e("townCommon.annabelle.0.16")}]),a.nextMessages=[{chara:a,text:e("townCommon.annabelle.0.16")}],n.push(0)},t.matilda=async(t,a)=>{if(a.nextMessages)return await t.talk(a.nextMessages);const n=t.storage.state.event.town.matilda;n.includes(0)?n.includes(1)?n.includes(2)?n.includes(3)?await t.talk([{chara:a,text:e("townCommon.matilda.4.0")},{chara:a,text:e("townCommon.matilda.4.1")}]):(await t.talk([{chara:a,text:e("townCommon.matilda.3.0")},{chara:a,text:e("townCommon.matilda.3.1")},{chara:a,text:e("townCommon.matilda.3.2")},{chara:a,text:e("townCommon.matilda.3.3")},{chara:a,text:e("townCommon.matilda.3.4")}]),a.nextMessages=[{chara:a,text:e("townCommon.matilda.3.4")}],n.push(3)):(await t.talk([{chara:a,text:e("townCommon.matilda.2.0")},{chara:a,text:e("townCommon.matilda.2.1")},{chara:a,text:e("townCommon.matilda.2.2")},{chara:a,text:e("townCommon.matilda.2.3")},{chara:"ann",text:e("townCommon.matilda.2.4")},{chara:"ann",text:e("townCommon.matilda.2.5")},{chara:a,text:e("townCommon.matilda.2.6")},{chara:a,text:e("townCommon.matilda.2.7")},{chara:"ann",text:e("townCommon.matilda.2.8")},{chara:"ann",text:e("townCommon.matilda.2.9")},{chara:a,text:e("townCommon.matilda.2.10")}]),a.nextMessages=[{chara:a,text:e("townCommon.matilda.2.11")}],n.push(2)):(await t.talk([{chara:"ann",text:e("townCommon.matilda.1.0")},{chara:a,text:e("townCommon.matilda.1.1")},{chara:a,text:e("townCommon.matilda.1.2")},{chara:a,text:e("townCommon.matilda.1.3")},{chara:a,text:e("townCommon.matilda.1.4")},{chara:"ann",text:e("townCommon.matilda.1.5")},{chara:a,text:e("townCommon.matilda.1.6")},{chara:a,text:e("townCommon.matilda.1.7")},{chara:a,text:e("townCommon.matilda.1.8")},{chara:a,text:e("townCommon.matilda.1.9")},{chara:a,text:e("townCommon.matilda.1.10")},{chara:"ann",text:e("townCommon.matilda.1.11")}]),a.nextMessages=[{chara:a,text:e("townCommon.matilda.1.10")}],n.push(1)):(await t.talk([{chara:"ann",text:e("townCommon.matilda.0.0")},{chara:"ann",text:e("townCommon.matilda.0.1")},{chara:a,text:e("townCommon.matilda.0.2")},{chara:a,text:e("townCommon.matilda.0.3")},{chara:a,text:e("townCommon.matilda.0.4")},{chara:"ann",text:e("townCommon.matilda.0.5")},{chara:a,text:e("townCommon.matilda.0.6")},{chara:a,text:e("townCommon.matilda.0.7")},{chara:"ann",text:e("townCommon.matilda.0.8")},{chara:a,text:e("townCommon.matilda.0.9")},{chara:a,text:e("townCommon.matilda.0.10")},{chara:"ann",text:e("townCommon.matilda.0.11")},{chara:"ann",text:e("townCommon.matilda.0.12")},{chara:a,text:e("townCommon.matilda.0.13")},{chara:a,text:e("townCommon.matilda.0.14")},{chara:a,text:e("townCommon.matilda.0.15")},{chara:"ann",text:e("townCommon.matilda.0.16")},{chara:"ann",text:e("townCommon.matilda.0.17")},{chara:"ann",text:e("townCommon.matilda.0.18")},{chara:a,text:e("townCommon.matilda.0.19")}]),a.nextMessages=[{chara:a,text:e("townCommon.matilda.0.20")},{chara:a,text:e("townCommon.matilda.0.21")}],n.push(0))},t.elliott=async(t,a)=>{if(a.nextMessages)return await t.talk(a.nextMessages);const n=t.storage.state.event.town.elliott;if(n.includes(0))if(n.includes(1))n.includes(2)?await t.talk([{chara:a,text:e("townCommon.elliott.3.0")}]):(await t.talk([{chara:a,text:e("townCommon.elliott.2.0")},{chara:a,text:e("townCommon.elliott.2.1")},{chara:a,text:e("townCommon.elliott.2.2")},{chara:a,text:e("townCommon.elliott.2.3")},{chara:"ann",text:e("townCommon.elliott.2.4")},{chara:a,text:e("townCommon.elliott.2.5")},{chara:"ann",text:e("townCommon.elliott.2.6")},{chara:a,text:e("townCommon.elliott.2.7")},{chara:a,text:e("townCommon.elliott.2.8")},{chara:"ann",text:e("townCommon.elliott.2.9")},{chara:a,text:e("townCommon.elliott.2.10")},{chara:a,text:e("townCommon.elliott.2.11")},{chara:a,text:e("townCommon.elliott.2.12")},{chara:a,text:e("townCommon.elliott.2.13")}]),a.nextMessages=[{chara:a,text:e("townCommon.elliott.2.13")}],n.push(2));else{const r=[{chara:a,text:e("townCommon.elliott.1.0")},{chara:a,text:e("townCommon.elliott.1.1")},{chara:a,text:e("townCommon.elliott.1.2")},{chara:a,text:e("townCommon.elliott.1.3")},{chara:a,text:e("townCommon.elliott.1.4")},{chara:a,text:e("townCommon.elliott.1.5")},{chara:a,text:e("townCommon.elliott.1.6")}];await t.talk(r),a.nextMessages=r,n.push(1)}else{await t.talk([{chara:a,text:e("townCommon.elliott.0.0")},{chara:a,text:e("townCommon.elliott.0.1")},{chara:a,text:e("townCommon.elliott.0.2")},{chara:a,text:e("townCommon.elliott.0.3")},{chara:a,text:e("townCommon.elliott.0.4")},{chara:a,text:e("townCommon.elliott.0.5")},{chara:"ann",text:e("townCommon.elliott.0.6")},{chara:a,text:e("townCommon.elliott.0.7")},{chara:a,text:e("townCommon.elliott.0.8")},{chara:a,text:e("townCommon.elliott.0.9")},{chara:a,text:e("townCommon.elliott.0.10")},{chara:a,text:e("townCommon.elliott.0.11")},{chara:a,text:e("townCommon.elliott.0.12")},{chara:"ann",text:e("townCommon.elliott.0.13")},{chara:a,text:e("townCommon.elliott.0.14")},{chara:a,text:e("townCommon.elliott.0.15")},{chara:a,text:e("townCommon.elliott.0.16")}]);const r=await t.select([e("townCommon.elliott.0.17.0"),e("townCommon.elliott.0.17.1")]);await t.talk([...0===r?[{chara:"francisca",text:e("townCommon.elliott.0.18")}]:[],{chara:a,text:e("townCommon.elliott.0.19")}]),a.nextMessages=[{chara:a,text:e("townCommon.elliott.0.20")}],n.push(0)}},t.max=async(t,a)=>{if(a.nextMessages)return await t.talk(a.nextMessages);const n=t.storage.state.event.town.max;n.includes(0)?n.includes(1)?n.includes(2)?await t.talk([{chara:a,text:e("townCommon.max.3.0")}]):(await t.talk([{chara:a,text:e("townCommon.max.2.0")},{chara:a,text:e("townCommon.max.2.1")},{chara:a,text:e("townCommon.max.2.2")},{chara:a,text:e("townCommon.max.2.3")}]),a.nextMessages=[{chara:a,text:e("townCommon.max.2.3")}],n.push(2)):(await t.talk([{chara:a,text:e("townCommon.max.1.0")},{chara:a,text:e("townCommon.max.1.1")},{chara:a,text:e("townCommon.max.1.2")},{chara:a,text:e("townCommon.max.1.3")}]),a.nextMessages=[{chara:a,text:e("townCommon.max.1.4")}],n.push(1)):(await t.talk([{chara:"ann",text:e("townCommon.max.0.0")},{chara:a,text:e("townCommon.max.0.1")},{chara:a,text:e("townCommon.max.0.2")},{chara:"francisca",text:e("townCommon.max.0.3")},{chara:a,text:e("townCommon.max.0.4")},{chara:a,text:e("townCommon.max.0.5")},{chara:a,text:e("townCommon.max.0.6")},{chara:"ann",text:e("townCommon.max.0.7")},{chara:a,text:e("townCommon.max.0.8")},{chara:"jaquelyn",text:e("townCommon.max.0.9")},{chara:a,text:e("townCommon.max.0.10")}]),a.nextMessages=[{chara:a,text:e("townCommon.max.0.11")}],n.push(0))}}).call(this,a(3).default)},196:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.aragnie=t.lamp=t.hector=t.jack=void 0;var n=s(a(52)),r=s(a(747));function s(e){return e&&e.__esModule?e:{default:e}}t.jack=(t,a,n)=>{const r=t.storage.state.event.m2_4;if(!t.storage.state.event.m2_1.completed||r.jack)return a.destroy(),void n.destroy();const s=a.setDisplayName(e("chara.jack"));n.setEvent(async()=>{await a.setSpeed(140).setTargetPosition(a.x,a.y+9..toPixel),await t.talk([{chara:"ann",text:e("aragnie.jack.0")},{chara:s,text:e("aragnie.jack.1")},{chara:s,text:e("aragnie.jack.2")},{chara:"ann",text:e("aragnie.jack.3")},{chara:"ann",text:e("aragnie.jack.4")},{chara:s,text:e("aragnie.jack.5")},{chara:s,text:e("aragnie.jack.6")},{chara:s,text:e("aragnie.jack.7")},{chara:"ann",text:e("aragnie.jack.8")}]),r.jack=!0,await t.ui.transition("normal"),a.destroy(),n.destroy(),await t.ui.sleep(1500),await t.talk([{chara:"ann",text:e("aragnie.jack.9")},{chara:"jaquelyn",text:e("aragnie.jack.10")},{chara:"ann",text:e("aragnie.jack.11")},{chara:"ann",text:e("aragnie.jack.12")}])})},t.hector=(t,a,n,r)=>{n.setDisplayName(e("chara.mary")).setVisible(!1),r.setDisplayName(e("chara.loretta")).setVisible(!1);const s=[a,n,r],o=t.storage.state.event.m2_4;t.storage.state.event.m2_1.completed&&!o.started?a.setDisplayName(e("chara.hector")).setTapEvent(async a=>{await t.ui.transition("fast"),t.setMembersPosition(16..toPixelCenter,11..toPixel,"up"),await t.ui.sleep(300),o.talked?await t.talk([{chara:"ann",text:e("aragnie.hector1.38")},{chara:a,text:e("aragnie.hector1.39")},{chara:a,text:e("aragnie.hector1.40")}]):(await t.talk([{chara:a,text:e("aragnie.hector1.0")},{chara:"ann",text:e("aragnie.hector1.1")},{chara:a,text:e("aragnie.hector1.2")},{chara:"ann",text:e("aragnie.hector1.3")},{chara:"ann",text:e("aragnie.hector1.4")},{chara:a,text:e("aragnie.hector1.5")},{chara:a,text:e("aragnie.hector1.6")},{chara:a,text:e("aragnie.hector1.7")},{chara:"ann",text:e("aragnie.hector1.8")},{chara:"ann",text:e("aragnie.hector1.9")},{chara:a,text:e("aragnie.hector1.10")},{chara:a,text:e("aragnie.hector1.11")},{chara:"ann",text:e("aragnie.hector1.12")},{chara:a,text:e("aragnie.hector1.13")},{chara:a,text:e("aragnie.hector1.14")},{chara:a,text:e("aragnie.hector1.15")},{chara:a,text:e("aragnie.hector1.16")},{chara:a,text:e("aragnie.hector1.17")},{chara:"ann",text:e("aragnie.hector1.18")},{chara:a,text:e("aragnie.hector1.19")},{chara:a,text:e("aragnie.hector1.20")},{chara:a,text:e("aragnie.hector1.21")},{chara:a,text:e("aragnie.hector1.22")},{chara:a,text:e("aragnie.hector1.23")},{chara:a,text:e("aragnie.hector1.24")},{chara:a,text:e("aragnie.hector1.25")},{chara:"ann",text:e("aragnie.hector1.26")},{chara:"ann",text:e("aragnie.hector1.27")},{chara:a,text:e("aragnie.hector1.28")},{chara:a,text:e("aragnie.hector1.29")},{chara:a,text:e("aragnie.hector1.30")},{chara:a,text:e("aragnie.hector1.31")},{chara:a,text:e("aragnie.hector1.32")},{chara:a,text:e("aragnie.hector1.33")},{chara:"ann",text:e("aragnie.hector1.34")},{chara:"ann",text:e("aragnie.hector1.35")},{chara:a,text:e("aragnie.hector1.36")},{chara:a,text:e("aragnie.hector1.37")},{chara:"ann",text:e("aragnie.hector1.38")},{chara:a,text:e("aragnie.hector1.39")},{chara:a,text:e("aragnie.hector1.40")}]),o.talked=!0),t.storage.state.event.m2_2.completed&&(n.setSpeed(180).setVisible(!0),r.setSpeed(180).setVisible(!0),await t.talk([{chara:n,text:e("aragnie.hector2.0")}]),await Promise.all([n.setTargetPosition(n.x,n.y-8..toPixel),r.setTargetPosition(r.x,r.y-8..toPixel)]),await t.talk([{chara:n,text:e("aragnie.hector2.1")},{chara:a,text:e("aragnie.hector2.2")},{chara:a,text:e("aragnie.hector2.3")},{chara:r,text:e("aragnie.hector2.4")},{chara:n,text:e("aragnie.hector2.5")},{chara:n,text:e("aragnie.hector2.6")},{chara:n,text:e("aragnie.hector2.7")},{chara:a,text:e("aragnie.hector2.8")},{chara:n,text:e("aragnie.hector2.9")},{chara:a,text:e("aragnie.hector2.10")},{chara:n,text:e("aragnie.hector2.11")},{chara:a,text:e("aragnie.hector2.12")},{chara:n,text:e("aragnie.hector2.13")},{chara:n,text:e("aragnie.hector2.14")},{chara:a,text:e("aragnie.hector2.15")},{chara:r,text:e("aragnie.hector2.16")},{chara:r,text:e("aragnie.hector2.17")},{chara:"ann",text:e("aragnie.hector2.18")},{chara:a,text:e("aragnie.hector2.19")},{chara:r,text:e("aragnie.hector2.20")},{chara:r,text:e("aragnie.hector2.21")},{chara:n,text:e("aragnie.hector2.22")},{chara:n,text:e("aragnie.hector2.23")},{chara:"ann",text:e("aragnie.hector2.24")},{chara:r,text:e("aragnie.hector2.25")},{chara:r,text:e("aragnie.hector2.26")},{chara:"ann",text:e("aragnie.hector2.27")},{chara:a,text:e("aragnie.hector2.28")},{chara:n,text:e("aragnie.hector2.29")},{chara:a,text:e("aragnie.hector2.30")},{chara:a,text:e("aragnie.hector2.31")},{chara:a,text:e("aragnie.hector2.32")},{chara:a,text:e("aragnie.hector2.33")}],{angle:!1}),s.forEach(e=>e.setSpeed(100).setTargetPosition(t.player.x,t.player.y)),await t.ui.transition("normal"),s.forEach(e=>e.destroy()),o.started=!0,t.ui.missionUpdate("m2_4"))}):s.forEach(e=>e.destroy())},t.lamp=(t,a,n,r,s,i,l,h)=>{a.setDisplayName(e("chara.cassandra")),n.setDisplayName(e("chara.hector")),r.setDisplayName(e("chara.mary")),s.setDisplayName(e("chara.loretta"));const c=t.storage.state.event.m2_4;l.setTapEvent(async()=>{1!==await t.select([e("aragnie.lamp.0"),e("aragnie.lamp.1")])&&t.mapChange("underpass10",15..toPixelCenter,52..toPixelCenter)}).setVisible(c.search),h.setVisible(!1);const d=e=>[n,r,s].forEach(t=>t.setVisible(e));d(!1),c.started&&(c.solved&&i.destroy(),c.completed?a.destroy():(c.search&&!c.solved&&o(t,t.player,h),a.setTapEvent(async()=>{c.solved?(await t.ui.transition("normal"),t.setMembersPosition(45..toPixelCenter,16..toPixel,"up"),d(!0),await t.camera.look(a.x,a.y+70,1e3),await t.talk([{chara:s,text:e("aragnie.last1.0")},{chara:r,text:e("aragnie.last1.1")},{chara:r,text:e("aragnie.last1.2")},{chara:a,text:e("aragnie.last1.3")},{chara:a,text:e("aragnie.last1.4")},{chara:r,text:e("aragnie.last1.5")},{chara:a,text:e("aragnie.last1.6")},{chara:a,text:e("aragnie.last1.7")},{chara:a,text:e("aragnie.last1.8")},{chara:a,text:e("aragnie.last1.9")},{chara:r,text:e("aragnie.last1.10")},{chara:s,text:e("aragnie.last1.11")},{chara:s,text:e("aragnie.last1.12")},{chara:s,text:e("aragnie.last1.13")},{chara:a,text:e("aragnie.last1.14")},{chara:n,text:e("aragnie.last1.15")},{chara:n,text:e("aragnie.last1.16")},{chara:a,text:e("aragnie.last1.17")},{chara:a,text:e("aragnie.last1.18")},{chara:r,text:e("aragnie.last1.19")},{chara:r,text:e("aragnie.last1.20")},{chara:r,text:e("aragnie.last1.21")},{chara:a,text:e("aragnie.last1.22")}],{angle:!1}),await t.ui.transition("slow"),t.camera.revert(),a.setVisible(!1),n.setVisible(!1),r.setR("right"),s.setR("left"),t.player.setR("right"),await t.ui.sleep(1e3),await t.talk([{chara:s,text:e("aragnie.last2.0")},{chara:r,text:e("aragnie.last2.1")},{chara:r,text:e("aragnie.last2.2")},{chara:r,text:e("aragnie.last2.3")},{chara:s,text:e("aragnie.last2.4")}],{angle:!1}),await t.ui.transition("slow"),d(!1),c.completed=!0,t.ui.missionUpdate("m2_4",!0),await t.talk([{chara:"ann",text:e("aragnie.last3.0")},{chara:"jaquelyn",text:e("aragnie.last3.1")},{chara:"francisca",text:e("aragnie.last3.2")}]),await t.ui.sleep(1e3),t.storage.state.chapter=3,await t.mapChange("room1",19..toPixelCenter,11..toPixel,{speed:"slow"})):c.search?await t.talk([{chara:a,text:e("aragnie.cassandra2")}]):(await t.ui.transition("normal"),t.setMembersPosition(45..toPixelCenter,16..toPixel,"up"),d(!0),await t.camera.look(a.x,a.y+70,1e3),await t.talk([{chara:n,text:e("aragnie.cassandra1.0")},{chara:a,text:e("aragnie.cassandra1.1")},{chara:r,text:e("aragnie.cassandra1.2")},{chara:a,text:e("aragnie.cassandra1.3")},{chara:a,text:e("aragnie.cassandra1.4")},{chara:r,text:e("aragnie.cassandra1.5")},{chara:a,text:e("aragnie.cassandra1.6")},{chara:r,text:e("aragnie.cassandra1.7")},{chara:a,text:e("aragnie.cassandra1.8")},{chara:a,text:e("aragnie.cassandra1.9")},{chara:a,text:e("aragnie.cassandra1.10")},{chara:n,text:e("aragnie.cassandra1.11")},{chara:n,text:e("aragnie.cassandra1.12")},{chara:a,text:e("aragnie.cassandra1.13")},{chara:a,text:e("aragnie.cassandra1.14")},{chara:n,text:e("aragnie.cassandra1.15")},{chara:a,text:e("aragnie.cassandra1.16")},{chara:n,text:e("aragnie.cassandra1.17")},{chara:a,text:e("aragnie.cassandra1.18")},{chara:s,text:e("aragnie.cassandra1.19")}],{angle:!1}),await t.ui.transition("normal"),d(!1),c.search=!0,l.setVisible(!0),o(t,t.player,h),t.player.setR("right"),await t.talk([{chara:"ann",text:e("aragnie.cassandra1.20")},{chara:"ann",text:e("aragnie.cassandra1.21")},{chara:"ann",text:e("aragnie.cassandra1.22")}]))})))},t.aragnie=(t,a,s,o,i,l)=>{const h=t.storage.state.event.m2_4;if(h.found&&o.destroy(),h.boss&&l.destroy(),!h.search||h.solved)return a.destroy(),s.destroy(),void i.destroy();s.shadow.y-=40,o.setDisplayName(e("chara.hector")),i.setFaceKey("hector").setDisplayName(e("chara.hector")),h.found||(async()=>{t.ui.setEventMode(!0),t.player.setR("up"),o.tweet(""),await t.ui.sleep(1e3),await t.talk([{chara:o,text:e("aragnie.aragnie_hector.0")},{chara:o,text:e("aragnie.aragnie_hector.1")}],{angle:!1}),await o.setSpeed(300).setTargetPosition(10..toPixel,33..toPixel),o.destroy(),t.player.tweet(e("aragnie.aragnie_hector.2")),t.ui.setEventMode(!1),h.found=!0})(),h.boss||l.setEvent(async()=>{await t.talk([{chara:i,text:e("aragnie.aragnie_hector.3")}]),h.boss=!0,l.destroy()}),i.setFaceKey("hector").setDisplayName(e("chara.hector")).setTapEvent(async()=>{await t.talk([{chara:i,text:e("aragnie.aragnie_hector.4")},{chara:"francisca",text:e("aragnie.aragnie_hector.5")}])});const c=new r.default("loretta",e("chara.loretta"),t.player),d=new r.default("mary",e("chara.mary"),t.player),u=new r.default("hector",e("chara.hector"),t.player);a.setEvent(async()=>{await t.talk([{chara:d,text:e("aragnie.boss.0")},{chara:d,text:e("aragnie.boss.1")},{chara:c,text:e("aragnie.boss.2")},{chara:"ann",text:e("aragnie.boss.3")}]),await t.ui.sleep(500);await t.ui.battle([(0,n.default)("aragnie",21,{hp:1200})],{boss:!0,bgm:"battle3"})&&(window.archiveManager.activate("aragnie"),i.destroy(),s.die(),await t.talk([{chara:"ann",text:e("aragnie.boss.4")},{chara:c,text:e("aragnie.boss.5")},{chara:u,text:e("aragnie.boss.6")},{chara:u,text:e("aragnie.boss.7")},{chara:d,text:e("aragnie.boss.8")}]),a.destroy(),h.solved=!0)}).setVisible(h.search&&!h.solved)};const o=(e,t,a)=>{const n=e.make.graphics().fillCircle(0,0,100).createGeometryMask();a.setVisible(!0).setMask(n),e.add.tween({targets:a,duration:1e3,alpha:.6,yoyo:!0,loop:-1});const r=e.add.sprite(0,-15,"magic_lamp").setScale(1.1).setAlpha(.7).setRotation(-Math.PI).setTint("#ff0000".toColorInt);r.setMask(n),r.setBlendMode(Phaser.BlendModes.ADD),r.color=70,r.colorBool=!0,r.preUpdate=()=>{n.geometryMask.x=t.x,n.geometryMask.y=t.y-15,r.color+=r.colorBool?1:-1,(r.color<=70||r.color>=185)&&(r.colorBool=!r.colorBool);const e=r.color.toString(16).padStart(2,0),a=(255-r.color).toString(16).padStart(2,0);r.setTint(`#FF${e}${a}`.toColorInt)},t.add(r),t.lamp=r}}).call(this,a(3).default)},197:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const a=t.WATER_COUNT=5;t.marianne=(t,n)=>{const r=t.storage.state.event.m3_2;if(r.completed&&3!==t.storage.state.chapter)return n.destroy();n.setDisplayName(e("chara.sister")),n.setTapEvent(async n=>{r.completed?await t.talk([{chara:n,text:e("marianne.solved.0")}]):r.count>=a?(await t.talk([{chara:"ann",text:e("marianne.solve.0")},{chara:"ann",text:e("marianne.solve.1")},{chara:n,text:e("marianne.solve.2")},{chara:n,text:e("marianne.solve.3")},{chara:n,text:e("marianne.solve.4")},{chara:"ann",text:e("marianne.solve.5")}]),await t.ui.sleep(500),await t.talk([{chara:n,text:e("marianne.solve.6")},{chara:"ann",text:e("marianne.solve.7")},{chara:n,text:e("marianne.solve.8")},{chara:n,text:e("marianne.solve.9")}]),t.ui.announce(e("gotItem",e("marianne.item"))),await t.talk([{chara:"ann",text:e("marianne.solve.10")},{chara:"ann",text:e("marianne.solve.11")},{chara:"ann",text:e("marianne.solve.12")},{chara:n,text:e("marianne.solve.13")},{chara:"ann",text:e("marianne.solve.14")},{chara:"ann",text:e("marianne.solve.15")},{chara:n,text:e("marianne.solve.16")},{chara:n,text:e("marianne.solve.17")},{chara:"ann",text:e("marianne.solve.18")},{chara:"ann",text:e("marianne.solve.19")}]),await t.ui.sleep(500),await t.talk([{chara:"ann",text:e("marianne.solve.20")},{chara:"ann",text:e("marianne.solve.21")},{chara:n,text:e("marianne.solve.22")},{chara:n,text:e("marianne.solve.23")},{chara:"ann",text:e("marianne.solve.24")},{chara:n,text:e("marianne.solve.25")},{chara:n,text:e("marianne.solve.26")},{chara:n,text:e("marianne.solve.27")}]),r.completed=!0,t.ui.missionUpdate("m3_2",!0)):r.started?await t.talk([{chara:"ann",text:e("marianne.started.0")},{chara:"ann",text:e("marianne.started.1")},{chara:n,text:e("marianne.started.2")},{chara:"ann",text:e("marianne.started.3")}]):(await t.talk([{chara:"ann",text:e("marianne.start.0")},{chara:"ann",text:e("marianne.start.1")},{chara:n,text:e("marianne.start.2")},{chara:"ann",text:e("marianne.start.3")},{chara:n,text:e("marianne.start.4")},{chara:"ann",text:e("marianne.start.5")},{chara:n,text:e("marianne.start.6")},{chara:"ann",text:e("marianne.start.7")},{chara:"ann",text:e("marianne.start.8")},{chara:"ann",text:e("marianne.start.9")},{chara:n,text:e("marianne.start.10")},{chara:n,text:e("marianne.start.11")},{chara:"ann",text:e("marianne.start.12")},{chara:"ann",text:e("marianne.start.13")},{chara:n,text:e("marianne.start.14")},{chara:"ann",text:e("marianne.start.15")},{chara:n,text:e("marianne.start.16")},{chara:n,text:e("marianne.start.17")},{chara:"ann",text:e("marianne.start.18")},{chara:n,text:e("marianne.start.19")},{chara:n,text:e("marianne.start.20")},{chara:n,text:e("marianne.start.21")},{chara:"ann",text:e("marianne.start.22")},{chara:"ann",text:e("marianne.start.23")},{chara:n,text:e("marianne.start.24")},{chara:n,text:e("marianne.start.25")},{chara:n,text:e("marianne.start.26")},{chara:n,text:e("marianne.start.27")},{chara:"ann",text:e("marianne.start.28")},{chara:n,text:e("marianne.start.29")},{chara:n,text:e("marianne.start.30")},{chara:n,text:e("marianne.start.31")},{chara:n,text:e("marianne.start.32")},{chara:n,text:e("marianne.start.33")},{chara:n,text:e("marianne.start.34")},{chara:"ann",text:e("marianne.start.35")},{chara:"ann",text:e("marianne.start.36")},{chara:n,text:e("marianne.start.37")},{chara:n,text:e("marianne.start.38")},{chara:"ann",text:e("marianne.start.39")},{chara:"ann",text:e("marianne.start.40")},{chara:"ann",text:e("marianne.start.41")},{chara:n,text:e("marianne.start.42")},{chara:"ann",text:e("marianne.start.43")}]),r.started=!0,t.ui.missionUpdate("m3_2"))})}}).call(this,a(3).default)},198:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const a=t.KELUNNE_COUNT=5;t.allsRight=(t,n)=>{const r=t.storage.state.event.m4_2;n.setDisplayName(e("chara.zi")),n.setTapEvent(async n=>{t.storage.state.event.m4_3.completed?await t.talk([{chara:n,text:e("allsRight.solved2.0")},{chara:n,text:e("allsRight.solved2.1")}]):r.completed?await t.talk([{chara:n,text:e("allsRight.solved1.0")},{chara:n,text:e("allsRight.solved1.1")}]):r.count>=a?(await t.talk([{chara:"ann",text:e("allsRight.solve.0")},{chara:n,text:e("allsRight.solve.1")},{chara:n,text:e("allsRight.solve.2")}]),await t.ui.transition("slow"),await t.ui.sleep(1500),await t.talk([{chara:n,text:e("allsRight.solve.3")},{chara:"ann",text:e("allsRight.solve.4")},{chara:n,text:e("allsRight.solve.5")},{chara:"ann",text:e("allsRight.solve.6")},{chara:"ann",text:e("allsRight.solve.7")},{chara:n,text:e("allsRight.solve.8")},{chara:"ann",text:e("allsRight.solve.9")},{chara:n,text:e("allsRight.solve.10")},{chara:n,text:e("allsRight.solve.11")},{chara:"ann",text:e("allsRight.solve.12")}]),r.completed=!0,t.storage.state.event.m4_3.started=!0,t.ui.missionUpdate("m4_2",!0).then(()=>{t.ui.missionUpdate("m4_3")})):r.started?await t.talk([{chara:n,text:e("allsRight.start.62",{KELUNNE_COUNT:a})},{chara:n,text:e("allsRight.start.63")}]):(await t.talk([{chara:n,text:e("allsRight.start.0")},{chara:n,text:e("allsRight.start.1")},{chara:"ann",text:e("allsRight.start.2")},{chara:n,text:e("allsRight.start.3")},{chara:"ann",text:e("allsRight.start.4")},{chara:"ann",text:e("allsRight.start.5")},{chara:n,text:e("allsRight.start.6")},{chara:n,text:e("allsRight.start.7")},{chara:"ann",text:e("allsRight.start.8")},{chara:n,text:e("allsRight.start.9")},{chara:n,text:e("allsRight.start.10")},{chara:n,text:e("allsRight.start.11")},{chara:n,text:e("allsRight.start.12")},{chara:n,text:e("allsRight.start.13")},{chara:"ann",text:e("allsRight.start.14")},{chara:"ann",text:e("allsRight.start.15")},{chara:n,text:e("allsRight.start.16")},{chara:n,text:e("allsRight.start.17")},{chara:n,text:e("allsRight.start.18")},{chara:n,text:e("allsRight.start.19")},{chara:"ann",text:e("allsRight.start.20")},{chara:"ann",text:e("allsRight.start.21")},{chara:n,text:e("allsRight.start.22")},{chara:n,text:e("allsRight.start.23")},{chara:n,text:e("allsRight.start.24")},{chara:n,text:e("allsRight.start.25")},{chara:n,text:e("allsRight.start.26")},{chara:"ann",text:e("allsRight.start.27")},{chara:n,text:e("allsRight.start.28")},{chara:n,text:e("allsRight.start.29")},{chara:n,text:e("allsRight.start.30")},{chara:n,text:e("allsRight.start.31")},{chara:n,text:e("allsRight.start.32")},{chara:"ann",text:e("allsRight.start.33")},{chara:n,text:e("allsRight.start.34")},{chara:n,text:e("allsRight.start.35")},{chara:n,text:e("allsRight.start.36")},{chara:n,text:e("allsRight.start.37")},{chara:"ann",text:e("allsRight.start.38")},{chara:"ann",text:e("allsRight.start.39")},{chara:n,text:e("allsRight.start.40")},{chara:"ann",text:e("allsRight.start.41")},{chara:n,text:e("allsRight.start.42")},{chara:n,text:e("allsRight.start.43")},{chara:n,text:e("allsRight.start.44")},{chara:"ann",text:e("allsRight.start.45")},{chara:"ann",text:e("allsRight.start.46")},{chara:"ann",text:e("allsRight.start.47")},{chara:n,text:e("allsRight.start.48")},{chara:n,text:e("allsRight.start.49")},{chara:n,text:e("allsRight.start.50")},{chara:"ann",text:e("allsRight.start.51")},{chara:"ann",text:e("allsRight.start.52")},{chara:n,text:e("allsRight.start.53")},{chara:n,text:e("allsRight.start.54")},{chara:"ann",text:e("allsRight.start.55")},{chara:n,text:e("allsRight.start.56")},{chara:n,text:e("allsRight.start.57")},{chara:n,text:e("allsRight.start.58")},{chara:"ann",text:e("allsRight.start.59")},{chara:n,text:e("allsRight.start.60")},{chara:"ann",text:e("allsRight.start.61")},{chara:n,text:e("allsRight.start.62",{KELUNNE_COUNT:a})},{chara:n,text:e("allsRight.start.63")},{chara:"ann",text:e("allsRight.start.64")},{chara:"ann",text:e("allsRight.start.65")}]),r.started=!0,t.ui.missionUpdate("m4_2"))})}}).call(this,a(3).default)},199:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const a=t.APPLES_COUNT=5,n=t.GOOD_APPLES=["a8_5","a8_6","a8_7","a8_9","a9_4"];t.lute=(t,r,s)=>{if(s.setVisible(!1),4!==t.storage.state.chapter)return r.destroy();const o=t.storage.state.event.m4_4;r.setDisplayName(e("chara.lyla")),o.completed?r.image.anims.play("poets_lute",!0):t.storage.state.event.m4_3.completed||r.image.setFrame(2),r.setTapEvent(async i=>{if(o.completed)i.tweet(""),await t.ui.sleep(1e3);else if(o.apples.length>=a){const l=o.apples.count(e=>n.includes(e))>=a;await t.talk([{chara:"ann",text:e("lute.solve1.0")},{chara:i,text:e("lute.solve1.1")}]),await t.ui.sleep(500),await t.talk([{chara:i,text:e(l?"lute.answer.0.0":"lute.answer.1.0")},{chara:i,text:e(l?"lute.answer.0.1":"lute.answer.1.1")}]),await t.ui.sleep(500),await t.talk([{chara:i,text:e("lute.solve2.0")},{chara:i,text:e("lute.solve2.1")},{chara:"ann",text:e("lute.solve2.2")},{chara:i,text:e("lute.solve2.3")},{chara:i,text:e("lute.solve2.4")},{chara:"ann",text:e("lute.solve2.5")},{chara:i,text:e("lute.solve2.6")}]),r.image.anims.play("poets_lute",!0),await t.ui.sleep(3300),s.setVisible(!0).setAlpha(0),t.add.tween({targets:s,duration:1200,yoyo:!0,alpha:1,loop:3}),await t.ui.sleep(7200),s.setVisible(!1),await t.ui.sleep(2e3),r.image.anims.stop(),r.image.setFrame(1),await t.talk([{chara:i,text:e("lute.solve3.0")},{chara:"ann",text:e("lute.solve3.1")},{chara:"ann",text:e("lute.solve3.2")},{chara:i,text:e("lute.solve3.3")},{chara:i,text:e("lute.solve3.4")},{chara:"ann",text:e("lute.solve3.5")},{chara:i,text:e("lute.solve3.6")},{chara:i,text:e("lute.solve3.7")},{chara:i,text:e("lute.solve3.8")},{chara:"ann",text:e("lute.solve3.9")},...l?[{chara:i,text:e("lute.solve3.10")},{chara:i,text:e("lute.solve3.11")},{chara:i,text:e("lute.solve3.12")},{chara:"ann",text:e("lute.solve3.13")}]:[],{chara:i,text:e("lute.solve3.14")},{chara:i,text:e("lute.solve3.15")},{chara:"ann",text:e("lute.solve3.16")}]),r.image.anims.play("poets_lute",!0),o.completed=!0,t.ui.missionUpdate("m4_4",!0)}else o.started?await t.talk([{chara:i,text:e("lute.started.0")},{chara:i,text:e("lute.started.1")}]):t.storage.state.event.m4_3.completed?(await t.talk([{chara:i,text:e("lute.start.0")},{chara:i,text:e("lute.start.1")},{chara:i,text:e("lute.start.2")},{chara:"ann",text:e("lute.start.3")},{chara:"ann",text:e("lute.start.4")},{chara:i,text:e("lute.start.5")},{chara:i,text:e("lute.start.6")},{chara:"ann",text:e("lute.start.7")},{chara:"ann",text:e("lute.start.8")},{chara:i,text:e("lute.start.9")},{chara:i,text:e("lute.start.10")},{chara:"ann",text:e("lute.start.11")},{chara:i,text:e("lute.start.12")},{chara:i,text:e("lute.start.13")},{chara:"ann",text:e("lute.start.14")},{chara:i,text:e("lute.start.15")},{chara:"ann",text:e("lute.start.16")},{chara:"ann",text:e("lute.start.17")},{chara:i,text:e("lute.start.18")},{chara:"ann",text:e("lute.start.19")},{chara:i,text:e("lute.start.20")},{chara:"ann",text:e("lute.start.21")},{chara:"ann",text:e("lute.start.22")},{chara:i,text:e("lute.start.23")},{chara:"ann",text:e("lute.start.24")},{chara:"ann",text:e("lute.start.25")},{chara:"ann",text:e("lute.start.26")},{chara:i,text:e("lute.start.27")},{chara:i,text:e("lute.start.28")},{chara:i,text:e("lute.start.29")},{chara:"ann",text:e("lute.start.30")}]),o.started=!0,t.ui.missionUpdate("m4_4")):(await t.talk([{chara:"ann",text:e("lute.unavailable.0")}]),await t.ui.sleep(700),await t.talk([{chara:"ann",text:e("lute.unavailable.1")}]))})},t.appleCollection=(t,r,s)=>{const o=t.storage.state.event.m4_4,i=n.includes(s);if(r.image.setFrame(i?0:1),o.apples.includes(s))return r.destroy();o.started&&!o.completed&&r.setTapEvent(async()=>{1!==await t.select([e("lute.option.0"),e("lute.option.1")])&&(o.apples.push(s),t.ui.announce(e("lute.apple")),r.destroy(),o.apples.length===a&&t.tweetOnce(t.francisca,e("lute.tweet"),"apl"))})}}).call(this,a(3).default)},3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(739)),r=s(a(309));function s(e){return e&&e.__esModule?e:{default:e}}t.default=(e,t)=>{const a=n.default[r.default.state.lang],s=e.split(".").reduce((e,t)=>e&&e[t],a);return void 0===s?(console.error(`Translation missing: "${e}" of "${r.default.state.lang}"`),"Missing"):t?["string","number"].includes(typeof t)?s.replace(new RegExp("\\#\\{\\w+\\}","g"),t):Object.keys(t).reduce((e,a)=>e.replace(new RegExp(`\\#\\{${a}\\}`,"g"),t[a]),s):s}},309:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(1720),s=(n=r)&&n.__esModule?n:{default:n};t.default=new s.default},310:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{key:"m0_1",chapter:0,title:e("mission.m0_1.title"),sub:e("mission.m0_1.sub"),map:{key:"castle1",x:34,y:21}},{key:"m1_1",chapter:1,title:e("mission.m1_1.title"),sub:e("mission.m1_1.sub"),map:{key:"forest2",x:42,y:21}},{key:"m1_2",chapter:1,title:e("mission.m1_2.title"),sub:e("mission.m1_2.sub"),map:{key:"forest6",x:8,y:18}},{key:"m1_3",chapter:1,title:e("mission.m1_3.title"),sub:e("mission.m1_3.sub"),map:{key:"forest9",x:16,y:10}},{key:"m1_4",chapter:1,title:e("mission.m1_4.title"),sub:e("mission.m1_4.sub"),map:{key:"forest4",x:25,y:13}},{key:"m2_1",chapter:2,title:e("mission.m2_1.title"),sub:e("mission.m2_1.sub"),map:{key:"underpass1",x:47,y:14}},{key:"m2_2",chapter:2,title:e("mission.m2_2.title"),sub:e("mission.m2_2.sub"),map:{key:"underpass4",x:15,y:10}},{key:"m2_3",chapter:2,title:e("mission.m2_3.title"),sub:e("mission.m2_3.sub"),map:{key:"underpass5",x:9,y:0}},{key:"m2_4",chapter:2,title:e("mission.m2_4.title"),sub:e("mission.m2_4.sub"),map:{key:"underpass1",x:31,y:18}},{key:"m3_1",chapter:3,title:e("mission.m3_1.title"),sub:e("mission.m3_1.sub"),map:{key:"catacomb3",x:37,y:9}},{key:"m3_2",chapter:3,title:e("mission.m3_2.title"),sub:e("mission.m3_2.sub"),map:{key:"catacomb5",x:14,y:14}},{key:"m3_3",chapter:3,title:e("mission.m3_3.title"),sub:e("mission.m3_3.sub"),map:{key:"catacomb4",x:12,y:24}},{key:"m3_4",chapter:3,title:e("mission.m3_4.title"),sub:e("mission.m3_4.sub"),map:{key:"catacomb10",x:15,y:25}},{key:"m3_5",chapter:3,title:e("mission.m3_5.title"),sub:e("mission.m3_5.sub"),map:{key:"catacomb11",x:15,y:11}},{key:"m4_1",chapter:4,title:e("mission.m4_1.title"),sub:e("mission.m4_1.sub"),map:{key:"temple4",x:25,y:25}},{key:"m4_2",chapter:4,title:e("mission.m4_2.title"),sub:e("mission.m4_2.sub"),map:{key:"temple7",x:19,y:14}},{key:"m4_3",chapter:4,title:e("mission.m4_3.title"),sub:e("mission.m4_3.sub"),map:{key:"temple9",x:16,y:12}},{key:"m4_4",chapter:4,title:e("mission.m4_4.title"),sub:e("mission.m4_4.sub"),map:{key:"temple10",x:9,y:35}},{key:"m4_5",chapter:4,title:e("mission.m4_5.title"),sub:e("mission.m4_5.sub"),map:{key:"temple15",x:16,y:12}},{key:"m5_1",chapter:5,title:e("mission.m5_1.title"),sub:e("mission.m5_1.sub"),map:{key:"castle1",x:34,y:21}}]}).call(this,a(3).default)},311:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});t.cassandra=(t,a,n,r,s,o)=>{const i=t.storage.state.event.m2_1;r.setVisible(!i.opened),a.setActive(i.opened),t.storage.state.event.m2_4.started||(o.setTapEvent(async()=>{1!==await t.select([e("cassandra.util.door.0"),e("cassandra.util.door.1")])&&(i.key=!0,o.setVisible(!1),t.ui.announce(e("cassandra.util.key")))}).setVisible(i.started&&!i.key),s.setTapEvent(async()=>{i.key?(t.ui.announce(e("cassandra.util.unlock")),i.opened=!0,r.setVisible(!1),s.setVisible(!1),a.setActive(!0)):await t.talk([{chara:"ann",text:e("cassandra.util.locked")}])}).setVisible(!i.opened),t.storage.state.event.m2_4.started||n.setDisplayName(e("chara.cassandra")).setTapEvent(async a=>{if(i.completed)await t.talk([{chara:a,text:e("cassandra.solved")}]);else if(i.wine.length>=3)await t.talk([{chara:a,text:e("cassandra.solve.0")},{chara:"ann",text:e("cassandra.solve.1")},{chara:a,text:e("cassandra.solve.2")},{chara:a,text:e("cassandra.solve.3")},{chara:a,text:e("cassandra.solve.4")},{chara:"ann",text:e("cassandra.solve.5")},{chara:"ann",text:e("cassandra.solve.6")},{chara:a,text:e("cassandra.solve.7")},{chara:a,text:e("cassandra.solve.8")},{chara:"ann",text:e("cassandra.solve.9")},{chara:a,text:e("cassandra.solve.10")},{chara:a,text:e("cassandra.solve.11")}]),i.completed=!0,t.ui.missionUpdate("m2_1",!0);else if(i.started)i.key?await t.talk([{chara:a,text:e("cassandra.progress.2")}]):await t.talk([{chara:a,text:e("cassandra.progress.0")},{chara:a,text:e("cassandra.progress.1")}]);else if(i.talked){await t.talk([{chara:a,text:e("cassandra.talk2.0")},{chara:a,text:e("cassandra.talk2.1")},{chara:a,text:e("cassandra.talk2.2")},{chara:a,text:e("cassandra.talk2.3")}]);if(1===await t.select([e("cassandra.talk2.4.0"),e("cassandra.talk2.4.1")]))return void await t.talk([{chara:a,text:e("cassandra.talk2.5")}]);await t.talk([{chara:a,text:e("cassandra.talk2.6")},{chara:"ann",text:e("cassandra.talk2.7")},{chara:a,text:e("cassandra.talk2.8")},{chara:"ann",text:e("cassandra.talk2.9")},{chara:a,text:e("cassandra.talk2.10")},{chara:a,text:e("cassandra.talk2.11")},{chara:"ann",text:e("cassandra.talk2.12")},{chara:a,text:e("cassandra.talk2.13")},{chara:a,text:e("cassandra.talk2.14")},{chara:"ann",text:e("cassandra.talk2.15")},{chara:"ann",text:e("cassandra.talk2.16")},{chara:a,text:e("cassandra.talk2.17")},{chara:a,text:e("cassandra.talk2.18")},{chara:a,text:e("cassandra.talk2.19")}]),i.started=!0,o.setVisible(!0),t.ui.missionUpdate("m2_1")}else i.talked||(await t.talk([{chara:a,text:e("cassandra.talk1.0")},{chara:a,text:e("cassandra.talk1.1")},{chara:"ann",text:e("cassandra.talk1.2")},{chara:a,text:e("cassandra.talk1.3")},{chara:a,text:e("cassandra.talk1.4")},{chara:"ann",text:e("cassandra.talk1.5")},{chara:a,text:e("cassandra.talk1.6")},{chara:a,text:e("cassandra.talk1.7")},{chara:"ann",text:e("cassandra.talk1.8")},{chara:a,text:e("cassandra.talk1.9")},{chara:a,text:e("cassandra.talk1.10")},{chara:"ann",text:e("cassandra.talk1.11")},{chara:a,text:e("cassandra.talk1.12")},{chara:a,text:e("cassandra.talk1.13")},{chara:a,text:e("cassandra.talk1.14")},{chara:a,text:e("cassandra.talk1.15")}]),i.talked=!0)}))},t.wine=(t,a,n)=>{const r=t.storage.state.event.m2_1;r.wine.includes(n)?a.destroy():a.setTapEvent(async()=>{r.wine.push(n),t.ui.announce(e("cassandra.util.wine")),1===r.wine.length?t.player.tweet(e("cassandra.tweet.0")).then(()=>t.jaquelyn.tweet(e("cassandra.tweet.1"))):2===r.wine.length?t.francisca.tweet(e("cassandra.tweet.2")):3===r.wine.length&&t.jaquelyn.tweet(e("cassandra.tweet.3")),a.destroy()})}}).call(this,a(3).default)},312:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.dragon=t.gateConfirm=t.ethelbald=void 0;var n,r=a(52),s=(n=r)&&n.__esModule?n:{default:n};const o=[[e("dragonKiller.soldier.0")],[e("dragonKiller.soldier.1")],[e("dragonKiller.soldier.2")]];t.ethelbald=(t,a,n,r)=>{const s=t.storage.state.event.m4_5;if(s.started||r.setBlocked(async()=>{await t.talk([{chara:"francisca",text:e("dragonKiller.block.0")}])}),n.forEach((a,n)=>{if(s.completed)return a.destroy();a.setDisplayName(e("chara.injuredSoldier")).setTapEvent(async e=>{await t.talk(o[n].map(t=>({chara:e,text:t})))})}),s.completed)return a.destroy();a.setDisplayName(e("chara.ethel")).setTapEvent(async a=>{s.started?await t.talk([{chara:"ann",text:e("dragonKiller.started.0")},{chara:a,text:e("dragonKiller.started.1")}]):(await t.talk([{chara:"ann",text:e("dragonKiller.start.0")},{chara:a,text:e("dragonKiller.start.1")},{chara:"ann",text:e("dragonKiller.start.2")},{chara:a,text:e("dragonKiller.start.3")},{chara:a,text:e("dragonKiller.start.4")},{chara:a,text:e("dragonKiller.start.5")},{chara:"ann",text:e("dragonKiller.start.6")},{chara:"ann",text:e("dragonKiller.start.7")},{chara:a,text:e("dragonKiller.start.8")},{chara:a,text:e("dragonKiller.start.9")},{chara:"ann",text:e("dragonKiller.start.10")},{chara:a,text:e("dragonKiller.start.11")},{chara:a,text:e("dragonKiller.start.12")},{chara:a,text:e("dragonKiller.start.13")},{chara:a,text:e("dragonKiller.start.14")}]),t.ui.missionUpdate("m4_5"),s.started=!0,r.setBlocked(!1))})},t.gateConfirm=(t,a)=>{t.storage.state.event.m4_5.area1||a.setBlocked(async a=>{await t.talk([{chara:"francisca",text:e("dragonKiller.confirm.0")}]);1!==await t.select([e("dragonKiller.confirmOption.0"),e("dragonKiller.confirmOption.1")])&&a()})},t.dragon=(t,a,n,r,o,i)=>{const l=t.storage.state.event.m4_5;if(l.area1&&r.destroy(),l.area2&&(n.y+=3..toPixel,o.destroy()),l.completed)return[a,n,i].forEach(e=>e.destroy());n.setDisplayName(e("chara.king")),a.setDisplayName(e("chara.sonberk")),r.setEvent(async()=>{t.player.tweet(""),await t.ui.sleep(800),await t.camera.look(16..toPixelCenter,9..toPixelCenter,800),await t.talk([{chara:a,text:e("dragonKiller.king1.0")},{chara:a,text:e("dragonKiller.king1.1")},{chara:a,text:e("dragonKiller.king1.2")},{chara:n,text:e("dragonKiller.king1.3")},{chara:n,text:e("dragonKiller.king1.4")},{chara:n,text:e("dragonKiller.king1.5")},{chara:a,text:e("dragonKiller.king1.6")},{chara:a,text:e("dragonKiller.king1.7")},{chara:a,text:e("dragonKiller.king1.8")},{chara:a,text:e("dragonKiller.king1.9")},{chara:a,text:e("dragonKiller.king1.10")},{chara:n,text:e("dragonKiller.king1.11")},{chara:n,text:e("dragonKiller.king1.12")},{chara:n,text:e("dragonKiller.king1.13")}],{angle:!1}),await t.camera.revert(600),l.area1=!0,r.destroy()}),o.setEvent(async()=>{const a=t.add.rectangle(0,0,t.map.width,t.map.height,13378048);a.setAlpha(0).setBlendMode(Phaser.BlendModes.OVERLAY).setDepth(14e4).setOrigin(0,0),t.add.tween({targets:a,duration:700,ease:"Power2",alpha:1,yoyo:!0,onComplete(){a.destroy()}}),await new Promise(e=>t.camera.shake(1e3,.03,void 0,e)),await t.talk([{chara:n,text:e("dragonKiller.king2.0")},{chara:"ann",text:e("dragonKiller.king2.1")},{chara:"ann",text:e("dragonKiller.king2.2")}],{angle:!1}),n.y+=3..toPixel,n.initImage("king2"),l.area2=!0,o.destroy()}),i.setEvent(async()=>{const r=a;t.jaquelyn.setAllowWalkingWhileEvent(!0).setTargetPosition(16..toPixelCenter,16..toPixelCenter),t.francisca.setAllowWalkingWhileEvent(!0).setTargetPosition(18..toPixelCenter,16..toPixelCenter),await t.player.setTargetPosition(17..toPixelCenter,15..toPixel),t.player.setR("left"),await t.talk([{chara:n,text:e("dragonKiller.king2.3")},{chara:"ann",text:e("dragonKiller.king2.4")}],{angle:!1}),await t.camera.look(16..toPixelCenter,9..toPixelCenter,400),t.jaquelyn.setTargetPosition(16..toPixelCenter,13..toPixelCenter),t.francisca.setTargetPosition(18..toPixelCenter,13..toPixelCenter),await t.player.setTargetPosition(17..toPixelCenter,12..toPixelCenter),await t.talk([{chara:"ann",text:e("dragonKiller.sonberk.0")},{chara:r,text:e("dragonKiller.sonberk.1")},{chara:r,text:e("dragonKiller.sonberk.2")},{chara:"ann",text:e("dragonKiller.sonberk.3")},{chara:r,text:e("dragonKiller.sonberk.4")},{chara:r,text:e("dragonKiller.sonberk.5")},{chara:"ann",text:e("dragonKiller.sonberk.6")},{chara:r,text:e("dragonKiller.sonberk.7")},{chara:"ann",text:e("dragonKiller.sonberk.8")},{chara:"ann",text:e("dragonKiller.sonberk.9")},{chara:r,text:e("dragonKiller.sonberk.10")},{chara:r,text:e("dragonKiller.sonberk.11")},{chara:r,text:e("dragonKiller.sonberk.12")},{chara:r,text:e("dragonKiller.sonberk.13")},{chara:r,text:e("dragonKiller.sonberk.14")},{chara:r,text:e("dragonKiller.sonberk.15")},{chara:r,text:e("dragonKiller.sonberk.16")}]),await t.player.setTargetPosition(17..toPixel,11..toPixel);if(!await t.ui.battle([(0,s.default)("dragon",48,{hp:2500})],{boss:!0,bgm:"battle3"}))return;window.archiveManager.activate("sonberk"),t.francisca.setAllowWalkingWhileEvent(!1).stopWalk().setPosition(t.player.x+40,t.player.y+27).setR("up"),t.jaquelyn.setAllowWalkingWhileEvent(!1).stopWalk().setPosition(t.player.x+20,t.player.y+70).setR("up"),await t.ui.sleep(200);const o=t.add.rectangle(0,0,t.map.width,t.map.height,13404228);o.setAlpha(0).setBlendMode(Phaser.BlendModes.OVERLAY).setDepth(14e4).setOrigin(0,0),t.add.tween({targets:o,duration:1200,ease:"Power2",alpha:1,yoyo:!0,onComplete(){o.destroy()}}),t.camera.shake(2e3,.03),await t.ui.sleep(1800),await a.die(),await t.ui.sleep(300),await t.camera.look(0,3..toPixelCenter,400,!0),await t.talk([{chara:"ann",text:e("dragonKiller.solve.0")},{chara:"jaquelyn",text:e("dragonKiller.solve.1")},{chara:"francisca",text:e("dragonKiller.solve.2")}]),t.player.setR("down"),t.francisca.setR("left"),await t.talk([{chara:"ann",text:e("dragonKiller.solve.3")},{chara:"jaquelyn",text:e("dragonKiller.solve.4")},{chara:"francisca",text:e("dragonKiller.solve.5")},{chara:"ann",text:e("dragonKiller.solve.6")}]),t.ui.missionUpdate("m4_5",!0),l.completed=!0,await t.ui.sleep(800),t.storage.state.chapter=5,await t.mapChange("room1",19..toPixelCenter,11..toPixel,{speed:"slow"})})}}).call(this,a(3).default)},313:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{id:1,name:e("weapon.1"),atk:2,dex:1,ability:null,effect:"slash",icon:"w1"},{id:2,name:e("weapon.2"),atk:2,agi:1,ability:2,effect:"shot",icon:"w11"},{id:3,name:e("weapon.3"),atk:4,def:1,ability:1,effect:"slash",icon:"w2"},{id:4,name:e("weapon.4"),atk:5,dex:1,ability:null,effect:"stab",icon:"w8"},{id:5,name:e("weapon.5"),atk:6,def:2,ability:2,effect:"slash",icon:"w1"},{id:6,name:e("weapon.6"),atk:7,dex:1,agi:2,ability:3,effect:"shot",icon:"w11"},{id:7,name:e("weapon.7"),atk:8,dex:1,ability:1,effect:"crash",icon:"w9"},{id:8,name:e("weapon.8"),atk:9,def:1,agi:1,ability:2,effect:"slash",icon:"w3"},{id:9,name:e("weapon.9"),atk:10,def:2,ability:1,effect:"slash",icon:"w3"},{id:10,name:e("weapon.10"),atk:12,agi:-1,ability:null,effect:"crash",icon:"w10"},{id:11,name:e("weapon.11"),atk:12,ability:1,effect:"slash",icon:"w4"},{id:12,name:e("weapon.12"),atk:10,dex:4,ability:2,effect:"stab",icon:"w8"},{id:13,name:e("weapon.13"),atk:13,agi:-1,ability:null,effect:"slash",icon:"w5"},{id:14,name:e("weapon.14"),atk:12,agi:2,ability:3,effect:"shot",icon:"w11"},{id:15,name:e("weapon.15"),atk:13,dex:3,ability:1,effect:"slash",icon:"w2"},{id:16,name:e("weapon.16"),atk:15,agi:-2,ability:null,effect:"crash",icon:"w10"},{id:17,name:e("weapon.17"),atk:14,def:3,ability:2,effect:"slash",icon:"w5"},{id:18,name:e("weapon.18"),atk:15,dex:2,agi:2,ability:null,effect:"slash",icon:"w6"},{id:19,name:e("weapon.19"),atk:20,ability:1,effect:"slash",icon:"w7"}]}).call(this,a(3).default)},43:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(1689),s=(n=r)&&n.__esModule?n:{default:n};t.default=new s.default},47:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.slideIn=(e,t,{x:a=-200,y:n=0,delay:r=0}={})=>new Promise(s=>{const o=Array.isArray(t)?t:[t];o.forEach((t,i)=>{t.x+=a,t.y+=n,t.alpha=0,e.add.tween({targets:t,duration:250,ease:"Power2",delay:30*i+r,x:t.x-a,y:t.y-n,alpha:1,onComplete(){i===o.length-1&&s()}})})}),t.slideOut=(e,t,{x:a=200,y:n=0,destroy:r=!0,delay:s=0}={})=>{const o=Array.isArray(t)?t:[t];return new Promise(t=>{o.forEach((i,l)=>{e.add.tween({targets:i,duration:250,ease:"Power2",delay:30*(o.length-1-l)+s,x:i.x+a,y:i.y+n,alpha:0,onComplete(){i.x-=a,i.y-=n,r&&i.destroy(),l===o.length-1&&t()}})})})},t.fadeIn=(e,t,{duration:a=250,alpha:n=1,delay:r=0}={})=>{const s=Array.isArray(t)?t:[t];return new Promise(t=>{s.forEach(e=>e.alpha=0),e.add.tween({targets:s,duration:a,ease:"Power2",delay:r,alpha:n,onComplete(){t()}})})},t.fadeOut=(e,t,{destroy:a=!0,duration:n=250,delay:r=0}={})=>{const s=Array.isArray(t)?t:[t];return new Promise(t=>{e.add.tween({targets:s,duration:n,ease:"Power2",delay:r,alpha:0,onComplete(){a&&s.forEach(e=>e.destroy.bind(e)),t()}})})}},52:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(738),s=(n=r)&&n.__esModule?n:{default:n};t.default=(e,t,a={})=>{const n=s.default.find(t=>t.key===e),r=t-n.lv;return Object.assign(Object.assign({},n),{lv:t,hp:n.hp+Math.floor(n.up.hp*r/20)+(a.hp||0),atk:n.atk+Math.floor(n.up.atk*r/100)+(a.atk||0),def:n.def+Math.floor(n.up.def*r/100)+(a.def||0),dex:n.dex+Math.floor(n.up.dex*r/100)+(a.dex||0),agi:n.agi+Math.floor(n.up.agi*r/100)+(a.agi||0)})}},738:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{key:"ann",name:"Ann",lv:1,effect:"hit",hp:40,atk:4,def:3,dex:3,agi:2,up:{hp:100,atk:100,def:90,dex:70,agi:70}},{key:"francisca",name:"Francisca",lv:1,effect:"hit",hp:30,atk:2,def:2,dex:4,agi:4,up:{hp:85,atk:75,def:80,dex:90,agi:100}},{key:"jaquelyn",name:"Jaquelyn",lv:1,effect:"hit",hp:35,atk:3,def:2,dex:3,agi:4,up:{hp:90,atk:85,def:75,dex:100,agi:85}},{key:"jack",name:e("battler.jack"),lv:1,effect:"slash",y:70,hp:50,atk:4,def:2,dex:3,agi:4,up:{hp:90,atk:100,def:70,dex:70,agi:90},abillities:[{type:"double",chance:60}],dropWeapon:{id:15,chance:100}},{key:"bee",name:e("battler.bee"),lv:1,effect:"shot",hp:16,atk:4,def:1,dex:3,agi:4,up:{hp:70,atk:90,def:50,dex:70,agi:80},dropWeapon:{id:4,chance:3}},{key:"bee2",name:e("battler.bee2"),lv:1,effect:"shot",hp:18,atk:3,def:1,dex:4,agi:5,up:{hp:80,atk:80,def:50,dex:80,agi:90},dropWeapon:{id:4,chance:3}},{key:"slime",name:e("battler.slime"),lv:1,effect:"hit",hp:24,atk:3,def:4,dex:2,agi:2,up:{hp:100,atk:80,def:95,dex:50,agi:50},dropWeapon:{id:1,chance:3}},{key:"mandrake",name:e("battler.mandrake"),lv:1,effect:"crash",hp:21,atk:3,def:4,dex:4,agi:2,up:{hp:90,atk:70,def:90,dex:80,agi:60},dropWeapon:{id:2,chance:3}},{key:"wolf",name:e("battler.wolf"),lv:1,effect:"scratch",hp:28,atk:3,def:2,dex:4,agi:5,up:{hp:100,atk:80,def:60,dex:80,agi:100},dropWeapon:{id:3,chance:3}},{key:"flower",name:e("battler.flower"),lv:1,effect:"hit",hp:35,atk:4,def:3,dex:3,agi:4,up:{hp:100,atk:90,def:85,dex:70,agi:70}},{key:"bear",name:e("battler.bear"),lv:1,effect:"scratch",hp:40,atk:4,def:4,dex:2,agi:2,abillities:[{type:"multi",chance:50}],up:{hp:100,atk:100,def:85,dex:75,agi:65}},{key:"goblin",name:e("battler.goblin"),lv:1,effect:"crash",hp:24,atk:3,def:4,dex:2,agi:2,up:{hp:100,atk:80,def:95,dex:50,agi:50},dropWeapon:{id:5,chance:3}},{key:"goblin2",name:e("battler.goblin2"),lv:1,effect:"crash",hp:24,atk:3,def:4,dex:3,agi:3,up:{hp:100,atk:80,def:95,dex:50,agi:50},abillities:[{type:"double",chance:30}]},{key:"carbuncle",name:e("battler.carbuncle"),lv:1,effect:"shot",hp:21,atk:3,def:2,dex:4,agi:5,up:{hp:80,atk:80,def:60,dex:80,agi:100},dropWeapon:{id:6,chance:3}},{key:"orthrus",name:e("battler.orthrus"),lv:1,effect:"scratch",hp:50,atk:5,def:3,dex:3,agi:4,abillities:[{type:"double",chance:25}],up:{hp:100,atk:95,def:70,dex:70,agi:80}},{key:"gargoyle",name:e("battler.gargoyle"),lv:1,effect:"hit",hp:40,atk:3,def:6,dex:3,agi:3,up:{hp:90,atk:75,def:90,dex:70,agi:70},dropWeapon:{id:7,chance:3}},{key:"succubus",name:e("battler.succubus"),lv:1,effect:"stab",y:100,hp:35,atk:4,def:4,dex:3,agi:4,up:{hp:80,atk:75,def:80,dex:70,agi:75},dropWeapon:{id:8,chance:3}},{key:"aragnie",name:e("battler.aragnie"),lv:1,effect:"shot",hp:60,atk:4,def:6,dex:4,agi:3,abillities:[{type:"double",chance:70},{type:"multi",chance:30}],up:{hp:100,atk:80,def:90,dex:70,agi:60},dropWeapon:{id:9,chance:100}},{key:"phantom",name:e("battler.phantom"),lv:1,effect:"stab",hp:20,atk:3,def:3,dex:3,agi:5,up:{hp:90,atk:75,def:75,dex:70,agi:95}},{key:"skull",name:e("battler.skull"),lv:1,effect:"stab",hp:18,atk:4,def:4,dex:2,agi:2,up:{hp:85,atk:80,def:80,dex:70,agi:70}},{key:"ghost",name:e("battler.ghost"),lv:1,effect:"stab",y:70,hp:20,atk:4,def:4,dex:3,agi:4,up:{hp:100,atk:85,def:80,dex:70,agi:80},dropWeapon:{id:9,chance:2}},{key:"spectre",name:e("battler.spectre"),lv:1,effect:"stab",y:60,hp:30,atk:3,def:3,dex:4,agi:7,up:{hp:80,atk:75,def:75,dex:90,agi:100},dropWeapon:{id:10,chance:3}},{key:"wraith",name:e("battler.wraith"),lv:1,effect:"stab",hp:65,atk:6,def:4,dex:3,agi:4,up:{hp:100,atk:85,def:80,dex:70,agi:80},abillities:[{type:"double",chance:10}],dropWeapon:{id:11,chance:4}},{key:"dullahan",name:e("battler.dullahan"),lv:1,effect:"stab",hp:75,atk:6,def:6,dex:3,agi:3,up:{hp:150,atk:90,def:90,dex:70,agi:70},abillities:[{type:"multi",chance:20}],dropWeapon:{id:12,chance:4}},{key:"queen",name:e("battler.queen"),lv:1,effect:"stab",hp:60,atk:7,def:4,dex:3,agi:4,up:{hp:100,atk:95,def:80,dex:75,agi:80},abillities:[{type:"multi",chance:70}],dropWeapon:{id:13,chance:100}},{key:"bird",name:e("battler.bird"),lv:1,effect:"hit",hp:20,atk:4,def:4,dex:5,agi:5,up:{hp:75,atk:75,def:75,dex:85,agi:85}},{key:"lizard",name:e("battler.lizard"),lv:1,effect:"scratch",hp:20,atk:6,def:3,dex:5,agi:4,up:{hp:85,atk:90,def:75,dex:95,agi:80},dropWeapon:{id:15,chance:3}},{key:"tree",name:e("battler.tree"),lv:1,effect:"crash",hp:20,atk:4,def:6,dex:4,agi:4,up:{hp:90,atk:80,def:90,dex:75,agi:75},dropWeapon:{id:16,chance:3}},{key:"knight",name:e("battler.knight"),lv:1,effect:"slash",y:70,hp:90,atk:6,def:7,dex:4,agi:4,up:{hp:100,atk:90,def:100,dex:75,agi:75},abillities:[{type:"multi",chance:40}],dropWeapon:{id:17,chance:4}},{key:"thief",name:e("battler.thief"),lv:1,effect:"slash",y:70,hp:40,atk:3,def:4,dex:5,agi:5,up:{hp:70,atk:75,def:70,dex:90,agi:90},abillities:[{type:"double",chance:30}],dropWeapon:{id:18,chance:3}},{key:"nikke",name:e("battler.nikke"),lv:1,effect:"crash",hp:50,atk:4,def:3,dex:5,agi:5,up:{hp:90,atk:80,def:70,dex:95,agi:90},abillities:[{type:"double",chance:70}]},{key:"dragon",name:e("battler.dragon"),lv:1,effect:"scratch",hp:100,atk:8,def:6,dex:6,agi:4,up:{hp:100,atk:100,def:95,dex:90,agi:80},abillities:[{type:"multi",chance:70},{type:"double",chance:50}]}]}).call(this,a(3).default)},739:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(1693)),r=o(a(1702)),s=o(a(1711));function o(e){return e&&e.__esModule?e:{default:e}}t.default={en:n.default,ja:r.default,zh:s.default}},740:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(2)),r=c(a(12)),s=c(a(77)),o=c(a(120)),i=c(a(194)),l=a(47),h=c(a(310));function c(e){return e&&e.__esModule?e:{default:e}}class d extends Phaser.GameObjects.Container{constructor(t,a=!1){super(t),this.scene=t,this.loadMode=a;const n=t.add.text(20,15,a?"LOAD":"SAVE",{align:"center",fill:r.default.COLORS.theme.toColorString,fontSize:21,fontStyle:"bold",fontFamily:r.default.FONTS.UI}),s=t.add.text(20,41,e(a?"ui.sub.load":"ui.sub.save"),{align:"center",fill:r.default.COLORS.gray.toColorString,fontSize:10,fontStyle:"bold",fontFamily:r.default.FONTS.TEXT});this.add([n,s]),this.setItems().then(()=>{this.setContent(this.scene.storage.lastNumber||0)})}async setItems(){const e=!this.items;e||this.items.forEach(e=>e.destroy());const t=await this.scene.storage.getList();this.items=t.map((e,t)=>this.getItem(e,165,40*t+120)),this.add(this.items),e&&(0,l.slideIn)(this.scene,this.items)}getItem(e,t,a){const n=this.scene.add.container(t,a).setSize(240,30).setInteractive().on("pointerdown",()=>{this.scene.audio.se("click"),this.setContent(e.number)}),o=new s.default(this.scene,0,0,270,32);n.add(o);const i=this.scene.add.text(-120,0,e.name,{fontSize:15,fontStyle:"bold",fontFamily:r.default.FONTS.UI}).setOrigin(0,.5);if(n.add(i),n.setActive=e=>i.setFill(r.default.COLORS[e?"theme":"white"].toColorString),e.exists){const t=this.getProgress(e.state).toFixed(1),a=e.state.event.m5_1.completed?"Completed":"Chapter-"+e.state.chapter,s=this.scene.add.text(120,0,`${a}    ${t}%`,{fontSize:13,fontFamily:r.default.FONTS.UI,fill:r.default.COLORS.gray.toColorString}).setOrigin(1,.5);n.add(s)}return n}async setContent(e,t=!1){if(!t&&this.content&&this.content.number===e)return;this.items&&this.items.forEach((t,a)=>t.setActive(a===e)),this.content&&this.scene.add.tween({targets:this.content,duration:250,ease:"Power2",x:480,alpha:0,onComplete:this.content.destroy.bind(this.content)});const a=await this.scene.storage.getRow(e);this.content=this.getContent(a,280,104).setAlpha(0),this.add(this.content),this.scene.add.tween({targets:this.content,duration:250,ease:"Power2",x:380,alpha:1})}getContent(t,a,s){const l=this.scene.add.container(a,s);l.number=t.number;const h=this.scene.add.text(0,228,t.name,{fontSize:19,fontStyle:"bold",fontFamily:r.default.FONTS.UI});l.add(h);if(t.number>0&&!this.loadMode){const e=new o.default(this.scene,280,320,"Save",150,40).on("click",()=>{this.scene.storage.save(t.number).then(()=>{this.setItems().then(()=>{this.setContent(t.number,!0)})})});l.add(e)}const c=this.scene.add.rectangle(0,0,360,203,r.default.COLORS.black).setAlpha(.7).setOrigin(0,0);if(l.add(c),t.exists){t.snapshot&&(this.scene.textures.exists(t.name)&&this.scene.textures.removeKey(t.name),this.scene.textures.addBase64(t.name,t.snapshot).once("onload",()=>{l.add(this.scene.add.sprite(0,0,t.name).setOrigin(0,0).setScale(.375,.375))}));const a=i.default[t.state.chapter],s=t.state.event.m5_1.completed?e("ui.completed"):`${a.name} ${a.title}`,h=this.scene.add.text(110,220,s,{fontSize:16,fontStyle:"bold",fontFamily:r.default.FONTS.TEXT}),c=(0,n.default)(t.state.saved,"X").format("YYYY/MM/DD  HH:mm"),d=this.getProgress(t.state).toFixed(1),u=this.scene.add.text(110,247,`${c}     Progress  ${d}%`,{fontSize:13,fontFamily:r.default.FONTS.UI,fill:r.default.COLORS.gray.toColorString});if(l.add([h,u]),this.loadMode){const e=new o.default(this.scene,280,320,"Load",150,40).on("click",()=>{this.emit("loadData",t)});l.add(e)}}return l}get maxProgress(){return 4*h.default.length}getProgress(e){return Math.round(1e3*h.default.reduce((t,a)=>(e.event[a.key].started&&(t+=1),e.event[a.key].completed&&(t+=3),t),0)/this.maxProgress)/10}}t.default=d}).call(this,a(3).default)},741:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(12)),r=h(a(1722)),s=a(47),o=h(a(1723)),i=h(a(120)),l=h(a(739));function h(e){return e&&e.__esModule?e:{default:e}}class c extends Phaser.GameObjects.Container{constructor(t,a=!1){super(t),this.scene=t;const r=t.add.text(20,15,"SETTINGS",{align:"center",fill:n.default.COLORS.theme.toColorString,fontSize:21,fontStyle:"bold",fontFamily:n.default.FONTS.UI}),o=t.add.text(20,41,e("ui.sub.settings"),{align:"center",fill:n.default.COLORS.gray.toColorString,fontSize:10,fontStyle:"bold",fontFamily:n.default.FONTS.TEXT});this.add([r,o]);const i=this.getVolumeSetting(220,80,"bgm","BGM"),l=this.getVolumeSetting(220,160,"se","SE"),h=this.getControlMode(220,240),c=this.getLanguage(220,320),d=this.getBackToTitle(220,410).setVisible(!a),u=this.getRestart(560,410);this.updateRestartButtonVisible=()=>u.setVisible(this.scene.setting.initializedLang!==this.scene.setting.state.lang),this.updateRestartButtonVisible(),this.add([i,l,h,c,d,u]),(0,s.slideIn)(t,[i,l,h,c,d],{x:-100})}getVolumeSetting(e,t,a,s){const o=this.scene.add.container(e,t),i=this.scene.add.text(0,0,s+" Volume :",{fill:n.default.COLORS.gray.toColorString,fontSize:14,fontStyle:"bold",fontFamily:n.default.FONTS.UI}),l=new r.default(this.scene,200,35,400,10,{value:this.scene.setting.state[a]}),h=this.scene.add.text(430,26,this.scene.setting.state[a]+"%",{fill:n.default.COLORS.white.toColorString,fontSize:14,fontStyle:"bold",fontFamily:n.default.FONTS.TEXT});return l.on("updated",e=>{const t=Math.round(e);h.setText(t+"%"),this.scene.setting.state[a]=t,this.scene.setting.save(),"bgm"===a&&this.scene.audio.updateBgmVolume()}).on("pointerup",()=>{"se"===a&&this.scene.audio.se("announce")}),o.add([i,l,h]),o}getControlMode(t,a){const r=this.scene.add.container(t,a),s=this.scene.add.text(0,0,"UI Type :",{fill:n.default.COLORS.gray.toColorString,fontSize:14,fontStyle:"bold",fontFamily:n.default.FONTS.UI}),i=new o.default(this.scene,0,40,[e("ui.setting.autoDetection"),e("ui.setting.clickToAction"),e("ui.setting.virtualStick")]);return r.add([s,i]),i.setValue(this.scene.setting.state.controller),i.on("updated",e=>{this.scene.setting.state.controller=e,this.scene.setting.save()}),r}getLanguage(e,t){const a=Object.keys(l.default).map(e=>({value:e,label:l.default[e].langLabel})),r=this.scene.add.container(e,t),s=this.scene.add.text(0,0,"Language :",{fill:n.default.COLORS.gray.toColorString,fontSize:14,fontStyle:"bold",fontFamily:n.default.FONTS.UI}),i=new o.default(this.scene,0,40,a.map(e=>e.label));return r.add([s,i]),i.setValue(a.findIndex(e=>this.scene.setting.state.lang===e.value)),i.on("updated",e=>{this.scene.setting.state.lang=a[e].value,this.scene.setting.save(),this.updateRestartButtonVisible(),this.scene.menuButton&&this.scene.menuButton.updateLabel()}),r}getBackToTitle(e,t){const a=this.scene.add.container(e,t),r=this.scene.add.text(0,0,"Back to Title :",{fill:n.default.COLORS.gray.toColorString,fontSize:14,fontStyle:"bold",fontFamily:n.default.FONTS.UI}),s=this.scene.add.text(r.width+13,0,"Confirm",{fill:n.default.COLORS.theme.toColorString,fontSize:14,fontFamily:n.default.FONTS.UI}),o=this.scene.add.rectangle(r.width+13,15,s.width,1,n.default.COLORS.theme).setOrigin(0,0),l=new i.default(this.scene,85,50,"Back to Title",160,30).setVisible(!1);return s.setInteractive().on("pointerdown",()=>{this.scene.audio.se("click"),l.setVisible(!0),s.setVisible(!1),o.setVisible(!1)}),l.setInteractive().on("pointerdown",()=>{this.emit("backToTitle")}),a.add([r,s,o,l]),a}getRestart(e,t){const a=this.scene.add.container(e,t),r=this.scene.add.text(0,0,"Need to",{fill:15632401..toColorString,fontSize:14,fontStyle:"bold",fontFamily:n.default.FONTS.UI}),s=this.scene.add.text(r.width+5,0,"Restart",{fill:15632401..toColorString,fontSize:14,fontStyle:"bold",fontFamily:n.default.FONTS.UI});s.setInteractive().on("pointerdown",()=>{window.location.reload()});const o=this.scene.add.rectangle(r.width+6,15,s.width,1,15632401).setOrigin(0,0);return a.add([r,s,o]),a}}t.default=c}).call(this,a(3).default)},742:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(12),s=(n=r)&&n.__esModule?n:{default:n};class o extends Phaser.GameObjects.Container{constructor(t,a,n){super(t),this.setSize(120,50).setPosition(a,n),this.add(t.add.rectangle(0,0,120,50,s.default.COLORS.black).setAlpha(0)),this.add(t.add.text(15,-8,"CLOSE",{align:"center",fontSize:20,fontStyle:"bold",fontFamily:s.default.FONTS.UI}).setPadding(0,2,0,0).setOrigin(.5,.5)),this.add(t.add.text(15,11,e("ui.sub.close"),{align:"center",fontSize:9,fontStyle:"bold",fontFamily:s.default.FONTS.TEXT}).setPadding(0,2,0,0).setOrigin(.5,.5)),this.add(t.add.rectangle(-35,0,30,3,s.default.COLORS.theme).setRotation(Math.PI/4)),this.add(t.add.rectangle(-35,0,30,3,s.default.COLORS.theme).setRotation(Math.PI/-4)),this.setInteractive().on("pointerdown",e=>{e.isDown=!1,t.audio.se("cancel"),this.emit("click")})}}t.default=o}).call(this,a(3).default)},743:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEPTH=void 0;var n=c(a(744)),r=c(a(1727)),s=c(a(146)),o=c(a(147)),i=c(a(745)),l=c(a(1728)),h=c(a(12));function c(e){return e&&e.__esModule?e:{default:e}}const d=t.DEPTH={GROUND:0,PARTICLES:1e5,TOP:11e4,LIGHT:12e4,SUN_LIGHT:14e4,DARKNESS:13e4},u=(e,t)=>{if(!Array.isArray(e))return null;const a=e.find(e=>e.name===t);return a?a.value:null},m=e=>({alpha:parseInt(e.slice(1,3),16)/255,color:parseInt(e.slice(3),16)});t.default=class{constructor(e,t){e.add.existing(this),this.scene=e,this.name=t;const a=new Phaser.Tilemaps.ParseToTilemap(e,t);this.width=a.widthInPixels,this.height=a.heightInPixels;const h=this._getTilesets(a);a.layers.push(this._generateTopLayer(a)),this.animationTiles=this._getAllTileSettings(a).filter(e=>"animation"in e.setting).map(e=>{const t=a.layers.filter(e=>e.visible).map(e=>e.data.flat()).flat().filter(t=>t.index===e.id),n=Math.sum(...e.setting.animation.map(e=>e.duration));return{targets:t,animations:e.setting.animation,max:n}}),this.layers=a.layers.map((e,t)=>{const n=u(e.properties,"dynamic"),r=this.animationTiles.map(e=>e.targets).flat(),s=e.data.flat().some(e=>r.includes(e)),o=n||s?"createDynamicLayer":"createStaticLayer";return e.visible?a[o](t,h,0,0).setDepth(d.GROUND+this._getLayerIndexByName(e.name)):null}).filter(Boolean);const c=this._generateLights(a),g=u(a.properties,"darkness");if(g){const{alpha:e,color:t}=m(g);this._renderDarkness(e,t,c,this._getExposures(a))}u(a.properties,"sun")&&this._generateSunLight();const p=u(a.properties,"particles");p&&this._generateParticles(m(p).color),this.images=a.images.map(e=>this._getImage(e));const y=this._getTileIdsByType(a,"collides");this.layers.forEach(e=>e.setCollision(y)),this.layers[this.layers.length-1].setDepth(d.TOP),e.physics.add.collider(this.layers,e.substances),this.gates=this._getObjects(a,"gate").map(this._toAreaData).map(t=>new r.default(e,t.key,t.x,t.y,t.zone_x,t.zone_y,t.zone_width,t.zone_height).setId(t.id)),this.areas=this._getObjects(a,"area").map(this._toAreaData).map(t=>new n.default(e,t.zone_x,t.zone_y,t.zone_width,t.zone_height).setId(t.id)),this.charas=this._getObjects(a,"chara").map(t=>new s.default(e,t.x,t.y,t.name).setR((t.rotation+90)*(Math.PI/180)).setId(t.id)),this.objects=this._getObjects(a,"object").map(t=>new o.default(e,t.x,t.y,t.name).setId(t.id)),this.treasures=this._getObjects(a,"treasure").map(a=>new i.default(e,a.x,a.y,Number(a.name),`${t}_${a.id}`,90===a.rotation).setId(a.id)),this.crystals=this._getObjects(a,"crystal").map(t=>new l.default(e,t.x,t.y).setId(t.id))}update(e){this.animationTiles.forEach(t=>{const a=e%t.max,n=t.animations.find((e,t,n)=>a<Math.sum(...n.slice(0,t+1).map(e=>e.duration)));t.targets.forEach(e=>{e.index=n.tileid+1})})}getLayerByName(e){return this.layers.find(t=>t.layer.name===e)}getObjectById(e){return["charas","gates","areas","objects","treasures","crystals"].reduce((t,a)=>t||this[a].find(t=>t.id===e),null)}getImageByName(e){return this.images.find(t=>t.name===e)}isCollides(e,t){return this.layers.some(a=>{const n=a.getTileAt(e,t);return n&&n.collides})}displayDebug(){const e=this.scene.add.graphics().setAlpha(.75);this.layers.forEach(t=>{t.renderDebug(e,{tileColor:null,collidingTileColor:new Phaser.Display.Color(243,134,48,255),faceColor:new Phaser.Display.Color(40,39,37,255)})})}_getAllTileSettings(e){return e.tilesets.map(e=>this.scene.cache.json.get(e.name).tiles.map(t=>({id:t.id+e.firstgid,setting:t}))).flat()}_generateTopLayer(e){const t=e.layers.filter(e=>e.visible).reverse(),a=this._getTileIdsByType(e,"top"),n=new Phaser.Tilemaps.LayerData({name:"topLayer",width:e.width,height:e.height});return n.data=e.height.toArray().map(r=>e.width.toArray().map(e=>{const s=t.find(t=>a.includes(t.data[r][e].index));return new Phaser.Tilemaps.Tile(n,s?s.data[r][e].index:-1,e,r,32,32,32,32).setFlip(s&&s.data[r][e].flipX,s&&s.data[r][e].flipY)})),n}_generateSunLight(){[this.scene.add.sprite(30,-70,"sun_light").setDepth(d.SUN_LIGHT).setBlendMode(Phaser.BlendModes.OVERLAY).setOrigin(.5,0).setScale(1.4,10).setRotation(-1.1).setAlpha(.6),this.scene.add.sprite(-70,-70,"sun_light").setDepth(d.SUN_LIGHT).setBlendMode(Phaser.BlendModes.OVERLAY).setOrigin(.5,0).setScale(.8,10).setRotation(-.8).setAlpha(.6),this.scene.add.sprite(-70,30,"sun_light").setDepth(d.SUN_LIGHT).setBlendMode(Phaser.BlendModes.OVERLAY).setOrigin(.5,0).setScale(.4,10).setRotation(-.5).setAlpha(.6)].forEach(e=>{this.scene.add.tween({targets:e,duration:Math.randomInt(400,700),scaleX:e.scaleX+.02,alpha:.8,yoyo:!0,loop:-1})})}_generateLights(e){const t=this._getTileSettingsByType(e,"light"),a=this.layers.map(e=>e.layer.data.map(e=>e.filter(e=>t.map(e=>e.id).includes(e.index))).filter(e=>e.length).flatMap(e=>e)).filter(e=>e.length).flatMap(e=>e);return a.map(e=>{const a=(n=e.index,t.find(e=>e.id===n).properties);var n;const{color:r}=m(a.color);return this.getLight(e.x.toPixelCenter,e.y.toPixelCenter,r,a.drop)})}getLight(e,t,a,n=!1){const r=this.scene.add.sprite(e,t,"light").setTint(a).setScale(.5).setBlendMode(Phaser.BlendModes.OVERLAY).setDepth(d.LIGHT),s=n?this.scene.add.sprite(e,t+55,"light").setAlpha(.8).setTint(a).setScale(.6).setBlendMode(Phaser.BlendModes.OVERLAY).setDepth(d.LIGHT):null;return this.scene.add.tween({targets:[r,...s?[s]:[]],duration:Math.randomInt(300,400),scale:.6,alpha:.8,yoyo:!0,loop:-1}),r}_generateParticles(e){const t=this.scene.add.particles("light");t.setDepth(d.PARTICLES),t.createEmitter({x:{min:0,max:Math.max(this.width,40..toPixel)},y:{min:0,max:Math.max(this.height,40..toPixel)},scale:{start:.03,end:.07},alpha:{start:1,end:.2},tint:e,blendMode:Phaser.BlendModes.OVERLAY,lifespan:2e3,speed:{min:-20,max:20},accelerationX:0,accelerationY:-25,frequency:20})}_renderDarkness(e,t,a=[],n=[]){const r=[0,0,this.width,this.height],s=this.scene.add.renderTexture(...r).fill(t,e,...r).setOrigin(0).setDepth(d.DARKNESS),o=this.scene.add.image(0,0,"light").setScale(3,3);return a.forEach(e=>s.erase(o,e.x,e.y,1)),n.forEach(e=>s.erase(o,e.x,e.y,1)),o.destroy(),s}_getTilesets(e){return e.tilesets.map(t=>e.addTilesetImage(t.name,"tileset/"+t.name,32,32,1,2))}_getTileSettingsByType(e,t){return this._getAllTileSettings(e).filter(e=>e.setting.type&&e.setting.type.split(",").includes(t)).map(e=>{const t=e.setting.properties?e.setting.properties.reduce((e,t)=>(e[t.name]=t.value,e),{}):{};return{id:e.id,properties:t}})}_getTileIdsByType(e,t){return this._getTileSettingsByType(e,t).map(e=>e.id)}_getLayerIndexByName(e){return this.scene.cache.tilemap.get(this.name).data.layers.findIndex(t=>t.name===e)}_getObjects(e,t){return e.objects.map(e=>e.objects).flat().filter(e=>e.type===t)}_getExposures(e){const t=e.objects.find(e=>"exposure"===e.name);return t?t.objects:[]}_getImage(e){const t=this.scene.cache.tilemap.get(this.name).data.layers.find(t=>t.image===e.image&&(t.offsetx||t.x)===e.x&&(t.offsety||t.y)===e.y),a=e.image.split("/").slice(-1)[0].split(".")[0],n=this.scene.add.sprite(e.x,e.y,"tileset/"+a).setOrigin(0,0).setDepth(d.GROUND+this._getLayerIndexByName(e.name)).setAlpha(e.alpha);t.tintcolor&&n.setTint(t.tintcolor.toColorInt);const r=u(e.properties,"blend");r&&n.setBlendMode(Phaser.BlendModes[r]);const s=u(e.properties,"depth");s&&("SUBSTANCE"===s?n.setDepth(e.y+.8*n.height):n.setDepth(d[s]+1));const o=u(e.properties,"animation");return"cloud"===o&&this.scene.add.tween({targets:n,duration:1e5,x:n.x-1200}),"cloud_slow"===o&&this.scene.add.tween({targets:n,duration:2e5,x:n.x-1200}),n.name=e.name,n}_toAreaData(e){return{id:e.id,key:e.name,x:u(e.properties,"x"),y:u(e.properties,"y"),zone_x:e.x,zone_y:e.y,zone_width:e.width,zone_height:e.height}}rain(){const e=this.scene.add.particles("rectangle");e.setDepth(d.SUN_LIGHT).setAngle(-3),e.createEmitter({x:{min:0,max:Math.max(this.width,40..toPixel)},y:{min:0,max:Math.max(this.height,40..toPixel)},scaleX:{start:.03,end:.07},scaleY:{start:.4,end:1},color:h.default.COLORS.ghost,alpha:{start:.3,end:.1},lifespan:2e3,speedY:{min:100,max:300},accelerationX:30,accelerationY:300,frequency:20}),this._renderDarkness(.3,h.default.COLORS.black)}}},744:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Phaser.GameObjects.Zone{constructor(e,t,a,n,r){super(e,t,a,n,r),this.setOrigin(0,0),this.lastEnteredFrame=0,e.physics.world.enable(this),e.physics.add.overlap(this,e.player,()=>{const t=this.lastEnteredFrame<e.frame-10;this.lastEnteredFrame=e.frame,t&&this.event&&this.active&&(e.ui.setEventMode(this.eventMode),this.event().then(()=>e.ui.setEventMode(!1)))}),this.setActive(!0)}setEvent(e,t=!0){return this.event=e,this.eventMode=t,this}setId(e){return this.id=e,this}}t.default=n},745:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(147),s=(n=r)&&n.__esModule?n:{default:n};class o extends s.default{constructor(e,t,a,n,r,s){super(e,t,a,"treasure_chest"),this.scene=e,this.stateKey=r,this.weaponId=n,s&&this.image.setScale(-1,1),this.alreadyEarned?this.image.setFrame(6):this.setEvent()}get alreadyEarned(){return this.state.includes(this.stateKey)}async event(){this.open(),this.scene.ui.sleep(300).then(()=>{this.scene.ui.increaseWeapon(this.weaponId)})}setEvent(){this.weaponId&&!this.alreadyEarned&&this.setTapEvent(this.event.bind(this))}preUpdate(){super.preUpdate()}open(){this.state.push(this.stateKey),this.scene.audio.se("unbox"),this.image.anims.play("treasure",!0),this.removeTapEvent()}get state(){return this.scene.storage.state.treasures}}t.default=o},746:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.mercenary2=t.mercenary1=void 0;var n,r=a(52),s=(n=r)&&n.__esModule?n:{default:n};t.mercenary1=(t,a,n,r)=>{if(1!==t.storage.state.chapter)return[a,n,r].forEach(e=>e.destroy());const s=t.storage.state.event.m1_2;s.solved||r.setVisible(!1),r.setDisplayName(e("chara.injuredMercenary")).setTapEvent(async a=>{await t.talk([{chara:a,text:e("mercenary.member2.0")},...s.completed?[]:[{chara:a,text:e("mercenary.member2.1")}]])}),n.setDisplayName(e("chara.injuredMercenary")).setTapEvent(async a=>{await t.talk(s.solved?[{chara:a,text:e("mercenary.member1.2")},{chara:a,text:e("mercenary.member1.3")}]:[{chara:a,text:e("mercenary.member1.0")},{chara:a,text:e("mercenary.member1.1")}])}),a.setDisplayName(e("chara.injuredLeader")).setTapEvent(async a=>{if(s.completed)await t.talk([{chara:a,text:e("mercenary.leader.5")}]);else if(s.solved)await t.talk([{chara:a,text:e("mercenary.leader.0")},{chara:a,text:e("mercenary.leader.1")},{chara:a,text:e("mercenary.leader.2")},{chara:a,text:e("mercenary.leader.3")},{chara:a,text:e("mercenary.leader.4")}]),t.ui.missionUpdate("m1_2",!0).then(()=>{t.ui.increaseWeapon(3)});else if(s.started)await t.talk([{chara:a,text:e("mercenary.started")}]);else{const n=[[{chara:"ann",text:e("mercenary.start.0")},{chara:a,text:e("mercenary.start.1")},{chara:"jaquelyn",text:e("mercenary.start.2")},{chara:a,text:e("mercenary.start.3")},{chara:a,text:e("mercenary.start.4")},{chara:"ann",text:e("mercenary.start.5")},{chara:a,text:e("mercenary.start.6")},{chara:a,text:e("mercenary.start.7")},{chara:"jaquelyn",text:e("mercenary.start.8")},{chara:a,text:e("mercenary.start.9")},{chara:a,text:e("mercenary.start.10")},{chara:"jaquelyn",text:e("mercenary.start.11")},{chara:a,text:e("mercenary.start.12")},{chara:a,text:e("mercenary.start.13")},{chara:"francisca",text:e("mercenary.start.14")},{chara:"francisca",text:e("mercenary.start.15")},{chara:a,text:e("mercenary.start.16")},{chara:a,text:e("mercenary.start.17")},{chara:a,text:e("mercenary.start.18")},{chara:a,text:e("mercenary.start.19")},{chara:"ann",text:e("mercenary.start.20")},{chara:a,text:e("mercenary.start.21")}],[{chara:a,text:e("mercenary.start.22")},{chara:a,text:e("mercenary.start.23")},{chara:a,text:e("mercenary.start.24")},null]],r=await t.talk(s.talked?n[1]:n[0].concat(n[1])),o=await t.select([e("mercenary.start.25.0"),e("mercenary.start.25.1")]);r.destroy(),s.talked=!0,await t.talk([{chara:a,text:e(0===o?"mercenary.start.26.0":"mercenary.start.26.1")}]),0===o&&t.ui.missionUpdate("m1_2")}})},t.mercenary2=(t,a,n)=>{const r=t.storage.state.event.m1_2;if(r.completed||r.solved)return n.destroy(),void a.destroy();n.setVisible(!1),a.setTapEvent(async()=>{if(await t.talk([{chara:"ann",text:e("mercenary.flower.0")}]),!r.started)return;if(1===await t.select([e("mercenary.flower.1"),e("mercenary.flower.2")]))return;await t.ui.sleep(300);if(!await t.ui.battle([(0,s.default)("flower",5,{hp:270})],{boss:!0,bgm:"battle2"}))return;const o=n.setDisplayName(e("chara.injuredMercenary"));n.setVisible(!0),await a.die(),await t.talk([{chara:"ann",text:e("mercenary.battle.0")},{chara:"francisca",text:e("mercenary.battle.1")},{chara:o,text:e("mercenary.battle.2")},{chara:"ann",text:e("mercenary.battle.3")},{chara:"jaquelyn",text:e("mercenary.battle.4")},{chara:o,text:e("mercenary.battle.5")},{chara:"jaquelyn",text:e("mercenary.battle.6")},{chara:o,text:e("mercenary.battle.7")},{chara:"francisca",text:e("mercenary.battle.8")},{chara:"francisca",text:e("mercenary.battle.9")},{chara:"ann",text:e("mercenary.battle.10")},{chara:o,text:e("mercenary.battle.11")},{chara:o,text:e("mercenary.battle.12")},{chara:o,text:e("mercenary.battle.13")},{chara:o,text:e("mercenary.battle.14")},{chara:"ann",text:e("mercenary.battle.15")},{chara:o,text:e("mercenary.battle.16")},{chara:o,text:e("mercenary.battle.17")},{chara:o,text:e("mercenary.battle.18")},{chara:"ann",text:e("mercenary.battle.19")},{chara:o,text:e("mercenary.battle.20")},{chara:"jaquelyn",text:e("mercenary.battle.21")},{chara:"jaquelyn",text:e("mercenary.battle.22")},{chara:"jaquelyn",text:e("mercenary.battle.23")},{chara:o,text:e("mercenary.battle.24")},{chara:o,text:e("mercenary.battle.25")},{chara:o,text:e("mercenary.battle.26")}]),r.solved=!0,await t.ui.sleep(300),await t.ui.transition("normal"),n.setVisible(!1)})}}).call(this,a(3).default)},747:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,a){this.faceKey=e,this.displayName=t,this.chara=a}get x(){return this.chara.x}get y(){return this.chara.y}}},748:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.orthrus=t.dionysus=void 0;var n,r=a(52),s=(n=r)&&n.__esModule?n:{default:n};t.dionysus=(t,a,n,r)=>{if(!t.storage.state.event.m2_1.completed||t.storage.state.event.m2_4.jack)return void a.destroy();const s=t.storage.state.event.m2_3,o=a.setDisplayName(e("chara.dionysus"));a.setSpeed(180);const i={x:a.x,y:a.y};r.setActive(s.started),n.setEvent(async()=>{await t.talk([{chara:o,text:e("moonshine.talk3.0")},{chara:o,text:e("moonshine.talk3.1")},{chara:o,text:e("moonshine.talk3.2")},{chara:"ann",text:e("moonshine.talk3.3")},{chara:o,text:e("moonshine.talk3.4")},{chara:"ann",text:e("moonshine.talk3.5")},{chara:o,text:e("moonshine.talk3.6")},{chara:o,text:e("moonshine.talk3.7")},{chara:o,text:e("moonshine.talk3.8")},{chara:"ann",text:e("moonshine.talk3.9")},{chara:o,text:e("moonshine.talk3.10")},{chara:o,text:e("moonshine.talk3.11")},{chara:"ann",text:e("moonshine.talk3.12")},{chara:o,text:e("moonshine.talk3.13")},{chara:o,text:e("moonshine.talk3.14")},{chara:o,text:e("moonshine.talk3.15")}]),await a.setTargetPosition(9..toPixelCenter,2..toPixelCenter),a.setVisible(!1),await t.ui.sleep(500),await t.talk([{chara:"jaquelyn",text:e("moonshine.talk3.16")},{chara:"ann",text:e("moonshine.talk3.17")}]),await t.ui.transition("slow"),await t.ui.sleep(500),a.setR("down").setVisible(!0),await t.ui.sleep(500),await a.setTargetPosition(i.x,i.y),await t.talk([{chara:o,text:e("moonshine.talk3.18")},{chara:o,text:e("moonshine.talk3.19")},{chara:"ann",text:e("moonshine.talk3.20")},{chara:o,text:e("moonshine.talk3.21")},{chara:o,text:e("moonshine.talk3.22")},{chara:o,text:e("moonshine.talk3.23")},{chara:o,text:e("moonshine.talk3.24")}]),s.started=!0,n.setActive(!1),r.setActive(!0),t.ui.missionUpdate("m2_3")}).setActive(s.talked&&!s.started),a.setTapEvent(async()=>{s.completed?await t.talk([{chara:o,text:e("moonshine.solved.0")}]):s.solved?(await t.talk([{chara:o,text:e("moonshine.talk5.0")},{chara:o,text:e("moonshine.talk5.1")},{chara:o,text:e("moonshine.talk5.2")},{chara:o,text:e("moonshine.talk5.3")},{chara:"ann",text:e("moonshine.talk5.4")},{chara:o,text:e("moonshine.talk5.5")},{chara:o,text:e("moonshine.talk5.6")}]),t.ui.increaseWeapon(7),await t.talk([{chara:o,text:e("moonshine.talk5.7")},{chara:"ann",text:e("moonshine.talk5.8")},{chara:o,text:e("moonshine.talk5.9")}]),s.completed=!0,t.ui.missionUpdate("m2_3",!0)):s.started?await t.talk([{chara:o,text:e("moonshine.talk4.0")},{chara:o,text:e("moonshine.talk4.1")}]):s.talked?await t.talk([{chara:o,text:e("moonshine.talk2.0")},{chara:o,text:e("moonshine.talk2.1")}]):(await t.talk([{chara:o,text:e("moonshine.talk1.0")},{chara:o,text:e("moonshine.talk1.1")},{chara:"ann",text:e("moonshine.talk1.2")},{chara:"ann",text:e("moonshine.talk1.3")},{chara:o,text:e("moonshine.talk1.4")},{chara:"ann",text:e("moonshine.talk1.5")},{chara:o,text:e("moonshine.talk1.6")},{chara:o,text:e("moonshine.talk1.7")},{chara:"ann",text:e("moonshine.talk1.8")},{chara:o,text:e("moonshine.talk1.9")},{chara:o,text:e("moonshine.talk1.10")},{chara:"ann",text:e("moonshine.talk1.11")},{chara:"ann",text:e("moonshine.talk1.12")},{chara:"ann",text:e("moonshine.talk1.13")},{chara:o,text:e("moonshine.talk1.14")},{chara:o,text:e("moonshine.talk1.15")},{chara:o,text:e("moonshine.talk1.16")},{chara:"ann",text:e("moonshine.talk1.17")},{chara:o,text:e("moonshine.talk1.18")},{chara:o,text:e("moonshine.talk1.19")},{chara:o,text:e("moonshine.talk1.20")},{chara:"francisca",text:e("moonshine.talk1.21")},{chara:"francisca",text:e("moonshine.talk1.22")},{chara:o,text:e("moonshine.talk1.23")},{chara:o,text:e("moonshine.talk1.24")},{chara:o,text:e("moonshine.talk1.25")},{chara:"ann",text:e("moonshine.talk1.26")},{chara:o,text:e("moonshine.talk1.27")},{chara:o,text:e("moonshine.talk1.28")},{chara:"ann",text:e("moonshine.talk1.29")},{chara:o,text:e("moonshine.talk1.30")},{chara:o,text:e("moonshine.talk1.31")},{chara:o,text:e("moonshine.talk1.32")}]),s.talked=!0,n.setActive(!0))})},t.orthrus=(t,a,n,r)=>{const o=t.storage.state.event.m2_3;if(o.solved)return n.destroy(),void a.destroy();o.started||r.destroy(),n.setEvent(async()=>{if(o.started){await t.camera.look(0,-140,1e3,!0),await t.ui.sleep(1200),await t.talk([{chara:"ann",text:e("moonshine.orthrus2.0")},{chara:"ann",text:e("moonshine.orthrus2.1")}]),await t.ui.sleep(500);if(!await t.ui.battle([(0,s.default)("orthrus",18,{hp:800})],{boss:!0,bgm:"battle2"}))return;n.destroy(),await a.die(),await t.camera.revert(500),await t.talk([{chara:"ann",text:e("moonshine.orthrus2.2")},{chara:"jaquelyn",text:e("moonshine.orthrus2.3")}]),o.solved=!0}else await t.talk([{chara:"ann",text:e("moonshine.orthrus1.0")},{chara:"jaquelyn",text:e("moonshine.orthrus1.1")},{chara:"francisca",text:e("moonshine.orthrus1.2")}]),await t.ui.transition("fast"),t.player.setPosition(t.player.x,22..toPixelCenter).setR("down")})}}).call(this,a(3).default)},749:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.jack=t.dario=void 0;var n,r=a(52),s=(n=r)&&n.__esModule?n:{default:n};t.dario=(t,a)=>{const n=t.storage.state.event.m3_3;if(a.setDisplayName(e("chara.dario")),n.completed)return a.destroy();a.setTapEvent(async a=>{n.completed?await t.talk([{chara:a,text:e("dario.solved.0")}]):n.solved?(n.completed=!0,t.ui.missionUpdate("m3_3",!0),await t.talk([{chara:"ann",text:e("dario.solve.0")},{chara:"ann",text:e("dario.solve.1")},{chara:a,text:e("dario.solve.2")},{chara:a,text:e("dario.solve.3")},{chara:"ann",text:e("dario.solve.4")},{chara:"ann",text:e("dario.solve.5")},{chara:"ann",text:e("dario.solve.6")},{chara:a,text:e("dario.solve.7")},{chara:a,text:e("dario.solve.8")},{chara:"ann",text:e("dario.solve.9")},{chara:a,text:e("dario.solve.10")},{chara:a,text:e("dario.solve.11")},{chara:a,text:e("dario.solve.12")},{chara:a,text:e("dario.solve.13")},{chara:"ann",text:e("dario.solve.14")},{chara:a,text:e("dario.solve.15")},{chara:a,text:e("dario.solve.16")},{chara:a,text:e("dario.solve.17")},{chara:"ann",text:e("dario.solve.18")},{chara:a,text:e("dario.solve.19")},{chara:a,text:e("dario.solve.20")},{chara:a,text:e("dario.solve.21")},{chara:"ann",text:e("dario.solve.22")},{chara:a,text:e("dario.solve.23")},{chara:a,text:e("dario.solve.24")}]),t.ui.missionUpdate("m3_5"),t.storage.state.event.m3_5.started=!0):n.started?await t.talk([{chara:a,text:e("dario.started.0")},{chara:a,text:e("dario.started.1")},{chara:"ann",text:e("dario.started.2")}]):t.storage.state.event.m3_1.started?(await t.talk([{chara:a,text:e("dario.start.0")},{chara:"ann",text:e("dario.start.1")},{chara:"ann",text:e("dario.start.2")},{chara:a,text:e("dario.start.3")},{chara:a,text:e("dario.start.4")},{chara:a,text:e("dario.start.5")},{chara:a,text:e("dario.start.6")},{chara:a,text:e("dario.start.7")},{chara:a,text:e("dario.start.8")},{chara:a,text:e("dario.start.9")},{chara:a,text:e("dario.start.10")},{chara:a,text:e("dario.start.11")},{chara:a,text:e("dario.start.12")},{chara:a,text:e("dario.start.13")},{chara:"ann",text:e("dario.start.14")},{chara:"ann",text:e("dario.start.15")},{chara:a,text:e("dario.start.16")},{chara:a,text:e("dario.start.17")},{chara:"ann",text:e("dario.start.18")},{chara:"ann",text:e("dario.start.19")},{chara:a,text:e("dario.start.20")},{chara:a,text:e("dario.start.21")},{chara:a,text:e("dario.start.22")},{chara:"ann",text:e("dario.start.23")},{chara:a,text:e("dario.start.24")},{chara:a,text:e("dario.start.25")},{chara:a,text:e("dario.start.26")},{chara:"ann",text:e("dario.start.27")},{chara:"ann",text:e("dario.start.28")},{chara:"ann",text:e("dario.start.29")},{chara:a,text:e("dario.start.30")},{chara:"ann",text:e("dario.start.31")},{chara:"ann",text:e("dario.start.32")},{chara:a,text:e("dario.start.33")},{chara:a,text:e("dario.start.34")},{chara:a,text:e("dario.start.35")},{chara:a,text:e("dario.start.36")},{chara:"ann",text:e("dario.start.37")},{chara:a,text:e("dario.start.38")},{chara:a,text:e("dario.start.39")},{chara:a,text:e("dario.start.40")},{chara:a,text:e("dario.start.41")},{chara:a,text:e("dario.start.42")},{chara:"ann",text:e("dario.start.43")},{chara:"ann",text:e("dario.start.44")},{chara:"ann",text:e("dario.start.45")},{chara:a,text:e("dario.start.46")},{chara:"ann",text:e("dario.start.47")},{chara:a,text:e("dario.start.48")},{chara:"ann",text:e("dario.start.49")},{chara:"ann",text:e("dario.start.50")},{chara:a,text:e("dario.start.51")},{chara:a,text:e("dario.start.52")},{chara:"ann",text:e("dario.start.53")},{chara:a,text:e("dario.start.54")},{chara:a,text:e("dario.start.55")},{chara:"ann",text:e("dario.start.56")},{chara:"ann",text:e("dario.start.57")},{chara:a,text:e("dario.start.58")},{chara:a,text:e("dario.start.59")},{chara:a,text:e("dario.start.60")},{chara:a,text:e("dario.start.61")},{chara:a,text:e("dario.start.62")},{chara:"ann",text:e("dario.start.63")}]),n.started=!0,t.ui.missionUpdate("m3_3")):await t.talk([{chara:"ann",text:e("dario.unavailable.0")},{chara:a,text:e("dario.unavailable.1")},{chara:"ann",text:e("dario.unavailable.2")},{chara:"ann",text:e("dario.unavailable.3")}],{angle:!1})})},t.jack=(t,a,n,r,o)=>{const i=t.storage.state.event.m3_3;if(!i.started||i.solved)return n.destroy(),r.destroy(),o.destroy(),void a.destroy();o.setEvent(async()=>{await t.talk([{chara:"jaquelyn",text:e("dario.jack1.0")},{chara:"ann",text:e("dario.jack1.1")}]),o.destroy()}),n.setActive(!1),a.setVisible(!1),r.setEvent(async()=>{n.setActive(!0),r.destroy(),o.destroy()}),n.setEvent(async()=>{const r=a;a.setDisplayName(e("chara.jack")).setVisible(!0),await t.talk([{chara:r,text:e("dario.jack2.0")},{chara:"ann",text:e("dario.jack2.1")}]),t.francisca.setR("right"),t.jaquelyn.setR("right"),await a.setSpeed(140).setTargetPosition(a.x+(-10).toPixel,a.y),await t.talk([{chara:"ann",text:e("dario.jack2.2")},{chara:r,text:e("dario.jack2.3")},{chara:"ann",text:e("dario.jack2.4")},{chara:"ann",text:e("dario.jack2.5")},{chara:"ann",text:e("dario.jack2.6")},{chara:r,text:e("dario.jack2.7")},{chara:"ann",text:e("dario.jack2.8")},{chara:r,text:e("dario.jack2.9")},{chara:r,text:e("dario.jack2.10")},{chara:"ann",text:e("dario.jack2.11")},{chara:"ann",text:e("dario.jack2.12")},{chara:r,text:e("dario.jack2.13")},{chara:"ann",text:e("dario.jack2.14")},{chara:r,text:e("dario.jack2.15")},{chara:r,text:e("dario.jack2.16")},{chara:r,text:e("dario.jack2.17")},{chara:r,text:e("dario.jack2.18")},{chara:"ann",text:e("dario.jack2.19")},{chara:r,text:e("dario.jack2.20")},{chara:"ann",text:e("dario.jack2.21")}]),await t.ui.sleep(500);await t.ui.battle([(0,s.default)("jack",27,{hp:1300})],{boss:!0,bgm:"battle2"})&&(await t.ui.sleep(500),await t.talk([{chara:r,text:e("dario.jack3.0")},{chara:"ann",text:e("dario.jack3.1")},{chara:"ann",text:e("dario.jack3.2")},{chara:"ann",text:e("dario.jack3.3")},{chara:r,text:e("dario.jack3.4")},{chara:"ann",text:e("dario.jack3.5")},{chara:r,text:e("dario.jack3.6")}]),await t.ui.sleep(700),a.setR("up"),await t.ui.sleep(500),t.add.tween({targets:a,duration:200,y:a.y-70,ease:"Power2",onComplete:()=>{t.add.tween({targets:a,duration:200,alpha:0,y:a.y+55,ease:"Cubic.easeIn",onComplete:()=>a.destroy()})}}),await t.ui.sleep(200),t.player.setTargetPosition(t.player.x+50,t.player.y),await t.ui.sleep(1e3),await t.talk([{chara:"ann",text:e("dario.jack4.0")},{chara:"jaquelyn",text:e("dario.jack4.1")},{chara:"francisca",text:e("dario.jack4.2")},{chara:"ann",text:e("dario.jack4.3")},{chara:"ann",text:e("dario.jack4.4")},{chara:"jaquelyn",text:e("dario.jack4.5")},{chara:"francisca",text:e("dario.jack4.6")},{chara:"ann",text:e("dario.jack4.7")},{chara:"ann",text:e("dario.jack4.8")},{chara:"francisca",text:e("dario.jack4.9")},{chara:"ann",text:e("dario.jack4.10")},{chara:"ann",text:e("dario.jack4.11")},{chara:"francisca",text:e("dario.jack4.12")},{chara:"francisca",text:e("dario.jack4.13")},{chara:"ann",text:e("dario.jack4.14")},{chara:"jaquelyn",text:e("dario.jack4.15")},{chara:"jaquelyn",text:e("dario.jack4.16")},{chara:"ann",text:e("dario.jack4.17")}]),i.solved=!0,n.destroy())})}}).call(this,a(3).default)},750:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});t.architect=(t,a)=>{const n=t.storage.state.event.m4_1;if(n.completed&&4!==t.storage.state.chapter)return a.destroy();a.setDisplayName(e("chara.klaus")),a.setTapEvent(async()=>{if(n.completed)await t.talk([{chara:a,text:e("lorraine.solved.0")},{chara:a,text:e("lorraine.solved.1")}]);else if(n.started)await t.talk([{chara:a,text:e("lorraine.started.0")}]);else{await t.talk([{chara:"ann",text:e("lorraine.start1.0")},{chara:a,text:e("lorraine.start1.1")},{chara:"ann",text:e("lorraine.start1.2")},{chara:a,text:e("lorraine.start1.3")},{chara:a,text:e("lorraine.start1.4")},{chara:"ann",text:e("lorraine.start1.5")},{chara:a,text:e("lorraine.start1.6")},{chara:a,text:e("lorraine.start1.7")},{chara:a,text:e("lorraine.start1.8")},{chara:a,text:e("lorraine.start1.9")},{chara:"ann",text:e("lorraine.start1.10")},{chara:a,text:e("lorraine.start1.11")},{chara:a,text:e("lorraine.start1.12")},{chara:a,text:e("lorraine.start1.13")},{chara:a,text:e("lorraine.start1.14")},{chara:"ann",text:e("lorraine.start1.15")},{chara:a,text:e("lorraine.start1.16")},{chara:a,text:e("lorraine.start1.17")},{chara:a,text:e("lorraine.start1.18")},{chara:"ann",text:e("lorraine.start1.19")},{chara:a,text:e("lorraine.start1.20")}]);const r=async()=>{a.setTalking(!0);0===await t.select([e("lorraine.option.0"),e("lorraine.option.1")])?(await t.camera.look(25..toPixelCenter,22..toPixelCenter,600),await t.ui.sleep(1e3),await t.talk([{chara:"ann",text:e("lorraine.start2.0")},{chara:a,text:e("lorraine.start2.1")},{chara:a,text:e("lorraine.start2.2")},{chara:a,text:e("lorraine.start2.3")},{chara:a,text:e("lorraine.start2.4")},{chara:a,text:e("lorraine.start2.5")},{chara:a,text:e("lorraine.start2.6")},{chara:"ann",text:e("lorraine.start2.7")},{chara:a,text:e("lorraine.start2.8")}]),await t.camera.revert(600),await r()):(await t.talk([{chara:"ann",text:e("lorraine.start3.0")},{chara:a,text:e("lorraine.start3.1")},{chara:a,text:e("lorraine.start3.2")},{chara:a,text:e("lorraine.start3.3")},{chara:"ann",text:e("lorraine.start3.4")},{chara:a,text:e("lorraine.start3.5")},{chara:a,text:e("lorraine.start3.6")},{chara:"ann",text:e("lorraine.start3.7")},{chara:"ann",text:e("lorraine.start3.8")},{chara:"ann",text:e("lorraine.start3.9")},{chara:a,text:e("lorraine.start3.10")},{chara:a,text:e("lorraine.start3.11")},{chara:a,text:e("lorraine.start3.12")},{chara:"ann",text:e("lorraine.start3.13")},{chara:a,text:e("lorraine.start3.14")},{chara:a,text:e("lorraine.start3.15")}]),t.ui.announce(e("gotItem",e("lorraine.item"))),await t.talk([{chara:"ann",text:e("lorraine.start3.16")},{chara:a,text:e("lorraine.start3.17")},{chara:a,text:e("lorraine.start3.18")},{chara:"ann",text:e("lorraine.start3.19")}]),t.ui.missionUpdate("m4_1"),n.started=!0)};await r()}})};class a{constructor(){this.keys=[!1,!0,!0,!1],this.buttons=[{state:!1,affects:[0,2]},{state:!1,affects:[1,2]},{state:!1,affects:[2,3]}]}push(e){return this.buttons[e].affects.forEach(e=>this.keys[e]=!this.keys[e]),this.keys}get unlocked(){return this.keys.every(Boolean)}}t.gimmick=(t,n,r,s,o,i)=>{const l=t.storage.state.event.m4_1,h=()=>{const e=t.map.getLayerByName("layer3");[[17,2],[18,2],[19,2]].forEach(t=>{e.layer.data[t[1]][t[0]].setCollision(!1)})};if(l.completed)return r.destroy(),void h();const c=new a,d=()=>o.forEach((e,t)=>e.setVisible(c.keys[t]));d(),l.started&&(i.setEvent(async()=>{i.destroy(),await t.jaquelyn.tweet(e("lorraine.tweet.0")),c.unlocked||(await t.francisca.tweet(e("lorraine.tweet.1")),c.unlocked||await t.jaquelyn.tweet(e("lorraine.tweet.2")))},!1),n.forEach((a,r)=>{a.setTapEvent(async()=>{if(c.push(r),d(),c.unlocked){l.completed=!0,n.forEach(e=>e.removeTapEvent()),await t.ui.sleep(500),await t.camera.look(18..toPixelCenter,1..toPixelCenter,500);const a=[s[0],o[0],o[2]],r=[s[1],o[1],o[3]];a.forEach(e=>{t.add.tween({targets:e,duration:2e3,x:e.x-48,ease:"Power2"})}),r.forEach(e=>{t.add.tween({targets:e,duration:2e3,x:e.x+48,ease:"Power2"})}),h(),await t.ui.sleep(2e3),t.player.tweet(e("lorraine.tweet.3")),t.ui.missionUpdate("m4_1",!0),l.completed=!0,await t.camera.revert(500)}})}))}}).call(this,a(3).default)},751:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{const a=document.createElement("a");a.href=e,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}},752:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(12)),r=s(a(1800));function s(e){return e&&e.__esModule?e:{default:e}}class o extends Phaser.GameObjects.Container{constructor(e,t){super(e),this.scene=e,this.setActive(!1),this.setStatus(t||{hp:1,atk:1,def:1,dex:1,agi:1}),this.actionPoint=0}setStatus(e){this.source=e,this.key=e.key,this.name=e.name,this.lv=e.lv,this.maxHp=e.max_hp||e.hp,this.hp=e.hp,this.atk=e.atk,this.def=e.def,this.dex=e.dex,this.agi=e.agi,this.effect=e.effect,this.abillities=e.abillities||[]}get alive(){return this.hp>0}setActive(e){this.active=e}increaseTurn(){const e=this.actionPoint+this.agi;this.actionPoint=e%100;const t=e>=100;return this.setActive(t),t}baseDamageTo(e){const t=this.atk-e.def+10+this.lv,a=Math.fix(.6*(this.lv-e.lv),1,4);return Math.round(t*a)}accuracyTo(e){return 80*this.dex/e.agi}criticalTo(e){return Math.fix(4*(this.dex-e.agi),1,25)}getAttackMode(){return this.abillities.find(e=>Math.chance(e.chance))||{type:"normal",mag:1}}async attackTo(e,{mag:t=1,counter:a=!1}={}){const n=Math.round(this.baseDamageTo(e)*t),r=!a&&Math.chance(this.criticalTo(e)),s=a||Math.chance(this.accuracyTo(e));return this.setActive(!1),s?e.addDamage(this,n,{cri:r,counter:a}):e.damageText("Miss")}async addDamage(e,t,{cri:a,counter:n}={}){const s=a?2:n?1.5:1,o=Math.round(t*s);this.hp-=o;const i=a||n;return this.add(new r.default(this.scene,i,e.effect)),i&&this.critical(n),this.scene.audio.se(this.hitSE),this.damageText(o,{large:i}),await this.scene.sleep(120),this.hp<=0?this.die():null}get hitSE(){return"attack"}heal(e,t){this.setActive(!1);const a=e.maxHp-e.hp,n=Math.min(Math.round(e.maxHp*t*.01),a);e.hp+=n,this.scene.audio.se("heal"),e.damageText(n,{colorKey:"theme"})}critical(e){const t=this.scene.add.sprite(0,0,"critical_bg").setTint(e?15632401:13369344).setScale(0),a=this.scene.add.sprite(0,0,e?"counter_tx":"critical_tx").setScale(0);this.scene.add.tween({targets:[t,a],duration:30,scale:2,ease:"Power2",onComplete:()=>{this.scene.add.tween({targets:[t,a],duration:100,scale:1,ease:"Power2",onComplete:()=>{this.scene.add.tween({targets:[t,a],duration:300,delay:100,alpha:0,ease:"Power2",onComplete:()=>{t.destroy(),a.destroy()}})}})}}),this.add([t,a])}damageText(e,{colorKey:t="soy",large:a=!1}={}){const r=this.scene.add.text(0,0,e,{fill:n.default.COLORS[t].toColorString,stroke:n.default.COLORS.dark.toColorString,strokeThickness:5,fontSize:a?43:30,fontStyle:"bold",fontFamily:n.default.FONTS.UI}).setOrigin(.5,.5);this.scene.add.tween({targets:r,duration:150,y:-40,onComplete:()=>{this.scene.add.tween({targets:r,duration:150,y:-60,alpha:.2,onComplete:()=>r.destroy()})}}),this.add(r)}}t.default=o},753:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default={1:{key:"multi-attack",label:e("ability.1")},2:{key:"heal",label:e("ability.2")},3:{key:"multi-heal",label:e("ability.3")}}}).call(this,a(3).default)},754:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(12)),r=s(a(755));function s(e){return e&&e.__esModule?e:{default:e}}class o extends Phaser.GameObjects.Container{constructor(e,t,a,r,s,o){super(e),this.scene=e,this.lv=s,this.exp=o,e.add.existing(this),this.setPosition(t,a),this.bg=e.add.rectangle(-r.half,0,r,1,n.default.COLORS.soy).setOrigin(0,.5),this.bar=e.add.rectangle(-r.half,0,r-11,2,n.default.COLORS.soy).setOrigin(0,1).setScale(this.barScale,1),this.arrow=e.add.polygon(r.half-1,5,[[0,-5],[0,0],[10,0]],n.default.COLORS.soy).setOrigin(1,1),this.label=this.scene.add.text(-r.half,-4,"EXP",{fill:n.default.COLORS.soy.toColorString,stroke:n.default.COLORS.dark.toColorString,strokeThickness:2,fontSize:11,fontStyle:"bold",fontFamily:n.default.FONTS.UI}).setOrigin(0,1),this.add([this.bg,this.bar,this.arrow,this.label])}get value(){return this.exp-this.offset}get barScale(){return this.value/this.valueMax}get offset(){return r.default[this.lv-1]}get valueMax(){return r.default[this.lv]-this.offset}get next(){return this.valueMax-this.value}addExp(e){const t=Math.fix(e,0,this.next),a=this.value+t,n=Math.fix(a/this.valueMax,0,1),r=n-this.bar.scaleX;this.scene.add.tween({targets:this.bar,duration:1e3*r,ease:"Power2",scaleX:n,onComplete:()=>{a===this.valueMax&&(this.lv++,this.exp+=t,this.bar.scaleX=0,this.emit("lvUp",this.lv));const n=e-t;n>0?this.addExp(n):this.emit("completed")}})}}t.default=o},755:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=100..toArray(),r=n.map(e=>3*e);t.default=n.map(e=>Math.sum(...r.slice(0,e+1)))},756:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{key:"town",list:[{key:"town1",x:0,y:0}]},{key:"room",list:[{key:"room1",x:0,y:0}]},{key:"castle",list:[{key:"castle1",x:0,y:0}]},{key:"forest",list:[{key:"forest1",x:103,y:51},{key:"forest2",x:74,y:83},{key:"forest3",x:71,y:35},{key:"forest4",x:44,y:3},{key:"forest5",x:55,y:115},{key:"forest6",x:22,y:83},{key:"forest7",x:39,y:35},{key:"forest8",x:7,y:32},{key:"forest9",x:0,y:0}]},{key:"underpass",list:[{key:"underpass1",x:0,y:42},{key:"underpass2",x:21,y:0},{key:"underpass3",x:59,y:21},{key:"underpass4",x:82,y:18},{key:"underpass5",x:106,y:0},{key:"underpass6",x:95,y:-37},{key:"underpass7",x:104,y:-71},{key:"underpass8",x:130,y:-128},{key:"underpass9",x:141,y:-157},{key:"underpass10",x:3,y:1}]},{key:"catacomb",list:[{key:"catacomb1",x:170,y:33},{key:"catacomb2",x:202,y:41},{key:"catacomb3",x:134,y:87},{key:"catacomb4",x:74,y:87},{key:"catacomb5",x:98,y:123},{key:"catacomb6",x:42,y:62},{key:"catacomb7",x:0,y:71},{key:"catacomb8",x:74,y:41},{key:"catacomb9",x:106,y:36},{key:"catacomb10",x:106,y:0},{key:"catacomb11",x:138,y:33}]},{key:"temple",list:[{key:"temple1",x:35,y:47},{key:"temple2",x:79,y:38},{key:"temple3",x:117,y:45},{key:"temple4",x:116,y:81},{key:"temple5",x:59,y:6},{key:"temple6",x:111,y:0},{key:"temple7",x:27,y:1},{key:"temple8",x:153,y:45},{key:"temple9",x:185,y:5},{key:"temple10",x:186,y:81},{key:"temple11",x:61,y:90},{key:"temple12",x:38,y:118},{key:"temple13",x:10,y:158},{key:"temple14",x:-4,y:113},{key:"temple15",x:-15,y:68}]}]},757:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(12),s=(n=r)&&n.__esModule?n:{default:n};class o extends Phaser.GameObjects.Container{constructor(e,t,a,n){super(e,t,a),this.scene=e,this.width=n}set(e=!0,t=!0){this.pagerPrevious&&this.pagerPrevious.destroy(),this.pagerNext&&this.pagerNext.destroy(),e&&(this.pagerPrevious=this.scene.add.container(50,0).setSize(100,30).setInteractive().on("pointerdown",()=>{this.scene.audio.se("click"),this.emit("prev")}),this.pagerPrevious.add(this.scene.add.text(-10,-1,"Prev",{fontSize:13,fontStyle:"bold",fontFamily:s.default.FONTS.UI,fill:s.default.COLORS.gray.toColorString}).setOrigin(0,.5)),this.pagerPrevious.add(this.scene.add.sprite(-45,0,"arrow").setScale(.5).setOrigin(0,.5)),this.add(this.pagerPrevious)),t&&(this.pagerNext=this.scene.add.container(this.width-50,0).setSize(100,30).setInteractive().on("pointerdown",()=>{this.scene.audio.se("click"),this.emit("next")}),this.pagerNext.add(this.scene.add.text(10,-1,"Next",{fontSize:13,fontStyle:"bold",fontFamily:s.default.FONTS.UI,fill:s.default.COLORS.gray.toColorString}).setOrigin(1,.5)),this.pagerNext.add(this.scene.add.sprite(45,0,"arrow").setScale(-.5,.5).setOrigin(0,.5)),this.add(this.pagerNext))}}t.default=o},762:function(e,t,a){"use strict";a(316),a(1678);var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1817)),r=a(1818),s=m(a(1679)),o=m(a(1688)),i=m(a(1724)),l=m(a(1794)),h=m(a(1815)),c=m(a(1816)),d=m(a(12)),u=m(a(43));function m(e){return e&&e.__esModule?e:{default:e}}if(n.init({dsn:"https://0180594f74c948eabada6f1e8c2e3c1a@o569163.ingest.sentry.io/5729629",integrations:[new r.Integrations.BrowserTracing],release:"unsung-kingdom@1.0.7",tracesSampleRate:1}),location.query=location.search.substr(1).split("&").filter(Boolean).reduce((e,t)=>{const a=t.split("=");return e[a[0]]=a[1],e},{}),window.appStorage=new c.default,window.archiveManager=new h.default,window.gtag&&(window.archiveManager.initGtag(window.gtag),window.addEventListener("error",e=>{window.gtag("event","error",{event_label:`${e.filename}:${e.lineno} ${e.message}`})})),"undefined"!=typeof greenworks)try{greenworks.init(),window.archiveManager.initSteam(greenworks),window.appStorage.initSteam(greenworks)}catch(e){alert(e)}u.default.loadSetting();const g={type:Phaser.AUTO,width:d.default.WIDTH,height:d.default.HEIGHT,scene:[s.default,o.default,i.default,l.default],parent:"game",physics:{default:"arcade",arcade:{gravity:{y:0}}},audio:{disableWebAudio:!0},input:{activePointers:3}},p=new Phaser.Game(g);window.game=p,window.addEventListener("resize",()=>p.scale.refresh())},77:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=a(12),s=(n=r)&&n.__esModule?n:{default:n};class o extends Phaser.GameObjects.Polygon{constructor(e,t,a,n,r,o={}){const{color:i=s.default.COLORS.black,lineColor:l,alpha:h=.6}=o,c=r/5;super(e,t,a,[[c,0],[n,0],[n-c,r],[0,r]]),this.setFillStyle(i,h),l&&this.setStrokeStyle(1.1,l)}}t.default=o}});